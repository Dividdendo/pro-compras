(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{242:function(e,t,a){e.exports=a.p+"static/media/LOGODXC-01.41e858fa.jpg"},260:function(e,t,a){e.exports=a(658)},267:function(e,t,a){},658:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(46),i=a.n(o),s=(a(265),a(267),a(664)),c=a(15),l=a(68),u=a(165),p=a(58);var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":case"SET_USER_ACCESO":case"SET_SUGGESTION_LIST":case"SET_propuesta":case"SET_COMPRA_USER":case"SET_COMPRA_DATA":case"SET_COMPRA_PRESUPUESTO":case"SET_COMPRA_TERMINOS":case"SET_COMPRA_ENTRAGABLE":return Object(p.a)({},e,t.payload);default:return e}},d=a(234),h={key:"ROOT",storage:a.n(d).a},f=Object(u.a)(h,m),v=Object(l.c)(f,{userAcceso:""}),b=Object(u.b)(v),E=a(235),g=a(130),y=a(7),S=a(6),C=a(10),k=a(8),O=a(9),A=a(36),j=a(237),x=a.n(j),D=a(238),F=a.n(D),w=a(48),P=a.n(w),_=a(106),N=a.n(_),I=a(239),T=a.n(I),R=a(35),M=a.n(R),z=a(240),L=a.n(z),W=a(241),U=a.n(W),B=a(53),V=a.n(B),G=a(136),X=a.n(G),$=a(50),q=a.n($),J=a(135),H=a.n(J),K=a(660),Q=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(V.a,null,n.a.createElement(K.a,{to:"/compra"},n.a.createElement(q.a,{button:!0},n.a.createElement(H.a,null)," Compras"))),n.a.createElement(X.a,null),n.a.createElement(V.a,null,n.a.createElement(K.a,{to:"propuesta/1"},n.a.createElement(q.a,{button:!0},n.a.createElement(H.a,null)," Propuestas"))),n.a.createElement(X.a,null),n.a.createElement(V.a,null,n.a.createElement(q.a,{button:!0},n.a.createElement(H.a,null)," Propuestas")),n.a.createElement(X.a,null))}}]),t}(n.a.Component),Y=a(41),Z=a(661),ee=a(16),te=a.n(ee),ae={btn:{color:"#fff"}},re=Object(Z.a)(function(e){var t=e.history,a=(e.location,e.match,e.staticContext,e.to),r=e.onClick,o=Object(Y.a)(e,["history","location","match","staticContext","to","onClick"]);return n.a.createElement(te.a,Object.assign({style:ae.btn},o,{onClick:function(e){r&&r(e),t.push(a)}}))}),ne=a(47),oe=a.n(ne);var ie=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).toggleDrawer=function(e,t){return function(){a.setState(Object(g.a)({},e,t))}},a.validarstado=function(){null!==a.props.userAcceso&&""!==a.props.userAcceso&&a.setState({auth:!0})},a.logout=function(e){a.handleClose(),v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}})},a.handleChange=function(e){a.setState({auth:e.target.checked})},a.handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.state={anchorEl:null,user:{},top:!1,left:!1,bottom:!1,right:!1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.validarstado()}},{key:"render",value:function(){var e=this.props.classes,t=this.state.anchorEl,a=Boolean(t);return n.a.createElement("div",{className:e.root},n.a.createElement(x.a,{position:"static"},n.a.createElement(F.a,null,n.a.createElement(P.a,{variant:"h6",color:"inherit",className:e.grow},"Dividendo Compras"),!this.props.userAcceso&&n.a.createElement(re,{to:"/login"},"Login"),this.props.userAcceso&&n.a.createElement("div",null,"Super-Admin"===oe()(this.props.userAcceso).rol?n.a.createElement(re,{to:"/Presupuesto"},"Presupuesto"):"","Super-Admin"===oe()(this.props.userAcceso).rol?n.a.createElement(re,{to:"/AdminUser"},"funcionarios"):"","Super-Admin"===oe()(this.props.userAcceso).rol?n.a.createElement(re,{to:"/AdminProvedores"},"Provedores"):"","Super-Admin"===oe()(this.props.userAcceso).rol?n.a.createElement(re,{to:"/AdminMaestros"},"Datos Maestros"):"",n.a.createElement(re,{to:"/compra"},"Compra"),n.a.createElement(re,{to:"/compras"},"Compras")),this.props.userAcceso&&n.a.createElement("div",null,n.a.createElement(N.a,{"aria-owns":a?"menu-appbar":void 0,"aria-haspopup":"true",onClick:this.handleMenu,color:"inherit"},n.a.createElement(T.a,null)),n.a.createElement(L.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:this.handleClose},n.a.createElement(M.a,{onClick:this.handleClose},"My account ",oe()(this.props.userAcceso).name),n.a.createElement(M.a,{onClick:this.logout},"logout"))))),n.a.createElement(U.a,{open:this.state.left,onClose:this.toggleDrawer("left",!1)},n.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer("left",!1),onKeyDown:this.toggleDrawer("left",!1)},n.a.createElement(Q,{className:e.list}))))}}]),t}(n.a.Component),se=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},list:{width:250},appBar:{top:"auto"},fullList:{width:"auto"},logo:{width:"9%",padding:"5px"}})(ie)),ce=a(665),le=a(662),ue=a(22),pe=a.n(ue),me=a(19),de=a.n(me),he=a(5),fe=a.n(he),ve={endpoint:"https://apiCompras.dxc-competencias.org"},be=a(242),Ee=a.n(be),ge={root:{width:"98%"},cont:{display:"flex",justifyContent:"center"},logo:{width:"30%",display:"block",marginLeft:"auto",marginRight:"auto"},main:{padding:"10%"}};var ye=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(){a.setState({error:!1}),fe()({method:"post",url:ve.endpoint+"/authenticate",data:{email:a.state.email,password:a.state.password},headers:{Accept:"*/*"}}).then(function(e){v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:e.data.auth_token}}),a.home()}).catch(function(e){a.setState({canSubmit:!0}),500===e.response.status&&a.setState({error:!0})})},a.state={username:"",password:"",error:!1,canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.userAcceso&&this.props.history.push("/home")}},{key:"home",value:function(){this.props.history.push("/home")}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{style:ge.cont},n.a.createElement("div",{style:ge.main},n.a.createElement(pe.a,{style:ge.main},n.a.createElement("img",{style:ge.logo,src:Ee.a,alt:"logo"}),this.state.error?n.a.createElement("p",{style:{color:"red"}}," Error Usuario o contrase\xf1a err\xf3neos."):"",n.a.createElement(de.a,{id:"outlined-email-input",label:"Email",type:"email",name:"email",autoComplete:"email",onChange:function(t){return e.syncField(t,"email")},fullWidth:!0,margin:"normal",variant:"outlined"}),n.a.createElement(de.a,{id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:function(t){return e.syncField(t,"password")},fullWidth:!0,margin:"normal",variant:"outlined"}),n.a.createElement(te.a,{variant:"contained",type:"submit",color:"primary",onClick:this.onSubmit}," Login  "))))}}]),t}(n.a.Component),Se=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(ye),Ce=a(4),ke=a.n(Ce),Oe=a(14),Ae=a(82),je=a(87),xe=a.n(je),De=a(88),Fe=a.n(De),we=a(89),Pe=a.n(we),_e=a(251),Ne=a.n(_e),Ie=a(17),Te=a.n(Ie),Re=a(243),Me=a.n(Re),ze=a(245),Le=a.n(ze),We=a(246),Ue=a.n(We),Be=a(249),Ve=a.n(Be),Ge=a(247),Xe=a.n(Ge),$e=a(248),qe=a.n($e),Je=a(161),He=a.n(Je),Ke=a(244),Qe=a.n(Ke),Ye={success:Me.a,warning:Qe.a,error:Le.a,info:Ue.a};var Ze=Object(A.withStyles)(function(e){return{success:{backgroundColor:Xe.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:qe.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,r=e.message,o=e.onClose,i=e.variant,s=Object(Y.a)(e,["classes","className","message","onClose","variant"]),c=Ye[i];return n.a.createElement(He.a,Object.assign({className:Te()(t[i],a),"aria-describedby":"client-snackbar",message:n.a.createElement("span",{id:"client-snackbar",className:t.message},n.a.createElement(c,{className:Te()(t.icon,t.iconVariant)}),r),action:[n.a.createElement(N.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:o},n.a.createElement(Ve.a,{className:t.icon}))]},s))}),et=a(11),tt=a.n(et),at=a(33),rt=a.n(at),nt=a(31),ot=a.n(nt),it=a(1),st=a.n(it),ct=a(34),lt=a.n(ct),ut=a(21),pt=a.n(ut),mt=a(30),dt=a.n(mt),ht={tableWrapper:{overflowX:"auto"}},ft=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getcompra",value:function(e){this.props.getcompraID(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return n.a.createElement(pt.a,{key:t.id},n.a.createElement(st.a,null," ",t.NombreCompra," "),n.a.createElement(st.a,null,t.objetivo),n.a.createElement(st.a,null,t.updated_at),n.a.createElement(st.a,null,n.a.createElement(dt.a,{variant:"contained",color:"primary",onClick:function(){return e.getcompra(t.id)}},"build"),"    "))}):""}},{key:"setData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement("div",{style:ht.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Nombre Compra"),n.a.createElement(st.a,null,"Objetivo"),n.a.createElement(st.a,null,"Fecha de Creaci\xf2n"),this.props.action?n.a.createElement(st.a,null,"Acciones"):n.a.createElement(st.a,null))),n.a.createElement(ot.a,null,this.getMapData()))))}},{key:"render",value:function(){return this.setData()}}]),t}(n.a.Component),vt=a(81),bt=a.n(vt),Et=a(80),gt=a.n(Et),yt=a(86),St=a.n(yt),Ct=a(70),kt=a.n(Ct),Ot=a(69),At=a.n(Ot),jt=a(64),xt=a.n(jt),Dt={avatar:{backgroundColor:xt.a[100],color:xt.a[600]}},Ft=function(e){function t(){var e,a;Object(y.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(){a.props.onClose()},a.handleListItemClick=function(e){a.props.handleSelect(e)},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"mapdata",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return n.a.createElement(q.a,{button:!0,onClick:function(){return e.handleListItemClick(t)},key:t.id},n.a.createElement(gt.a,null,n.a.createElement(bt.a,null,n.a.createElement("i",{class:"material-icons"}," account_circle "))),n.a.createElement(St.a,{primary:t.name+" - "+t.apellido}))}):""}},{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.onClose,t.handleSelect,t.selectedValue,Object(Y.a)(t,["classes","onClose","handleSelect","selectedValue"]));return n.a.createElement(At.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},a),n.a.createElement(kt.a,{id:"simple-dialog-title"},"Seleccione Funcionario"),n.a.createElement("div",null,n.a.createElement(V.a,null,this.mapdata(),n.a.createElement(q.a,null,n.a.createElement(te.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleClose()}},"Cancelar")))))}}]),t}(n.a.Component),wt=Object(A.withStyles)(Dt)(Ft);var Pt=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleSelect=function(e){a.setState({open:!1}),a.props.pasarUser(e)},a.handleClose=function(e){a.setState({open:!1})},a.onSubmit=function(e){a.FilterNombre()},a.FilterNombre=function(e){a.setState({canSubmit:!1}),fe()({method:"get",timeout:8e3,url:ve.endpoint+"/user/filter/?nombre="+a.state.nombre,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){console.log(e.data.length),0===e.data.length?(a.setState({error:{nombre:["No encontramos resultados"]}}),a.clear()):(a.setState({canSubmit:!0,funcionarios:e.data}),a.handleClickOpen())}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={nit:"",nombre:"",funcionarios:[],msg:{estado:!1,msg:"",tipo:""},open:!1,error:{},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"clear",value:function(){this.setState({canSubmit:!0,nombre:"",nit:""})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre Funcionario ",value:this.state.nombre,placeholder:"Busca por nombre de de funcionario",ref:"nombre",name:"nombre",onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0,margin:"normal"})),n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"Buscar "),n.a.createElement(wt,{selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,handleSelect:this.handleSelect,datos:this.state.funcionarios}))}}]),t}(n.a.Component),_t=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Pt);var Nt={cont:{display:"flex",justifyContent:"center"}},It=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.getcompraID=function(e){a.props.compraData({id:e}),a.props.USER(a.state.user)},a.confirmar=function(){a.props.USER(a.state.user)},a.pasarUser=function(e){a.getUser(e.user_id)},a.state={value:0,user:{id:0},dataCompra:[]},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.btns(!1),this.getData()}},{key:"getData",value:function(){0===this.props.userData.id?this.getUser(oe()(this.props.userAcceso).user_id):this.getUser(this.props.userData.id)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getUser",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/users/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&(this.setState({user:a.data}),this.getComprasPersonTipe(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getComprasPersonTipe",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/compras/"+t+"/0",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:a=e.sent,this.setState({dataCompra:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("p",null,"Titular de la compra"),"Super-Admin"===oe()(this.props.userAcceso).rol||"Colaborador"===oe()(this.props.userAcceso).rol?n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(_t,{pasarUser:this.pasarUser}))," "):"",n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement("p",null,n.a.createElement("b",null,"Solicitante :")," ",this.state.user.name,"   ",this.state.user.apellido),n.a.createElement("p",null,n.a.createElement("b",null,"Cargo:")," ",this.state.user.cargo),n.a.createElement("p",null,n.a.createElement("b",null,"Direcci\xf2n :")," ",this.state.user.direccion)),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement("p",null,n.a.createElement("b",null,"Identificaci\xf2n:")," ",this.state.user.documento),n.a.createElement("p",null,n.a.createElement("b",null,"E-mail:")," ",this.state.user.email))),n.a.createElement("div",{style:Nt.cont},n.a.createElement(te.a,{variant:"contained",color:"primary",onClick:this.confirmar}," Continuar ")),this.state.dataCompra.length>0?n.a.createElement("div",null,n.a.createElement("p",null,"Termina de gestionar tus compras"),n.a.createElement(ft,{getcompraID:this.getcompraID,datos:this.state.dataCompra,action:!0})):" ")}}]),t}(n.a.Component),Tt=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(It);var Rt={cont:{display:"flex",justifyContent:"center"}},Mt=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleBack=function(){a.props.handleBack()},a.onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/compras",data:{NombreCompra:a.state.NombreCompra,objetivo:a.state.Objetivo,FechaInicio:a.state.FechaInicio,FechaFin:a.state.FechaFin,user_id:a.props.user.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.compraData(e.data),a.setState({canSubmit:!0}),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/compras/"+a.props.compra.id,data:{NombreCompra:a.state.NombreCompra,objetivo:a.state.Objetivo,FechaInicio:a.state.FechaInicio,FechaFin:a.state.FechaFin,user_id:a.props.user.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.compraData(e.data),a.setState({canSubmit:!0}),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={NombreCompra:"",Objetivo:"",FechaInicio:"",FechaFin:"",msg:{estado:!1,msg:"",tipo:""},error:{},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"componentDidMount",value:function(){this.getValidate(),this.props.btns(!1)}},{key:"getValidate",value:function(){this.setState({action:!1}),null!=this.props.compra.id?this.getData(this.props.compra.id):this.setState({action:!0})}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/compras/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&(console.log(new Date(a.data.FechaFin).toISOString().split("T")[0]),this.setState({action:!1,NombreCompra:a.data.NombreCompra,Objetivo:a.data.objetivo,FechaFin:new Date(a.data.FechaFin).toISOString().split("T")[0],FechaInicio:new Date(a.data.FechaInicio).toISOString().split("T")[0]})),console.log(this.state.FechaInicio),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.NombreCompra,label:this.state.error.NombreCompra?this.state.error.NombreCompra[0]:"Nombre Compras",value:this.state.NombreCompra,placeholder:"Nombre compra",ref:"NombreCompra",name:"NombreCompra",onChange:function(t){return e.syncField(t,"NombreCompra")},fullWidth:!0,multiline:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.objetivo,label:this.state.error.objetivo?this.state.error.objetivo[0]:"Objetivo compra",placeholder:"Objetivo compra",value:this.state.Objetivo,ref:"Objetivo",name:"Objetivo",multiline:!0,onChange:function(t){return e.syncField(t,"Objetivo")},fullWidth:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.FechaInicio,label:this.state.error.FechaInicio?this.state.error.FechaInicio[0]:"Fecha de inicio",id:"dateini",type:"date",ref:"FechaInicio",name:"FechaInicio",value:this.state.FechaInicio,onChange:function(t){return e.syncField(t,"FechaInicio")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(de.a,{error:!!this.state.error.FechaFin,label:this.state.error.FechaFin?this.state.error.FechaFin[0]:"Fecha de finalizaci\xf3n",id:"date",type:"date",ref:"FechaFin",name:"FechaFin",Value:this.state.FechaFin,onChange:function(t){return e.syncField(t,"FechaFin")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}))),n.a.createElement("div",{style:Rt.cont},n.a.createElement(te.a,{onClick:this.handleBack}," atras  "),this.state.action?n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  ")))}}]),t}(n.a.Component),zt=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Mt),Lt=a(55),Wt=a.n(Lt),Ut={tableWrapper:{overflowX:"auto"}},Bt=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return n.a.createElement(pt.a,{key:t.id},n.a.createElement(st.a,null," ",t.servicio," "),n.a.createElement(st.a,null,t.componenteName),n.a.createElement(st.a,null,t.clusterName),n.a.createElement(st.a,null,t.operationName),n.a.createElement(st.a,null,t.cantidad),n.a.createElement(st.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.valorConImpuesto)),e.props.action?n.a.createElement(st.a,null,n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),n.a.createElement(Wt.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):n.a.createElement(st.a,null))}):""}},{key:"setData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement("div",{style:Ut.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Servicio"),n.a.createElement(st.a,null,"componente"),n.a.createElement(st.a,null,"cluster"),n.a.createElement(st.a,null,"Centro de operaci\xf2n"),n.a.createElement(st.a,null,"Cantidad"),n.a.createElement(st.a,null,"$ valor con impuesto"),this.props.action?n.a.createElement(st.a,null,"Acciones"):n.a.createElement(st.a,null))),n.a.createElement(ot.a,null,this.getMapData(),n.a.createElement(pt.a,null,n.a.createElement(st.a,{rowSpan:3}),n.a.createElement(st.a,{colSpan:5},"Total de compra"),n.a.createElement(st.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.total)))))))}},{key:"render",value:function(){return this.setData()}}]),t}(n.a.Component),Vt=a(37),Gt=a.n(Vt),Xt=a(44),$t=a.n(Xt),qt=a(134),Jt=a.n(qt);var Ht=function(e){var t=e.inputRef,a=e.onChange,r=Object(Y.a)(e,["inputRef","onChange"]);return n.a.createElement(Jt.a,Object.assign({},r,{getInputRef:t,onValueChange:function(e){a({target:{value:e.value}})},thousandSeparator:!0,prefix:"$"}))},Kt=a(45),Qt=a.n(Kt);var Yt=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getDetallepresupuesto(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/detallepresupuestos",data:{servicio:a.state.servicio,cantidad:a.state.cantidad,valorSinImpuesto:a.state.valorSinImpuesto,valorConInpuesto:a.state.valorConInpuesto,NombreCompra:a.state.NombreCompra,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,compra_id:a.props.compra.id,operacion_id:a.state.operacion_id,proyecto_id:a.state.proyecto_id,periodo_id:a.props.periodo.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{valorConInpuesto:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.getValidate(),a.clear(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/detallepresupuestos/"+a.state.id,data:{servicio:a.state.servicio,cantidad:a.state.cantidad,valorSinImpuesto:a.state.valorSinImpuesto,valorConInpuesto:a.state.valorConInpuesto,NombreCompra:a.state.NombreCompra,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,operacion_id:a.state.operacion_id,periodo_id:a.props.periodo.id,proyecto_id:a.state.proyecto_id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{valorConInpuesto:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.getValidate(),a.clear(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){fe()({method:"DELETE",url:ve.endpoint+"/detallepresupuestos/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getValidate()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",servicio:"",cantidad:0,valorSinImpuesto:0,valorConInpuesto:"",cluster_id:"",componente_id:"",operacion_id:"",proyecto_id:"",datos:{data:[]},componentes:[],operacions:[],Cluster:[],Proyectos:[],Mensaje:!1,DatosPresupuesto:{},msgProye:"Buscando",msg:{estado:!1,msg:"",tipo:""},error:{},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"componentDidMount",value:function(){this.getValidate(),this.getcluster(),this.getComponente(),this.getOperacion()}},{key:"getValidate",value:function(){null!=this.props.compra.id&&this.getData(this.props.compra.id)}},{key:"getDetallepresupuesto",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/detallepresupuestos/"+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,servicio:a.data.servicio,cantidad:a.data.cantidad,valorSinImpuesto:a.data.valorSinImpuesto,valorConInpuesto:a.data.valorConInpuesto,cluster_id:a.data.cluster_id,componente_id:a.data.componente_id,operacion_id:a.data.operacion_id}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({id:"",servicio:"",cantidad:0,valorSinImpuesto:"",valorConInpuesto:"",cluster_id:"",componente_id:"",operacion_id:"",action:!0,error:{},Mensaje:!1})}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/ListdetallePresupuesto/"+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&(this.setState({datos:a.data}),0===this.state.datos.data.length?(this.props.CanNext(!1),this.props.btns(!1)):(this.props.CanNext(!0),this.props.btns(!0)),this.listData()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.data.length?n.a.createElement(Bt,{datos:this.state.datos,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"getcluster",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/clusters/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Cluster:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getComponente",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/componentes/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({componentes:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getOperacion",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/operacions/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({operacions:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getProyectos",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.cluster_id>0&&this.state.componente_id>0&&this.state.operacion_id>0)){e.next=14;break}return this.setState({msgProye:"Buscando",Proyectos:[]}),e.prev=2,e.next=5,fe()({url:ve.endpoint+"/proyecto/f/?periodo_id=1&cluster_id="+this.state.cluster_id+"&componente_id="+this.state.componente_id+"&operacion_id="+this.state.operacion_id,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 5:200===(t=e.sent).status&&(t.data.length>0?this.setState({msgProye:"seleccion\xe9 ",Proyectos:t.data}):this.setState({msgProye:"Esta llave no tiene presupuesto.",Proyectos:[]})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.getError(e.t0.response);case 12:e.next=15;break;case 14:this.setState({msgProye:"seleccion\xe9 los campos requeridos",Proyectos:[]});case 15:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"listCluster",value:function(){return this.state.Cluster.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listComponente",value:function(){return this.state.componentes.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listOperation",value:function(){return this.state.operacions.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listProyecto",value:function(){return this.state.Proyectos.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,this.state.Mensaje?n.a.createElement(Qt.a,null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:6,sm:3},n.a.createElement("b",null,"Total presupuesto:")," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.state.DatosPresupuesto.TotalPresupuesto)),n.a.createElement(tt.a,{item:!0,xs:6,sm:3},n.a.createElement("b",null,"Total comprometido:")," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL"}).format(this.state.DatosPresupuesto.comprometido)),n.a.createElement(tt.a,{item:!0,xs:6,sm:3},n.a.createElement("b",null,"Total gasto:"),new Intl.NumberFormat("COL",{style:"currency",currency:"COL"}).format(this.state.DatosPresupuesto.gasto)),n.a.createElement(tt.a,{item:!0,xs:6,sm:3},n.a.createElement("b",null,"Dinero disponible:")," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL"}).format(this.state.DatosPresupuesto.disponible)))):"",n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.servicio,label:this.state.error.servicio?this.state.error.servicio[0]:"Productos o servicios Requeridos",value:this.state.servicio,placeholder:"Productos o servicios Requeridos",ref:"servicio",name:"servicio",onChange:function(t){return e.syncField(t,"servicio")},fullWidth:!0}),n.a.createElement(Gt.a,{htmlFor:"Cluster"},this.state.error.cluster?this.state.error.cluster[0]:"Cluster"),n.a.createElement($t.a,{error:!!this.state.error.cluster,fullWidth:!0,value:this.state.cluster_id,onChange:function(t){return e.syncField(t,"cluster_id")},inputProps:{name:"Cluster",id:"Cluster"}},n.a.createElement(M.a,{value:""},n.a.createElement("em",null,"None")),this.listCluster()),n.a.createElement(Gt.a,{htmlFor:"Componente"},this.state.error.componente?this.state.error.componente[0]:"componente"),n.a.createElement($t.a,{error:!!this.state.error.componente,fullWidth:!0,value:this.state.componente_id,onChange:function(t){return e.syncField(t,"componente_id")},inputProps:{name:"Componente",id:"Componente"}},n.a.createElement(M.a,{value:""},n.a.createElement("em",null,"None")),this.listComponente())),n.a.createElement(tt.a,{item:!0,xs:12,sm:3},n.a.createElement(Gt.a,{htmlFor:"operacion"},this.state.error.operacion?this.state.error.operacion[0]:"Centro de operaci\xf2n"),n.a.createElement($t.a,{error:!!this.state.error.operacion,fullWidth:!0,value:this.state.operacion_id,onChange:function(t){return e.syncField(t,"operacion_id")},inputProps:{name:"operacion",id:"operacion"}},n.a.createElement(M.a,{value:""},n.a.createElement("em",null,"None")),this.listOperation()),n.a.createElement(Gt.a,{htmlFor:"proyecto"},this.state.error.proyecto?this.state.error.proyecto[0]:"Concepto"),n.a.createElement($t.a,{error:!!this.state.error.proyecto,fullWidth:!0,value:this.state.proyecto_id,onFocus:function(t){return e.getProyectos()},onChange:function(t){return e.syncField(t,"proyecto_id")},inputProps:{name:"proyecto",id:"proyecto"}},n.a.createElement(M.a,null,n.a.createElement("em",null," ",this.state.msgProye)),this.listProyecto())),n.a.createElement(tt.a,{item:!0,xs:12,sm:3},n.a.createElement(de.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad",fullWidth:!0,placeholder:"Cantidad",value:this.state.cantidad,ref:"cantidad",name:"cantidad",onChange:function(t){return e.syncField(t,"cantidad")}}),n.a.createElement(de.a,{error:!!this.state.error.valorConInpuesto,label:this.state.error.valorConInpuesto?this.state.error.valorConInpuesto[0]:"Total con impuestos",placeholder:"Valor con con impuestos",value:this.state.valorConInpuesto,onChange:function(t){return e.syncField(t,"valorConInpuesto")},id:"formatted-numberformat-input",fullWidth:!0,InputProps:{inputComponent:Ht}}))),this.state.action?n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(n.a.Component),Zt=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Yt),ea=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return n.a.createElement(pt.a,{key:t.id},n.a.createElement(st.a,{component:"th",scope:"row"},t.Especificacion),n.a.createElement(st.a,{numeric:!0},t.cantidad),n.a.createElement(st.a,null,t.observaciones),e.props.action?n.a.createElement(st.a,null,n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),n.a.createElement(Wt.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):n.a.createElement(st.a,null))}):""}},{key:"setData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Especificaci\xf2n"),n.a.createElement(st.a,{numeric:!0},"Cantidad"),n.a.createElement(st.a,null,"Observaciones"),this.props.action?n.a.createElement(st.a,null,"Acciones"):n.a.createElement(st.a,null))),n.a.createElement(ot.a,null,this.getMapData())))}},{key:"render",value:function(){return this.setData()}}]),t}(n.a.Component);var ta=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getidreferenceterms(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/referenceterms",data:{Especificacion:a.state.Especificacion,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,Especificacion:"",observaciones:"",cantidad:0}),a.componentDidMount(),a.props.msgbn("Datos registrados correctamente.")}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"PUT",url:ve.endpoint+"/referenceterms/"+a.state.id,data:{Especificacion:a.state.Especificacion,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,action:!0,id:"",Especificacion:"",observaciones:"",cantidad:0}),a.setState({canSubmit:!0,action:!0,id:"",Especificacion:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){fe()({method:"DELETE",url:ve.endpoint+"/referenceterms/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.componentDidMount()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",Especificacion:"",observaciones:"",cantidad:0,datos:[],action:!0,msg:{estado:!1,msg:"",tipo:""},error:{},canSubmit:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.compra.id),this.props.btns(!0)}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/listreferenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({datos:a.data}),0===this.state.datos.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.length?n.a.createElement(ea,{datos:this.state.datos,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"getidreferenceterms",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/referenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({canSubmit:!0,action:!1,id:a.data.id,Especificacion:a.data.Especificacion,observaciones:a.data.observaciones,cantidad:a.data.cantidad}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:6,sm:3},n.a.createElement(de.a,{error:!!this.state.error.Especificacion,label:this.state.error.Especificacion?this.state.error.Especificacion[0]:"Especificacion",placeholder:"Especificacion",ref:"nameCompra",name:"nameCompra",onChange:function(t){return e.syncField(t,"Especificacion")},value:this.state.Especificacion,fullWidth:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.observaciones,label:this.state.error.observaciones?this.state.error.observaciones[0]:"Observaciones",placeholder:"Expecificar Observaciones",ref:"observaciones",name:"observaciones",onChange:function(t){return e.syncField(t,"observaciones")},value:this.state.observaciones,fullWidth:!0,multiline:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:3,sm:1},n.a.createElement(de.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad",placeholder:"Cantidad",value:this.state.cantidad,ref:"cantidad",name:"cantidad",onChange:function(t){return e.syncField(t,"cantidad")},margin:"normal"}))),this.state.action?n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(n.a.Component),aa=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(ta),ra=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return n.a.createElement(pt.a,{key:t.id},n.a.createElement(st.a,{component:"th",scope:"row"},t.producto),n.a.createElement(st.a,{numeric:!0},t.cantidad),n.a.createElement(st.a,null,t.observaciones),e.props.action?n.a.createElement(st.a,null,n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),n.a.createElement(Wt.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):n.a.createElement(st.a,null))}):""}},{key:"setData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Producto o servicio"),n.a.createElement(st.a,{numeric:!0},"Cantidad"),n.a.createElement(st.a,null,"Observaciones"),this.props.action?n.a.createElement(st.a,null,"Acciones"):n.a.createElement(st.a,null))),n.a.createElement(ot.a,null,this.getMapData())))}},{key:"render",value:function(){return this.setData()}}]),t}(n.a.Component);var na=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getConsultarPorid(e)},a.onEliminar=function(e){fe()({method:"DELETE",url:ve.endpoint+"/entregables/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,action:!0,producto:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/entregables",data:{producto:a.state.producto,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,action:!0,producto:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.getError(e.response),a.setState({canSubmit:!0})})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"PUT",url:ve.endpoint+"/entregables/"+a.state.id,data:{producto:a.state.producto,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!0,canSubmit:!0,producto:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.getError(e.response),a.setState({canSubmit:!0})})},a.state={id:"",producto:"",observaciones:"",cantidad:0,referenceterm:[],action:!0,error:{},msg:{estado:!1,msg:"",tipo:""},canSubmit:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.compra.id),this.props.btns(!0)}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/listEntregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({referenceterm:a.data}),0===this.state.referenceterm.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getConsultarPorid",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/entregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({canSubmit:!0,action:!1,id:a.data.id,producto:a.data.producto,observaciones:a.data.observaciones,cantidad:a.data.cantidad}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.referenceterm.length?n.a.createElement(ra,{datos:this.state.referenceterm,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:6,sm:3},n.a.createElement(de.a,{error:!!this.state.error.producto,label:this.state.error.producto?this.state.error.producto[0]:"producto o servicio ",placeholder:"producto o servicio ",ref:"producto",name:"producto",onChange:function(t){return e.syncField(t,"producto")},value:this.state.producto,fullWidth:!0,multiline:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.observaciones,label:this.state.error.observaciones?this.state.error.observaciones[0]:"Observaciones ",placeholder:"Expecificar Observaciones",ref:"observaciones",name:"observaciones",onChange:function(t){return e.syncField(t,"observaciones")},value:this.state.observaciones,fullWidth:!0,multiline:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:3,sm:1},n.a.createElement(de.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad ",placeholder:"Cantidad",ref:"Cantidad",name:"Cantidad",onChange:function(t){return e.syncField(t,"cantidad")},value:this.state.cantidad,fullWidth:!1,multiline:!0,margin:"normal"}))),this.state.action?n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(n.a.Component),oa=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(na),ia=a(250),sa=a.n(ia),ca={tableWrapper:{overflowX:"auto"}};var la=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentWillReceiveProps",value:function(){this.props.actualizar()}},{key:"getMapData",value:function(){return this.props.datos?this.props.datos.data.map(function(e){return n.a.createElement(pt.a,{key:e.id},n.a.createElement(st.a,null,"  ",e.servicio,"  "),n.a.createElement(st.a,null,e.componenteName),n.a.createElement(st.a,null,e.clusterName),n.a.createElement(st.a,null,e.operacionName),n.a.createElement(st.a,null,e.cantidad),n.a.createElement(st.a,null,n.a.createElement(sa.a,{disableFocusListener:!0,disableTouchListener:!0,title:e.porcentaje},n.a.createElement("p",null," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.valorPresupuesto)))),n.a.createElement(st.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.totalPago)))}):""}},{key:"setData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement("div",{style:ca.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Servicio"),n.a.createElement(st.a,null,"componente"),n.a.createElement(st.a,null,"cluster"),n.a.createElement(st.a,null,"Centro de operaci\xf2n"),n.a.createElement(st.a,null,"Cantidad"),n.a.createElement(st.a,null,"$ valor presupuesto"),n.a.createElement(st.a,null,"$ Gasto"))),n.a.createElement(ot.a,null,this.getMapData(),n.a.createElement(pt.a,null,n.a.createElement(st.a,{rowSpan:4}),n.a.createElement(st.a,{colSpan:4},"Totales"),n.a.createElement(st.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalPresupuestado)),n.a.createElement(st.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalCompra))),n.a.createElement(pt.a,null,n.a.createElement(st.a,{rowSpan:4}),n.a.createElement(st.a,{colSpan:3},"Ahorro"),n.a.createElement(st.a,{align:"right"}),n.a.createElement(st.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalPresupuestado-this.props.datos.TotalCompra)))))))}},{key:"render",value:function(){return this.setData()}}]),t}(n.a.Component),ua=Object(c.b)(function(e){return{userAcceso:e.userAcceso,compra:e.compra}})(la);var pa=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={user:{},entregables:[],TerminosReferencia:[],presupuesto:{data:[]},presupuestoAfect:{data:[]},fechaSolicitud:"",FechaInicio:"",FechaFin:""},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getUser(this.props.COMPRADATA.user_id),this.getentregables(this.props.COMPRADATA.id),this.getTerminos(this.props.COMPRADATA.id),this.getPresupuesto(this.props.COMPRADATA.id);var e=new Date(this.props.COMPRADATA.created_at).toLocaleDateString();this.setState({fechaSolicitud:e,FechaInicio:new Date(this.props.COMPRADATA.FechaInicio).toLocaleDateString(),FechaFin:new Date(this.props.COMPRADATA.FechaFin).toLocaleDateString()})}},{key:"getUser",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/users/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status?0!==a.data.length?this.setState({user:a.data}):this.setState({estado:!1}):a.status,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getentregables",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/listEntregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({entregables:a.data}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getTerminos",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/listreferenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({TerminosReferencia:a.data}),0===this.state.datos.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getPresupuesto",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/ListdetallePresupuesto/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({presupuesto:a.data}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"lispresupuestoAfect",value:function(){return 0!==this.props.presupuestoAfect.data.length?n.a.createElement(ua,{datos:this.props.presupuestoAfect}):"Error no tenemos presupuesto no se puede continuar..."}},{key:"listData",value:function(){return 0!==this.state.presupuesto.data.length?n.a.createElement(Bt,{datos:this.state.presupuesto}):"Error no tenemos presupuesto no se puede continuar..."}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(Qt.a,null,n.a.createElement("p",null,"1. Datos Solicitante")),n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement("p",null,n.a.createElement("b",null,"Fecha de solicitud:   "),this.state.fechaSolicitud),n.a.createElement("p",null,n.a.createElement("b",null,"Solicitante :")," ",this.state.user.name,"   ",this.state.user.apellido),n.a.createElement("p",null,n.a.createElement("b",null,"Cargo:")," ",this.state.user.cargo),n.a.createElement("p",null,n.a.createElement("b",null,"Direcci\xf2n :")," ",this.state.user.direccion)),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement("p",null,n.a.createElement("b",null,"Identificaci\xf2n:")," ",this.state.user.documento),n.a.createElement("p",null,n.a.createElement("b",null,"E-mail:")," ",this.state.user.email))),n.a.createElement(Qt.a,null,n.a.createElement("p",null,"2. Datos General de compra")),n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:12},n.a.createElement("p",null,n.a.createElement("b",null,"Bien o Servicio a Contratar:")," ",this.props.COMPRADATA.NombreCompra),n.a.createElement("p",null,n.a.createElement("b",null,"Objeto:")," ",this.props.COMPRADATA.objetivo)),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement("p",null,n.a.createElement("b",null,"Fecha de Inicio:")," ",this.state.FechaInicio),n.a.createElement("p",null,n.a.createElement("b",null,"Fecha de Fin:")," ",this.state.FechaFin)),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement("p",null,n.a.createElement("b",null,"Plazo de ejecuci\xf2n:")," ",this.state.FechaInicio-this.state.FechaFin),n.a.createElement("p",null,n.a.createElement("b",null,"D\xecas para el Inicio:")," ",this.props.COMPRADATA.FechaInicio))),3===this.props.COMPRADATA.EstadoAction?n.a.createElement("div",null," ",n.a.createElement(Qt.a,null,n.a.createElement("p",null,"3. Presupuesto afectado.")," "),this.lispresupuestoAfect()," ",n.a.createElement("br",null)):n.a.createElement("div",null,n.a.createElement(Qt.a,null,n.a.createElement("p",null,"3. Presupuesto Disponible.")," "),this.listData()," ",n.a.createElement("br",null)),n.a.createElement(Qt.a,null,n.a.createElement("p",null,"4. Terminos de referencia")),n.a.createElement(ea,{datos:this.state.TerminosReferencia,action:!1}),n.a.createElement(Qt.a,null,n.a.createElement("p",null,"5. Entragables")),n.a.createElement(ra,{datos:this.state.entregables}))}}]),t}(n.a.Component),ma=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(pa),da=a(39),ha=a.n(da);function fa(e){var t=e.children;return n.a.createElement("div",{style:{padding:24}},t)}var va={cont:{display:"flex",justifyContent:"center"}};var ba=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleReset=function(){a.setState({activeStep:0})},a.compra=function(e){a.setState(function(t){return{compra:e}})},a.useradd=function(e){a.setState(function(t){return{user:e}}),a.handleNext()},a.CanNext=function(e){a.setState({canNext:e})},a.btns=function(e){a.setState({stateBtn:e})},a.msgbn=function(e){a.setState({open:!0,msgMo:e})},a.Publicar=function(){a.getPublicar()},a.state={activeStep:0,compra:{},user:{id:0},open:!1,msgMo:"",peridoPresupuesto:{},Tipo:"success",error:{},canNext:!0,stateBtn:!0},a.handleNext=a.handleNext.bind(Object(Ae.a)(Object(Ae.a)(a))),a.handleBack=a.handleBack.bind(Object(Ae.a)(Object(Ae.a)(a))),a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.ValidarPresupuesto()}},{key:"getStepContent",value:function(e){switch(e){case 0:return n.a.createElement(Tt,{btns:this.btns,USER:this.useradd,userData:this.state.user,compra:this.state.compra,compraData:this.compra});case 1:return this.state.user.id?n.a.createElement(zt,{handleBack:this.handleBack,handleNext:this.handleNext,compra:this.state.compra,compraData:this.compra,msgbn:this.msgbn,btns:this.btns,user:this.state.user}):"Error se requiere un persona que rea responsable de esta compra";case 2:return n.a.createElement(Zt,{periodo:this.state.peridoPresupuesto,compra:this.state.compra,msgbn:this.msgbn,CanNext:this.CanNext,btns:this.btns});case 3:return n.a.createElement(aa,{compra:this.state.compra,msgbn:this.msgbn,CanNext:this.CanNext,btns:this.btns});case 4:return n.a.createElement(oa,{compra:this.state.compra,msgbn:this.msgbn,CanNext:this.CanNext,btns:this.btns});default:return n.a.createElement(Ze,null)}}}]),Object(S.a)(t,[{key:"ValidarPresupuesto",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/Presupuesto",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:t=e.sent,this.setState({peridoPresupuesto:t.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response),401===e.t0.response.status&&this.setState({error:{error:!0,menssage:e.t0.response.data.errors}});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getPublicar",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/publicar/"+this.state.compra.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:this.Redirigir(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0.response.data.message);case 9:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"Redirigir",value:function(){this.props.history.push("/propuesta/"+this.state.compra.id)}},{key:"render",value:function(){var e=this.props.classes,t=["Datos Solicitante ","Datos generales de compra","Presupuesto","Terminos de referencia.","Entregables"],a=this.state.activeStep;return this.state.peridoPresupuesto.id?n.a.createElement(fa,null,n.a.createElement(Ne.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:6e3,onClose:this.handleClose},n.a.createElement(Ze,{onClose:this.handleClose,variant:this.state.Tipo,message:this.state.msgMo})),n.a.createElement("p",null,"Presupuesto: ",this.state.peridoPresupuesto.nombre),n.a.createElement(xe.a,{activeStep:a,alternativeLabel:!0},t.map(function(e){return n.a.createElement(Fe.a,{key:e},n.a.createElement(Pe.a,null,e))})),n.a.createElement("div",{className:e.toolbar},this.state.activeStep===t.length?n.a.createElement("div",null,n.a.createElement(P.a,{className:e.instructions}," Por favor revisar si todo se encuentra Bien de lo contrario corregir."),n.a.createElement(ma,{COMPRADATA:this.state.compra}),n.a.createElement("div",{className:e.cont},n.a.createElement(te.a,{onClick:this.handleReset},"Volver"),n.a.createElement(te.a,{variant:"contained",color:"primary",onClick:this.Publicar},"Confirmar"))):!0===this.state.stateBtn?n.a.createElement("div",null,n.a.createElement("div",null,this.getStepContent(a)),n.a.createElement("div",{className:e.cont},n.a.createElement(te.a,{disabled:0===a,onClick:this.handleBack,className:e.backButton},"Back"),n.a.createElement(te.a,{disabled:!this.state.canNext,variant:"contained",color:"primary",onClick:this.handleNext},a===t.length-1?"Finish":"Siguiente"))):n.a.createElement("div",null,this.getStepContent(a)))):this.state.error.error?n.a.createElement("div",{style:va.cont},this.state.error.menssage):n.a.createElement("div",{style:va.cont}," ",n.a.createElement(ha.a,{className:e.progress,color:"secondary"}))}}]),t}(n.a.Component),Ea=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{width:"98%"},cont:{display:"flex",justifyContent:"center"},content:{flexGrow:1,padding:3*e.spacing.unit},toolbar:e.mixins.toolbar}})(ba)),ga=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"acccion",value:function(){switch(this.props.estado){case 0:return n.a.createElement("p",null,"Registrada");case 1:return n.a.createElement("p",null,"Anulada");case 2:return n.a.createElement("p",null,"Resive propuestas");case 3:return n.a.createElement("p",null,"Aprobada");case 4:return n.a.createElement("p",null,"Esperando Aprobaci\xf2n- cerrada ");default:return n.a.createElement("p",null,"Error")}}},{key:"render",value:function(){return this.acccion()}}]),t}(n.a.Component),ya=a(71),Sa=a.n(ya),Ca={tableWrapper:{overflowX:"auto"}};var ka=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handlePageChange=function(e){a.setState({activePage:e}),a.getComprasFull(e)},a.state={value:0,user:{},dataCompra:{data:[]},activePage:1,totalItemsCount:0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getComprasFull(1)}},{key:"getComprasPersonTipe",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t,a){var r;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/compras/"+t+"/"+a,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:r=e.sent,this.setState({dataCompra:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getComprasFull",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/compras/?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:a=e.sent,this.setState({dataCompra:a.data,totalItemsCount:a.data.total}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"compraLink",value:function(e){this.props.history.push("/propuesta/"+e)}},{key:"getMapData",value:function(){var e=this;return this.state.dataCompra.data.length>0?this.state.dataCompra.data.map(function(t){return n.a.createElement(pt.a,{key:t.id},n.a.createElement(st.a,null," ",t.id," "),n.a.createElement(st.a,null," ",t.NombreCompra," "),n.a.createElement(st.a,null,t.objetivo),n.a.createElement(st.a,null,t.updated_at),n.a.createElement(st.a,null,n.a.createElement(ga,{estado:t.EstadoAction})),n.a.createElement(st.a,null,n.a.createElement(dt.a,{variant:"contained",color:"primary",onClick:function(){return e.compraLink(t.id)}},"visibility"),"    "))}):""}},{key:"setData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement("div",{style:Ca.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"N\xba Compra"),n.a.createElement(st.a,null,"Nombre Compra"),n.a.createElement(st.a,null,"Objetivo"),n.a.createElement(st.a,null,"Fecha de Creaci\xf2n"),n.a.createElement(st.a,null,"Estado"),n.a.createElement(st.a,null,"Acciones"))),n.a.createElement(ot.a,null,this.getMapData())),this.state.dataCompra.data.length>0?n.a.createElement(Sa.a,{activePage:this.state.activePage,itemsCountPerPage:10,totalItemsCount:this.state.totalItemsCount,pageRangeDisplayed:5,onChange:this.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(n.a.Component),Oa=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(ka),Aa=a(252),ja=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"chart"},n.a.createElement(Aa.a,{data:this.props.chartData,options:{title:{display:this.props.displayTitle,text:"Presupuesto "+this.props.location,fontSize:25},legend:{display:this.props.displayLegend,position:this.props.legendPosition}}}))}}]),t}(r.Component);ja.defaultProps={displayTitle:!0,displayLegend:!1,legendPosition:"right",location:"Dividendo por colombia"};var xa=ja,Da={cont:{display:"flex",justifyContent:"center"}};var Fa=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={chartData:{},cluster_id:"",componente_id:"",operacion_id:"",proyecto_id:"",componentes:[],operacions:[],Cluster:[],Proyectos:[],error:{},mostrar:!1,message:!1,msg:"",canSubmit:!0,action:!0,labels:["Presupuesto","Comprometido","gasto","Disponible"],datasets:[]},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){this.getcluster(),this.getComponente(),this.getOperacion(),this.getProyectos()}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getcluster",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/clusters/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Cluster:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getComponente",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/componentes/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({componentes:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getOperacion",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/operacions/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({operacions:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"listCluster",value:function(){return this.state.Cluster.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listComponente",value:function(){return this.state.componentes.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listOperation",value:function(){return this.state.operacions.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listProyecto",value:function(){return this.state.Proyectos.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"getProyectos",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/proyectos/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Proyectos:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"data",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({action:!1}),e.prev=1,e.next=4,fe()({url:ve.endpoint+"/presupuestoData/?cluster_id="+this.state.cluster_id+"&componente_id="+this.state.componente_id+"&operacion_id="+this.state.operacion_id+"&proyecto_id="+this.state.proyecto_id+"&periodo_id=1",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 4:200===(t=e.sent).status&&this.setState({titulo:"Dividendo por colombia",labels:["Presupuesto  "+t.data.TotalPresupuesto,"Comprometido "+t.data.comprometido,"Gasto "+t.data.gasto,"Disponible "+t.data.disponible],datasets:[{label:"Dinero",data:[t.data.TotalPresupuesto,t.data.comprometido,t.data.gasto,t.data.disponible],backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(255, 99, 132, 0.6)","rgba(255, 206, 86, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 99, 132, 0.6)"]}]}),this.setState({action:!0}),200===t.status?this.setState({mostrar:!0,message:!1,msg:""}):203===t.status&&this.setState({mostrar:!1,message:!0,msg:t.data.Error}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),this.setState({action:!0,mostrar:!1}),this.getError(e.t0.response);case 14:case"end":return e.stop()}},e,this,[[1,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},this.state.message?n.a.createElement("p",{style:{color:"red"}}," ",this.state.msg):""),n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(Gt.a,{htmlFor:"Cluster"},this.state.error.cluster?this.state.error.cluster[0]:"Cluster"),n.a.createElement($t.a,{error:!!this.state.error.cluster,fullWidth:!0,value:this.state.cluster_id,onChange:function(t){return e.syncField(t,"cluster_id")},inputProps:{name:"Cluster",id:"Cluster"}},this.listCluster()),n.a.createElement(Gt.a,{htmlFor:"Componente"},this.state.error.componente?this.state.error.componente[0]:"componente"),n.a.createElement($t.a,{error:!!this.state.error.componente,fullWidth:!0,value:this.state.componente_id,onChange:function(t){return e.syncField(t,"componente_id")},inputProps:{name:"Componente",id:"Componente"}},this.listComponente())),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(Gt.a,{htmlFor:"operacion"},this.state.error.operacion?this.state.error.operacion[0]:"Centro de operaci\xf2n"),n.a.createElement($t.a,{error:!!this.state.error.operacion,fullWidth:!0,value:this.state.operacion_id,onChange:function(t){return e.syncField(t,"operacion_id")},inputProps:{name:"operacion",id:"operacion"}},this.listOperation()),n.a.createElement(Gt.a,{htmlFor:"proyecto"},this.state.error.proyecto?this.state.error.proyecto[0]:"proyecto"),n.a.createElement($t.a,{error:!!this.state.error.proyecto,fullWidth:!0,value:this.state.proyecto_id,onChange:function(t){return e.syncField(t,"proyecto_id")},inputProps:{name:"proyecto",id:"proyecto"}},this.listProyecto()))),n.a.createElement(te.a,{variant:"contained",disabled:!this.state.canSubmit,color:"primary",onClick:function(t){return e.data()}}," Generar reporte "),this.state.mostrar?this.state.action?n.a.createElement(xa,{chartData:{labels:this.state.labels,datasets:this.state.datasets},location:this.state.titulo,legendPosition:"bottom"}):n.a.createElement("div",{style:Da.cont}," ",n.a.createElement(ha.a,{color:"secondary"})):"")}}]),t}(n.a.Component),wa=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Fa),Pa=function(e){function t(){var e;return Object(y.a)(this,t),(e=Object(C.a)(this,Object(k.a)(t).call(this))).state={},e}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"App-header"},n.a.createElement("h2",null,"Home ")),n.a.createElement(wa,null))}}]),t}(n.a.Component),_a=a(137),Na=a.n(_a),Ia=a(254),Ta=a.n(Ia),Ra=a(49),Ma=a.n(Ra),za=a(160),La=a.n(za),Wa={tableWrapper:{overflowX:"auto"}},Ua=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={value:0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.user.data.length>0?this.props.user.data.map(function(t){return n.a.createElement(pt.a,{key:t.id},n.a.createElement(st.a,null," ",t.name," "),n.a.createElement(st.a,null,t.apellido),n.a.createElement(st.a,null,t.documento),n.a.createElement(st.a,null,"  ",t.email),n.a.createElement(st.a,null,"  ",t.cargo),n.a.createElement(st.a,null,"  ",t.direccion),n.a.createElement(st.a,null,"  ",t.rol),n.a.createElement(st.a,null," ",n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")))}):""}},{key:"setData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement("div",{style:Wa.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Nombre"),n.a.createElement(st.a,null,"Apellido"),n.a.createElement(st.a,null,"Documento"),n.a.createElement(st.a,null,"Email"),n.a.createElement(st.a,null,"Cargo"),n.a.createElement(st.a,null,"Direccion"),n.a.createElement(st.a,null,"Rol"),n.a.createElement(st.a,null,"Acciones"))),n.a.createElement(ot.a,null,this.getMapData())),this.props.user.data.length>0?n.a.createElement(Sa.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.user.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(n.a.Component);var Ba=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/users",data:{name:a.state.name,apellido:a.state.apellido,email:a.state.email,rol:a.state.value,cargo:a.state.cargo,direccion:a.state.direccion,documento:a.state.documento},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.handleChange=function(e){a.setState({value:e.target.value})},a.handlePageChange=function(e){a.setState({activePage:e}),a.getdataUser(e)},a.modificar=function(e){a.clear(),a.getUser(e)},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/users/"+a.state.id,data:{name:a.state.name,apellido:a.state.apellido,email:a.state.email,rol:a.state.value,cargo:a.state.cargo,direccion:a.state.direccion,documento:a.state.documento},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={value:"User",name:"",apellido:"",email:"",rol:"",cargo:"",direccion:"",documento:"",error:{},activePage:1,user:{data:{}},msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getdataUser(1)}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getdataUser",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/userData?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({user:a.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/users/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({error:{},action:!1,id:a.data.id,name:a.data.name,apellido:a.data.apellido,email:a.data.email,value:a.data.rol,cargo:a.data.cargo,direccion:a.data.direccion,documento:a.data.documento}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,canSubmit:!0,value:"User",name:"",apellido:"",email:"",rol:"",cargo:"",direccion:"",documento:"",error:{}}),this.getdataUser(1)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.name,label:this.state.error.name?this.state.error.name[0]:"Nombre",value:this.state.name,placeholder:"Nombre Empresa",ref:"NombreEmpresa",name:"NombreEmpresa",onChange:function(t){return e.syncField(t,"name")},fullWidth:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.apellido,label:this.state.error.apellido?this.state.error.apellido[0]:"Apellido",placeholder:"Apellido",value:this.state.apellido,ref:"apellido",name:"apellido",onChange:function(t){return e.syncField(t,"apellido")},fullWidth:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.email,label:this.state.error.email?this.state.error.email[0]:"Email",placeholder:"Email example@dividendoporcolombia.org",value:this.state.email,ref:"email",name:"email",onChange:function(t){return e.syncField(t,"email")},fullWidth:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:12,sm:4},n.a.createElement(de.a,{error:!!this.state.error.documento,label:this.state.error.documento?this.state.error.documento[0]:"Documento",value:this.state.documento,placeholder:"Documento",ref:"documento",name:"documento",onChange:function(t){return e.syncField(t,"documento")},fullWidth:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.cargo,label:this.state.error.cargo?this.state.error.cargo[0]:"Cargo",placeholder:"cargo",value:this.state.cargo,ref:"direccion",name:"direccion",onChange:function(t){return e.syncField(t,"cargo")},fullWidth:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.direccion,label:this.state.error.direccion?this.state.error.direccion[0]:"Direcci\xf2n",placeholder:"Direccion",value:this.state.direccion,ref:"ciudad",name:"ciudad",onChange:function(t){return e.syncField(t,"direccion")},fullWidth:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:12,sm:2},n.a.createElement(La.a,{component:"legend"},"Rol"),n.a.createElement(Ta.a,{value:this.state.value,onChange:this.handleChange},n.a.createElement(Ma.a,{value:"User",control:n.a.createElement(Na.a,{color:"primary"}),label:"User",labelPlacement:"start"}),n.a.createElement(Ma.a,{value:"Colaborador",control:n.a.createElement(Na.a,{color:"primary"}),label:"Colaborador",labelPlacement:"start"}),n.a.createElement(Ma.a,{value:"Super-Admin",control:n.a.createElement(Na.a,{color:"primary"}),label:"Super-Admin",labelPlacement:"start"})))),this.state.action?n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),n.a.createElement(Ua,{user:this.state.user,handlePageChange:this.handlePageChange,activePage:this.state.activePage,modificar:this.modificar}))}}]),t}(n.a.Component),Va=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Ba),Ga=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return n.a.createElement(Va,null)}}]),t}(n.a.Component),Xa=a(663);var $a=Object(c.b)(function(e){return null!==e.userAcceso&&""!==e.userAcceso?{isAuthenticated:!0}:{isAuthenticated:!1}})(function(e){var t=e.component,a=e.isAuthenticated,r=Object(Y.a)(e,["component","isAuthenticated"]);return n.a.createElement(le.a,Object.assign({},r,{render:function(e){return a?n.a.createElement(t,e):n.a.createElement(Xa.a,{to:{pathname:"/login",state:{from:e.location}}})}}))});var qa=Object(c.b)(function(e){return null!==e.userAcceso&&""!==e.userAcceso&&"Super-Admin"===oe()(e.userAcceso).rol?{isAuthenticated:!0}:{isAuthenticated:!1}})(function(e){var t=e.component,a=e.isAuthenticated,r=Object(Y.a)(e,["component","isAuthenticated"]);return n.a.createElement(le.a,Object.assign({},r,{render:function(e){return a?n.a.createElement(t,e):n.a.createElement(Xa.a,{to:{pathname:"/home",state:{from:e.location}}})}}))}),Ja={tableWrapper:{overflowX:"auto"}},Ha=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={value:0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos.data.length>0?this.props.datos.data.map(function(t){return n.a.createElement(pt.a,{key:t.id},n.a.createElement(st.a,null," ",t.nombre," "),n.a.createElement(st.a,null,t.representate),n.a.createElement(st.a,null,"  ",t.nit),n.a.createElement(st.a,null,t.telefono),n.a.createElement(st.a,null,"  ",t.email),n.a.createElement(st.a,null,"  ",t.direccion),n.a.createElement(st.a,null,"  ",t.ciudad),n.a.createElement(st.a,null,"  ",n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),"  "))}):""}},{key:"setData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement("div",{style:Ja.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Nombre"),n.a.createElement(st.a,null,"representate"),n.a.createElement(st.a,null,"NIT"),n.a.createElement(st.a,null,"telefono"),n.a.createElement(st.a,null,"Email"),n.a.createElement(st.a,null,"Direccion"),n.a.createElement(st.a,null,"Ciudad"),n.a.createElement(st.a,null,"Acciones"))),n.a.createElement(ot.a,null,this.getMapData())),this.props.datos.data.length>0?n.a.createElement(Sa.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(n.a.Component);var Ka=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/empresas",data:{nombre:a.state.nombre,nit:a.state.nit,representate:a.state.representate,email:a.state.email,direccion:a.state.direccion,telefono:a.state.telefono,ciudad:a.state.ciudad},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){switch(a.clear(),a.props.father){case"propuesta":a.props.provedor(e.data),a.props.handleNext();break;default:a.props.handleNext()}}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.handlePageChange=function(e){a.setState({activePage:e}),a.getdataProvedor(e)},a.modificar=function(e){a.getprovedor(e)},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/empresas/"+a.state.id,data:{nombre:a.state.nombre,nit:a.state.nit,representate:a.state.representate,email:a.state.email,direccion:a.state.direccion,telefono:a.state.telefono,ciudad:a.state.ciudad},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={nombre:"",representate:"",email:"",telefono:"",nit:"",direccion:"",ciudad:"",error:{},provedores:{data:{}},activePage:1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getdataProvedor(1)}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"clear",value:function(){this.setState({canSubmit:!0,action:!0,nombre:"",nit:"",representate:"",email:"",direccion:"",telefono:"",ciudad:""}),this.getdataProvedor(1)}},{key:"getdataProvedor",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/empresas?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({provedores:a.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getprovedor",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/empresas/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({error:{},action:!1,id:a.data.id,nombre:a.data.nombre,nit:a.data.nit,representate:a.data.representate,email:a.data.email,direccion:a.data.direccion,telefono:a.data.telefono,ciudad:a.data.ciudad}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre Empresa",value:this.state.nombre,placeholder:"Nombre Empresa",ref:"NombreEmpresa",name:"NombreEmpresa",onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.representate,label:this.state.error.representate?this.state.error.representate[0]:"Representante Legal",placeholder:"Representante Legal",value:this.state.representate,ref:"representate",name:"representate",onChange:function(t){return e.syncField(t,"representate")},fullWidth:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.telefono,label:this.state.error.telefono?this.state.error.telefono[0]:"Telefono",placeholder:"Telefono",value:this.state.telefono,ref:"telefono",name:"telefono",onChange:function(t){return e.syncField(t,"telefono")},fullWidth:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.email,label:this.state.error.email?this.state.error.email[0]:"Email contacto",placeholder:"Email contacto",value:this.state.email,ref:"email",name:"email",onChange:function(t){return e.syncField(t,"email")},fullWidth:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.nit,label:this.state.error.nit?this.state.error.nit[0]:"NIT",value:this.state.nit,placeholder:"NIT",ref:"nit",name:"nit",onChange:function(t){return e.syncField(t,"nit")},fullWidth:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.direccion,label:this.state.error.direccion?this.state.error.direccion[0]:"Direcci\xf3n",placeholder:"Direcci\xf3n",value:this.state.direccion,ref:"direccion",name:"direccion",onChange:function(t){return e.syncField(t,"direccion")},fullWidth:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.ciudad,label:this.state.error.ciudad?this.state.error.ciudad[0]:"Ciudad",placeholder:"Ciudad",value:this.state.ciudad,ref:"ciudad",name:"ciudad",onChange:function(t){return e.syncField(t,"ciudad")},fullWidth:!0,margin:"normal"}))),this.state.action?n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.props.father?"":n.a.createElement(Ha,{datos:this.state.provedores,handlePageChange:this.handlePageChange,activePage:this.state.activePage,modificar:this.modificar}))}}]),t}(n.a.Component),Qa=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Ka),Ya=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return n.a.createElement(Qa,null)}}]),t}(n.a.Component),Za=a(90),er=a.n(Za),tr=a(91),ar=a.n(tr),rr=a(57),nr=a.n(rr),or=a(256),ir=a.n(or),sr=a(255),cr=a.n(sr),lr={avatar:{backgroundColor:xt.a[100],color:xt.a[600]}},ur=function(e){function t(){var e,a;Object(y.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(){a.props.onClose()},a.actionRegister1=function(){a.props.actionRegister()},a.handleListItemClick=function(e){a.props.handleSelect(e)},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"mapdata",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return n.a.createElement(q.a,{button:!0,onClick:function(){return e.handleListItemClick(t)},key:t.id},n.a.createElement(gt.a,null,n.a.createElement(bt.a,null,n.a.createElement("i",{class:"material-icons"}," account_balance "))),n.a.createElement(St.a,{primary:t.nombre+" - "+t.nit}))}):""}},{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.onClose,t.handleSelect,t.selectedValue,Object(Y.a)(t,["classes","onClose","handleSelect","selectedValue"]));return n.a.createElement(At.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},a),n.a.createElement(kt.a,{id:"simple-dialog-title"},"Seleccione una empresa"),n.a.createElement("div",null,n.a.createElement(V.a,null,this.mapdata(),n.a.createElement(q.a,null,n.a.createElement(gt.a,{button:!0,onClick:function(){return e.actionRegister1()}},n.a.createElement(bt.a,null,n.a.createElement(cr.a,null))),n.a.createElement(te.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleClose()}},"Cancelar")))))}}]),t}(n.a.Component),pr=Object(A.withStyles)(lr)(ur);var mr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleSelect=function(e){a.setState({open:!1}),a.props.provedor(e),a.props.handleNext()},a.handleClose=function(e){a.setState({open:!1})},a.onSubmit=function(e){""!==a.state.nit?a.BuscarNit():a.FilterNombre()},a.BuscarNit=function(e){a.setState({canSubmit:!1}),fe()({method:"get",timeout:8e3,url:ve.endpoint+"/empresa/search/"+a.state.nit,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?(a.setState({error:{nit:e.data.error}}),a.clear()):(a.props.provedor(e.data),a.props.handleNext())}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.FilterNombre=function(e){a.setState({canSubmit:!1}),fe()({method:"get",timeout:8e3,url:ve.endpoint+"/empresa/search/?nombre="+a.state.nombre,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){console.log(e.data.length),0===e.data.length?(a.setState({error:{nombre:["No encontramos resultados"]}}),a.clear()):(a.setState({canSubmit:!0,empresas:e.data}),a.handleClickOpen())}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.actionRegister=function(e){a.setState({open:!1}),a.props.handleChangeasignar()},a.state={nit:"",nombre:"",empresas:[],msg:{estado:!1,msg:"",tipo:""},open:!1,error:{},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"clear",value:function(){this.setState({canSubmit:!0,nombre:"",nit:""})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre Empresa ",value:this.state.nombre,placeholder:"Busca por nombre de empresa",ref:"nombre",name:"nombre",onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.nit,label:this.state.error.nit?this.state.error.nit[0]:"NIT",value:this.state.nit,placeholder:"Busca por Nit",ref:"nit",name:"nit",onChange:function(t){return e.syncField(t,"nit")},fullWidth:!0,type:"number",margin:"normal"}))),n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"Buscar "),n.a.createElement(pr,{actionRegister:this.actionRegister,selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,handleSelect:this.handleSelect,datos:this.state.empresas}))}}]),t}(n.a.Component),dr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(mr);function hr(e){var t=e.children;return n.a.createElement("div",{style:{padding:24}},t)}var fr=function(e){function t(){var e,a;Object(y.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).state={value:0},a.handleChangeasignar=function(){a.setState({value:1})},a.handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.siguienteUpdate(!1)}},{key:"render",value:function(){var e=this.props.theme;return n.a.createElement("div",null,n.a.createElement(pe.a,null,n.a.createElement(ar.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},n.a.createElement(nr.a,{label:"Buscar"}),n.a.createElement(nr.a,{label:"Registrar"}))),n.a.createElement(er.a,{axis:"rtl"===e.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},n.a.createElement(hr,null,"Buscar Provedor",n.a.createElement(dr,{handleChangeasignar:this.handleChangeasignar,father:"propuesta",handleNext:this.props.handleNext,provedor:this.props.provedor})),n.a.createElement(hr,null," Registrar Provedor",n.a.createElement(Qa,{father:"propuesta",handleNext:this.props.handleNext,provedor:this.props.provedor}))))}}]),t}(n.a.Component),vr=Object(A.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}},{withTheme:!0})(fr),br=a(56),Er=a.n(br);var gr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/detallereferencetermclientes",data:{comentario:a.state.comentario,cumple:a.state.estado?1:0,empresa_id:a.props.provedor.id,referenceterm_id:a.props.datos.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/detallereferencetermclientes/"+a.state.id,data:{comentario:a.state.comentario,cumple:a.state.estado?1:0},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/detallereferencetermclientes/"+this.props.provedor.id+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({action:!1,id:t.data.id,comentario:t.data.comentario,estado:t.data.cumple}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"render",value:function(){var e=this;return n.a.createElement(pt.a,null,n.a.createElement(st.a,null," ",this.props.datos.Especificacion),n.a.createElement(st.a,null," ",this.props.datos.observaciones),n.a.createElement(st.a,null," ",this.props.datos.cantidad),n.a.createElement(st.a,null,"  ",n.a.createElement(de.a,{label:"Observaciones",value:this.state.comentario,placeholder:"Observaciones",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"comentario")},fullWidth:!0,margin:"normal",multiline:!0})),n.a.createElement(st.a,null,n.a.createElement(Gt.a,{htmlFor:"estado"},this.state.estado?"SI":"NO"," "),n.a.createElement(Ma.a,{control:n.a.createElement(Er.a,{checked:this.state.estado,onChange:function(t){return e.updateStado(t,"estado")},value:"activo"})})),this.state.canSubmit?this.state.action?n.a.createElement(dt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"done_all"):n.a.createElement(dt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar},"done_all"):n.a.createElement(ha.a,{color:"secondary"}))}}]),t}(n.a.Component),yr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(gr);var Sr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.idEmpresa)}},{key:"componentWillReceiveProps",value:function(e){this.getData(e.idEmpresa)}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/detallereferencetermclientes/"+t+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?this.setState({action:!1,id:a.data.id,comentario:a.data.comentario,estado:a.data.cumple}):this.setState({comentario:"",estado:!1}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"render",value:function(){return n.a.createElement(pt.a,null,n.a.createElement(st.a,null," ",this.props.datos.Especificacion),n.a.createElement(st.a,null," ",this.props.datos.observaciones),n.a.createElement(st.a,null," ",this.props.datos.cantidad),n.a.createElement(st.a,null," ",this.state.comentario," "),n.a.createElement(st.a,null," ",this.state.estado?"SI":"NO"," "))}}]),t}(n.a.Component),Cr=Object(c.b)(function(e){return{userAcceso:e.userAcceso,idEmpresa:e.propuesta.idEmpresa}})(Sr);var kr={cont:{display:"flex",justifyContent:"center"},tableWrapper:{overflowX:"auto"}},Or=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={datos:[],action:!0,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){null!=this.props.idCompra&&this.getData(this.props.idCompra)}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a,r;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/listreferenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({datos:a.data}),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),r=JSON.parse(JSON.stringify(e.t0)),console.log(r);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"mapdata",value:function(){var e=this;return this.state.datos.length>0?this.props.form?this.state.datos.map(function(t,a){return n.a.createElement(yr,{key:a,provedor:e.props.provedor,datos:t})}):this.state.datos.map(function(t,a){return n.a.createElement(Cr,{key:a,provedor:e.props.provedor,datos:t})}):n.a.createElement("div",{style:kr.cont},"   ",n.a.createElement(ha.a,{color:"primary"}),"  ")}},{key:"listData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement("div",{style:kr.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Especificaci\xf2n "),n.a.createElement(st.a,null,"Observaciones "),n.a.createElement(st.a,{numeric:!0},"Cantidad"),n.a.createElement(st.a,null,"Observaciones"),n.a.createElement(st.a,null,"Cumple"))),n.a.createElement(ot.a,null,this.mapdata()))))}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"render",value:function(){return n.a.createElement("div",null,this.listData())}}]),t}(n.a.Component),Ar=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Or);var jr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/detalleentregablesclientes",data:{comentario:a.state.comentario,cumple:a.state.estado?1:0,empresa_id:a.props.provedor.id,entregable_id:a.props.datos.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/detalleentregablesclientes/"+a.state.id,data:{comentario:a.state.comentario,cumple:a.state.estado?1:0},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/entregables/"+this.props.provedor.id+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({action:!1,id:t.data.id,comentario:t.data.comentario,estado:t.data.cumple}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"render",value:function(){var e=this;return n.a.createElement(pt.a,null,n.a.createElement(st.a,null," ",this.props.datos.producto),n.a.createElement(st.a,null," ",this.props.datos.observaciones),n.a.createElement(st.a,null," ",this.props.datos.cantidad),n.a.createElement(st.a,null,"  ",n.a.createElement(de.a,{label:"Observaciones",value:this.state.comentario,placeholder:"Observaciones",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"comentario")},fullWidth:!0,margin:"normal",multiline:!0})),n.a.createElement(st.a,null,n.a.createElement(Gt.a,{htmlFor:"estado"},this.state.estado?"SI":"NO"," "),n.a.createElement(Ma.a,{control:n.a.createElement(Er.a,{checked:this.state.estado,onChange:function(t){return e.updateStado(t,"estado")},value:"activo"})})),this.state.canSubmit?this.state.action?n.a.createElement(dt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"done_all"):n.a.createElement(dt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar},"done_all"):n.a.createElement(ha.a,{color:"secondary"}))}}]),t}(n.a.Component),xr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(jr);var Dr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.idEmpresa)}},{key:"componentWillReceiveProps",value:function(e){this.getData(e.idEmpresa)}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/entregables/"+t+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?this.setState({action:!1,id:a.data.id,comentario:a.data.comentario,estado:a.data.cumple}):this.setState({comentario:"",estado:!1}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(pt.a,null,n.a.createElement(st.a,null," ",this.props.datos.producto),n.a.createElement(st.a,null," ",this.props.datos.observaciones),n.a.createElement(st.a,null," ",this.props.datos.cantidad),n.a.createElement(st.a,null," ",this.state.comentario," "),n.a.createElement(st.a,null," ",this.state.estado?"SI":"NO"))}}]),t}(n.a.Component),Fr=Object(c.b)(function(e){return{userAcceso:e.userAcceso,idEmpresa:e.propuesta.idEmpresa}})(Dr);var wr={cont:{display:"flex",justifyContent:"center"},tableWrapper:{overflowX:"auto"}},Pr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={datos:[],action:!0,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){null!=this.props.idCompra&&this.getData(this.props.idCompra)}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/listEntregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({datos:a.data}),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"mapdata",value:function(){var e=this;return this.state.datos.length>0?this.props.form?this.state.datos.map(function(t,a){return n.a.createElement(xr,{key:a,provedor:e.props.provedor,datos:t})}):this.state.datos.map(function(t,a){return n.a.createElement(Fr,{key:a,provedor:e.props.provedor,datos:t})}):n.a.createElement("div",{style:wr.cont}," ",n.a.createElement(ot.a,null," ",n.a.createElement(ha.a,{color:"primary"}))," ")}},{key:"listData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement("div",{style:wr.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Producto o servicio"),n.a.createElement(st.a,null,"Observaciones "),n.a.createElement(st.a,{numeric:!0},"Cantidad"),n.a.createElement(st.a,null,"Observaciones"),n.a.createElement(st.a,null,"Cumple"))),n.a.createElement(ot.a,null,this.mapdata()))))}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"render",value:function(){return n.a.createElement("div",null,this.listData())}}]),t}(n.a.Component),_r=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Pr);var Nr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"POST",url:ve.endpoint+"/proposals",data:{description:a.state.description,compra_id:a.props.compra.id,empresa_id:a.props.provedor.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.dataPropuesta(e.data),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),console.log("error")})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/proposals/"+a.state.id,data:{description:a.state.description},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.dataPropuesta(e.data),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),console.log("error")})},a.state={id:"",description:"",msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"componentDidMount",value:function(){this.getData(),this.props.updateSiguiente(!1)}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/propuesta/"+this.props.provedor.id+"/"+this.props.compra.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status?(this.setState({action:!1,id:t.data.id,description:t.data.description}),this.props.propuesta(t.data)):t.status,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({canSubmit:!0,id:"",description:""})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement("p",null,"A continuacion podra describir las observaciones del cliente para la propuesta que va ha presentar."),n.a.createElement(tt.a,{item:!0,xs:12,sm:12},n.a.createElement(de.a,{label:"Observaciones",value:this.state.description,placeholder:"Escribe las observaciones del provedor para esta compra",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"description")},fullWidth:!0,margin:"normal",multiline:!0,variant:"outlined"}))),n.a.createElement(te.a,{onClick:this.props.handleBack}," anterior "),this.state.action?n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "))}}]),t}(n.a.Component),Ir=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Nr);var Tr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/detallepoliticas",data:{comentarios:a.state.comentarios,acepta:a.state.estado?1:0,politica_id:a.props.politica.id,proposal_id:a.props.propuesta.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentarios:e.data.comentarios,estado:e.data.acepta})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/detallepoliticas/"+a.state.id,data:{comentarios:a.state.comentarios,acepta:a.state.estado?1:0},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentarios:e.data.comentarios,estado:e.data.acepta})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/politica/"+this.props.politica.id+"/"+this.props.propuesta.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({action:!1,id:t.data.id,comentarios:t.data.comentarios,estado:t.data.acepta}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:12},this.props.politica.pregunta),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{label:"Observaciones",value:this.state.comentarios,placeholder:"Observaciones",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"comentarios")},fullWidth:!0,margin:"normal",multiline:!0})),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(Gt.a,{htmlFor:"estado"},this.state.estado?"SI":"NO"," "),n.a.createElement(Ma.a,{control:n.a.createElement(Er.a,{checked:this.state.estado,onChange:function(t){return e.updateStado(t,"estado")},value:"activo"})}),this.state.canSubmit?this.state.action?n.a.createElement(dt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"done_all"):n.a.createElement(dt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar},"done_all"):n.a.createElement(ha.a,{color:"secondary"}))))}}]),t}(n.a.Component),Rr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Tr);var Mr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={id:"",comentarios:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getData(this.props.storePro)}},{key:"componentWillReceiveProps",value:function(e){this.getData(e.storePro)}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/politica/"+this.props.politica.id+"/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?this.setState({id:a.data.id,comentarios:a.data.comentarios,estado:a.data.acepta}):this.setState({comentarios:"",estado:!1}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:12},this.props.politica.pregunta),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement("b",null,"Observaciones:")," ",this.state.comentarios),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement("b",null,this.state.estado?"SI":"NO")))}}]),t}(n.a.Component),zr=Object(c.b)(function(e){return{userAcceso:e.userAcceso,storePro:e.propuesta.id}})(Mr);var Lr={cont:{display:"flex",justifyContent:"center"}},Wr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={politicas:[],msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"componentDidMount",value:function(){this.getPoliticas()}},{key:"getPoliticas",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/politicas",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({politicas:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"acciones",value:function(){return this.props.form?this.setListP():this.setListView()}},{key:"setListView",value:function(){var e=this;return this.state.politicas.length>0?this.state.politicas.map(function(t){return n.a.createElement("div",{key:t.id},n.a.createElement(zr,{politica:t,propuesta:e.props.propuesta})," ",n.a.createElement("br",null))}):n.a.createElement("div",{style:Lr.cont},n.a.createElement(ha.a,{color:"secondary"})," ")}},{key:"setListP",value:function(){var e=this;return this.state.politicas.length>0?this.state.politicas?this.state.politicas.map(function(t){return n.a.createElement("div",{key:t.id},n.a.createElement(Rr,{politica:t,propuesta:e.props.propuesta})," ",n.a.createElement("br",null))}):void 0:n.a.createElement("div",{style:Lr.cont},n.a.createElement(ha.a,{color:"secondary"})," ")}},{key:"render",value:function(){return n.a.createElement("div",null," ",this.acciones())}}]),t}(n.a.Component),Ur=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Wr);var Br=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).dataPropuesta=function(e){a.setState({propuesta:e,siguiente:!0})},a.handleNext=function(){3===a.state.activeStep?(a.props.handleNext(),a.props.propuesta(a.state.propuesta)):a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){0===a.state.activeStep?a.props.handleBack():a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleReset=function(){a.setState({activeStep:0})},a.updateSiguiente=function(e){a.setState({siguiente:e})},a.state={activeStep:0,propuesta:{},siguiente:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.siguienteUpdate(!1)}},{key:"action",value:function(){return this.props.compra.id>0?n.a.createElement(Ar,{form:!0,provedor:this.props.provedor,idCompra:this.props.compra.id}):"Estamos comprobando.."}},{key:"entregables",value:function(){return this.props.compra.id>0?n.a.createElement(_r,{form:!0,provedor:this.props.provedor,idCompra:this.props.compra.id}):"Estamos comprobando.."}},{key:"getStepContent",value:function(e){switch(e){case 0:return n.a.createElement(Ir,{updateSiguiente:this.updateSiguiente,handleBack:this.props.handleBack,handleNext:this.handleNext,dataPropuesta:this.dataPropuesta,compra:this.props.compra,provedor:this.props.provedor});case 1:return n.a.createElement(Ur,{form:!0,propuesta:this.state.propuesta});case 2:return this.action();case 3:return this.entregables();default:return"Uknown stepIndex"}}},{key:"render",value:function(){var e=this.props.classes,t=["Crear Propuesta."," Conflictos de Inter\xe9s","Terminos de referencia","Productos o entregables"],a=this.state.activeStep;return n.a.createElement("div",null,n.a.createElement(xe.a,{activeStep:a,alternativeLabel:!0},t.map(function(e){return n.a.createElement(Fe.a,{key:e},n.a.createElement(Pe.a,null,e))})),n.a.createElement("div",null,this.state.activeStep===t.length?n.a.createElement("div",null,n.a.createElement(P.a,{className:e.instructions},"All steps completed"),n.a.createElement(te.a,{onClick:this.handleReset},"Reset")):n.a.createElement("div",null,this.getStepContent(a),this.state.siguiente?n.a.createElement("div",{className:e.cont},n.a.createElement(te.a,{onClick:this.handleBack,className:e.backButton},"anterior"),n.a.createElement(te.a,{variant:"contained",color:"primary",onClick:this.handleNext},a===t.length-1?"Confirmar":"Siguiente")):"")))}}]),t}(n.a.Component),Vr=Object(A.withStyles)(function(e){return{root:{width:"90%"},backButton:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit},cont:{display:"flex",justifyContent:"center"}}})(Br),Gr={tableWrapper:{overflowX:"auto"}},Xr=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos.data.map(function(t){return n.a.createElement(pt.a,{key:t.id},n.a.createElement(st.a,{component:"th",scope:"row"},t.producto),n.a.createElement(st.a,null,t.description),n.a.createElement(st.a,null,t.cantidad),n.a.createElement(st.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.precioSinImpusto)),n.a.createElement(st.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.precioConImpuesto)),e.props.action?n.a.createElement(st.a,null,n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),n.a.createElement(Wt.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):n.a.createElement(st.a,null," "))})}},{key:"setData",value:function(){return this.props.datos.data.length>0?n.a.createElement("div",{style:Gr.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Servicio o producto"),n.a.createElement(st.a,null,"Descripci\xf3n"),n.a.createElement(st.a,null,"Cantidad"),n.a.createElement(st.a,null,"$ valor con valor sin impuesto"),n.a.createElement(st.a,null,"$ valor con valor con impuesto"),this.props.action?n.a.createElement(st.a,null,"Acciones"):n.a.createElement(st.a,null))),n.a.createElement(ot.a,null,this.getMapData(),n.a.createElement(pt.a,null,n.a.createElement(st.a,{rowSpan:3}),n.a.createElement(st.a,{colSpan:3},"Total propuesta"),n.a.createElement(st.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.total)))))):""}},{key:"render",value:function(){return n.a.createElement("div",null," ",this.setData()," ")}}]),t}(n.a.Component);function $r(e){var t=e.inputRef,a=e.onChange,r=Object(Y.a)(e,["inputRef","onChange"]);return n.a.createElement(Jt.a,Object.assign({},r,{getInputRef:t,onValueChange:function(e){a({target:{value:e.value}})},thousandSeparator:!0,prefix:"$"}))}var qr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getDetallePropuesta(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"POST",url:ve.endpoint+"/propuestaeconomicas",data:{producto:a.state.producto,cantidad:a.state.cantidad,description:a.state.description,precioSinImpusto:a.state.precioSinImpuesto,precioConImpuesto:a.state.precioConImpuesto,proposal_id:a.props.propuesta.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getDatos(a.props.propuesta.id),a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/propuestaeconomicas/"+a.state.id,data:{producto:a.state.producto,cantidad:a.state.cantidad,description:a.state.description,precioSinImpusto:a.state.precioSinImpuesto,precioConImpuesto:a.state.precioConImpuesto},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getDatos(a.props.propuesta.id),a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){fe()({method:"DELETE",url:ve.endpoint+"/propuestaeconomicas/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getDatos(a.props.propuesta.id)}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",producto:"",Cantidad:0,descripcion:"",precioSinImpuesto:"",PrecioComImpuesto:"",propuestaeconomica:{data:[]},error:{},msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"componentDidMount",value:function(){this.props.propuesta.id>0&&this.getDatos(this.props.propuesta.id)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getDatos",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/propuestaCliente/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&(a.data.data.length>0?this.props.siguienteUpdate(!0):this.props.siguienteUpdate(!1),this.setState({propuestaeconomica:a.data})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getDetallePropuesta",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/propuestaeconomicas/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,producto:a.data.producto,cantidad:a.data.cantidad,description:a.data.description,precioSinImpuesto:a.data.precioSinImpusto,precioConImpuesto:a.data.precioConImpuesto}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({canSubmit:!0,action:!0,id:"",producto:"",cantidad:"",description:"",precioSinImpuesto:"",precioConImpuesto:"",proposal_id:"",error:{}})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.producto,label:this.state.error.producto?this.state.error.producto[0]:"Producto",value:this.state.producto,placeholder:"Ingrese producto o servicio ",ref:"producto",name:"producto",onChange:function(t){return e.syncField(t,"producto")},fullWidth:!0,margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.description,label:this.state.error.description?this.state.error.description[0]:"Descripci\xf2n",value:this.state.description,placeholder:"Descripci\xf2n del producto",ref:"description",name:"description",onChange:function(t){return e.syncField(t,"description")},fullWidth:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.precioSinImpusto,label:this.state.error.precioSinImpusto?this.state.error.precioSinImpusto[0]:"Precio sin Iva",value:this.state.precioSinImpuesto,placeholder:"Precio sin impuestos ",ref:"precioSinImpuesto",name:"precioSinImpuesto",onChange:function(t){return e.syncField(t,"precioSinImpuesto")},fullWidth:!0,InputProps:{inputComponent:$r},margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.precioConImpuesto,label:this.state.error.precioConImpuesto?this.state.error.precioConImpuesto[0]:"Precio con Impuesto",value:this.state.precioConImpuesto,placeholder:"Precio com impuesto",ref:"precioConImpuesto",name:"precioConImpuesto",onChange:function(t){return e.syncField(t,"precioConImpuesto")},fullWidth:!0,InputProps:{inputComponent:$r},margin:"normal"}),n.a.createElement(de.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad",value:this.state.cantidad,placeholder:"Cantidad",ref:"cantidad",name:"cantidad",onChange:function(t){return e.syncField(t,"cantidad")},fullWidth:!0,margin:"normal"}))),this.state.action?n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),n.a.createElement(Xr,{modificar:this.modificar,onEliminar:this.onEliminar,datos:this.state.propuestaeconomica,action:!0}))}}]),t}(n.a.Component),Jr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(qr);var Hr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleReset=function(){a.setState({activeStep:0})},a.provedor=function(e){a.setState({provedor:e})},a.propuesta=function(e){a.setState({propuesta:e})},a.siguienteUpdate=function(e){a.setState({siguiente:e})},a.state={siguiente:!1,siguiente1:!1,activeStep:0,provedor:{},propuesta:{}},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getSteps",value:function(){return[0===this.state.activeStep?"Buscar Provedor":this.state.provedor.nombre+" NIT: "+this.state.provedor.nit,2!==this.state.activeStep?"Politicas y servicios.":"Radicado propuesta #"+this.state.propuesta.id,"Propuesta economica"]}},{key:"getStepContent",value:function(e){switch(e){case 0:return n.a.createElement(vr,{siguienteUpdate:this.siguienteUpdate,handleNext:this.handleNext,provedor:this.provedor});case 1:return n.a.createElement(Vr,{siguienteUpdate:this.siguienteUpdate,propuesta:this.propuesta,provedor:this.state.provedor,compra:this.props.compra,handleBack:this.handleBack,handleNext:this.handleNext});case 2:return n.a.createElement(Jr,{siguienteUpdate:this.siguienteUpdate,propuesta:this.state.propuesta});default:return"Unknown step"}}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.getSteps(),r=this.state.activeStep;return n.a.createElement("div",null,n.a.createElement(xe.a,{activeStep:r,orientation:"vertical"},a.map(function(o,i){return n.a.createElement(Fe.a,{key:o},n.a.createElement(Pe.a,null,o),n.a.createElement(ir.a,null,e.getStepContent(i),e.state.siguiente?n.a.createElement("div",{className:t.actionsContainer},n.a.createElement("div",null,n.a.createElement(te.a,{disabled:0===r,onClick:e.handleBack,className:t.button},"Volver a Propuesta"),n.a.createElement(te.a,{variant:"contained",color:"primary",onClick:e.handleReset,className:t.button},"Nuevo Registro"))):"",e.state.siguiente1?n.a.createElement("div",{className:t.actionsContainer},n.a.createElement("div",null,n.a.createElement(te.a,{disabled:0===r,onClick:e.handleBack,className:t.button},"Back"),n.a.createElement(te.a,{variant:"contained",color:"primary",onClick:e.handleNext,className:t.button},r===a.length-1?"Finish":"Next"))):""))})),r===a.length&&n.a.createElement(pe.a,{square:!0,elevation:0,className:t.resetContainer},n.a.createElement(P.a,null,"All steps completed - you're finished"),n.a.createElement(te.a,{onClick:this.handleReset,className:t.button},"Reset")))}}]),t}(n.a.Component),Kr=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{width:"90%"},button:{marginTop:e.spacing.unit,marginRight:e.spacing.unit},actionsContainer:{marginBottom:2*e.spacing.unit},resetContainer:{padding:3*e.spacing.unit}}})(Hr)),Qr=a(259),Yr=a.n(Qr),Zr=a(163),en=a.n(Zr),tn=a(164),an=a.n(tn),rn=a(258),nn=a.n(rn),on=a(257),sn=a.n(on),cn=a(162),ln=a.n(cn);var un=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"POST",url:ve.endpoint+"/detallepropuesta",data:{descripcion:a.state.description,idPropuesta:a.props.propuesta.id,idCompra:a.props.compra.id,user_id:a.state.user.user_id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Error:!0,MessageError:e.data.Error,canSubmit:!0,error:{}}):a.props.inicio()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={open:!1,Error:!1,MessageError:"",canSubmit:!0,aprobada:!1,error:{},user:{}},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.setState({user:oe()(this.props.userAcceso)})}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,"Super-Admin"===oe()(this.props.userAcceso).rol?n.a.createElement(te.a,{variant:"outlined",color:"primary",onClick:this.handleClickOpen},"Aprobar propuesta"):"",n.a.createElement(At.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(kt.a,{id:"alert-dialog-title"},"Aprobar Propuesta"),n.a.createElement(sn.a,null,n.a.createElement(ln.a,{id:"alert-dialog-description"},"A continuaci\xf2n puede aprobar esta propuesta pero tienes que llenar las observaciones."),this.state.Error?n.a.createElement(ln.a,{style:{color:"red"}},this.state.MessageError):"",n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:12},n.a.createElement(de.a,{error:!!this.state.error.descripcion,label:this.state.error.descripcion?this.state.error.descripcion[0]:"Observaciones",value:this.state.description,placeholder:"Escribe las observaci\xf2n de aprobaci\xf2n de esta propuesta.",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"description")},fullWidth:!0,margin:"normal",multiline:!0,variant:"outlined"})))),n.a.createElement(nn.a,null,n.a.createElement(te.a,{disabled:!this.state.canSubmit,onClick:this.onSubmit,color:"primary"},"Aprobar"),n.a.createElement(te.a,{disabled:!this.state.canSubmit,onClick:this.handleClose,color:"primary",autoFocus:!0},"Cancelar"))))}}]),t}(n.a.Component),pn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(un);var mn=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.updateStado=function(){a.setState({anchoState:!a.state.anchoState})},a.modificarInicio=function(){a.props.inicio()},a.state={anchoState:!0,open:!1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){}},{key:"action",value:function(){return this.props.propuesta.compra_id>0?n.a.createElement(Ar,{idCompra:this.props.propuesta.compra_id}):n.a.createElement(ha.a,{color:"secondary"})}},{key:"entregables",value:function(){return this.props.propuesta.compra_id>0?n.a.createElement(_r,{idCompra:this.props.propuesta.compra_id}):n.a.createElement(ha.a,{color:"secondary"})}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(Ma.a,{control:n.a.createElement(Er.a,{checked:this.state.anchoState,onChange:function(t){return e.updateStado(t,"rta")},value:"estado"})}),n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:this.state.anchoState?12:6},n.a.createElement(Qt.a,null,n.a.createElement("p",null,"1. Datos del proponente: ")),n.a.createElement("p",null,n.a.createElement("b",null,"Nombre Empresa:")," ",this.props.propuesta.nombre,"  ",n.a.createElement("b",null," NIT: ")," ",this.props.propuesta.nit),n.a.createElement("p",null,n.a.createElement("b",null,"Representante Legal:")," ",this.props.propuesta.representate,"  ",n.a.createElement("b",null," DI:")," ",this.props.propuesta.DI),n.a.createElement("p",null,n.a.createElement("b",null,"Tel\xe9fono: ")," ",this.props.propuesta.telefono,"  ",n.a.createElement("b",null," Direcci\xf3n:")," ",this.props.propuesta.direccion),n.a.createElement("p",null,n.a.createElement("b",null,"E-mail de contacto:")," ",this.props.propuesta.email,"  ",n.a.createElement("b",null," Ciudad: ")," ",this.props.propuesta.ciudad),n.a.createElement(Qt.a,null,n.a.createElement("p",null,"2. Conflictos de Inter\xe9s")),n.a.createElement(Ur,{propuesta:this.props.propuesta}),n.a.createElement("br",null),n.a.createElement(Qt.a,null,n.a.createElement("p",null,"3. Evaluaci\xf3n T\xe9cnica")),n.a.createElement(Qt.a,null,this.action()),n.a.createElement(Qt.a,null,n.a.createElement("p",null,"4. Productos"),this.entregables())),n.a.createElement(tt.a,{item:!0,xs:12,sm:this.state.anchoState?12:6},n.a.createElement(Qt.a,null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:9},n.a.createElement("p",null,"5. Propuesta Econ\xf3mica Presentada ")),n.a.createElement(tt.a,{item:!0,xs:3,sm:3},2===this.props.compra.EstadoAction||4===this.props.compra.EstadoAction?n.a.createElement(pn,{compra:this.props.compra,propuesta:this.props.propuesta,inicio:this.modificarInicio}):1===this.props.propuesta.estado?"Propuesta aceptada":"Esta propuesta no fue aceptada "))),n.a.createElement(Xr,{data:this.props.propuesta.id,datos:this.props.propuestaeconomica,action:!1}))))}}]),t}(r.Component),dn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(mn);var hn=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}}),a.getListPropuestaEconomica(a.state.data[a.state.activeStep+1])},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}}),a.getListPropuestaEconomica(a.state.data[a.state.activeStep-1])},a.modificarInicio=function(){a.componentDidMount(),a.props.inicio()},a.state={activeStep:0,data:[{}],estado:!1,propuestaeconomica:{data:[]},propuesta:{},politicas:[]},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.compra.id>0&&this.getPropuesta(this.props.compra.id)}},{key:"getPropuesta",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/showpropuestas/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?0!==a.data.length?(this.setState({estado:!0,data:a.data}),this.getListPropuestaEconomica(this.state.data[this.state.activeStep])):this.setState({estado:!1}):202===a.status&&this.setState({estado:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getListPropuestaEconomica",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a,r;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.dispatch({type:"SET_propuesta",payload:{propuesta:t}}),e.prev=1,e.next=4,fe()({url:ve.endpoint+"/propuestaCliente/"+t.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 4:return 200===(a=e.sent).status?this.setState({propuestaeconomica:a.data}):202===a.status&&console.log(a.data.error),e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(1),r=JSON.parse(JSON.stringify(e.t0)),console.log(r);case 13:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.data,t=this.props,a=t.classes,r=t.theme,o=this.state.activeStep,i=e.length;return this.state.estado?n.a.createElement("div",{className:a.root},n.a.createElement(pe.a,{square:!0,elevation:0,className:a.header}," ",e[o].nombre," - ",e[o].nit,"  # ",e[o].id),n.a.createElement(dn,{politicas:this.state.politicas,inicio:this.modificarInicio,compra:this.props.compra,propuesta:e[o],propuestaeconomica:this.state.propuestaeconomica}),n.a.createElement(Yr.a,{steps:i,position:"static",activeStep:o,className:a.mobileStepper,nextButton:n.a.createElement(te.a,{size:"small",onClick:this.handleNext,disabled:o===i-1},"Siguiente","rtl"===r.direction?n.a.createElement(en.a,null):n.a.createElement(an.a,null)),backButton:n.a.createElement(te.a,{size:"small",onClick:this.handleBack,disabled:0===o},"rtl"===r.direction?n.a.createElement(an.a,null):n.a.createElement(en.a,null),"Anterior")})):n.a.createElement("div",null,n.a.createElement("p",null,"Error no tenemos ninguna propuesta por favor registra una propuesta "))}}]),t}(n.a.Component),fn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{header:{display:"flex",alignItems:"center",height:50,paddingLeft:4*e.spacing.unit,backgroundColor:e.palette.background.default}}},{withTheme:!0})(hn)),vn={cont:{display:"flex",justifyContent:"center"}};function bn(e){var t=e.children;return n.a.createElement("div",{style:{padding:24}},t)}var En=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificarInicio=function(){a.getData(a.props.match.params.idCompra)},a.handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.state={compra:{},value:0,presupuestoAfect:{data:[]}},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.match.isExact?this.getData(this.props.match.params.idCompra):this.props.history.push("/home")}},{key:"getPresupuestoAfectado",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/listdetallePresupuesto/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({presupuestoAfect:a.data}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/compras/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:a=e.sent,this.setState({compra:a.data}),3===a.data.EstadoAction&&this.getPresupuestoAfectado(a.data.id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.props.history.push("/home");case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getEstado",value:function(e){switch(e){case 0:return"Compra registrada";case 1:return"Compra anulada";case 2:return"compra habilitada para resivir propuesta";case 3:return"compra aprobada";case 4:return"compra habilitada";default:return""}}},{key:"render",value:function(){var e=this.props.theme;return n.a.createElement("div",null,n.a.createElement(pe.a,null,n.a.createElement(ar.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},n.a.createElement(nr.a,{label:"Compra"}),n.a.createElement(nr.a,{label:"Propuestas"}),2===this.state.compra.EstadoAction?n.a.createElement(nr.a,{label:"Registrar"}):"")),this.getEstado(this.state.compra.EstadoAction),n.a.createElement(er.a,{axis:"rtl"===e.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},n.a.createElement(bn,null,this.state.compra.id>0?n.a.createElement(ma,{presupuestoAfect:this.state.presupuestoAfect,COMPRADATA:this.state.compra}):n.a.createElement("div",{style:vn.cont},"   ",n.a.createElement(ha.a,{color:"secondary"})," ")),n.a.createElement(bn,null,this.state.compra.id>0?n.a.createElement(fn,{inicio:this.modificarInicio,compra:this.state.compra}):n.a.createElement("div",{style:vn.cont},"   ",n.a.createElement(ha.a,{color:"secondary"})," ")),2===this.state.compra.EstadoAction?n.a.createElement(bn,null,n.a.createElement(Kr,{compra:this.state.compra})):""))}}]),t}(n.a.Component),gn=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}},{withTheme:!0})(En)),yn={tableWrapper:{overflowX:"auto"}},Sn=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return n.a.createElement(pt.a,{key:t.id},n.a.createElement(st.a,null,t.clusterName),n.a.createElement(st.a,null,t.componenteName),n.a.createElement(st.a,null,t.proyectoName),n.a.createElement(st.a,null,t.operationName),n.a.createElement(st.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.totalPresupuesto)),n.a.createElement(st.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.TotalGasto)),n.a.createElement(st.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.comprometido)),n.a.createElement(st.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.disponible)),e.props.action?n.a.createElement(st.a,null,n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")):n.a.createElement(st.a,null))}):""}},{key:"setData",value:function(){var e=this;return n.a.createElement(pe.a,null,n.a.createElement("div",{style:yn.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null," ",n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.props.cleardata()}},"brush"),this.props.clusterA?n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.props.handleClickOpen("cluster")}},"visibility"):""," Cluster"),n.a.createElement(st.a,null,this.props.componenteA?n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.props.handleClickOpen("componente")}},"visibility"):""," Componente"),n.a.createElement(st.a,null,"Concepto"),n.a.createElement(st.a,null,this.props.operationn?n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.props.handleClickOpen("operacion")}},"visibility"):"","Centro de operaci\xf2n"),n.a.createElement(st.a,null,"$ Presupuesto"),n.a.createElement(st.a,null,"$ Gasto"),n.a.createElement(st.a,null,"$ Comprometido"),n.a.createElement(st.a,null,"$ Disponible "),this.props.action?n.a.createElement(st.a,null,"Acciones"):n.a.createElement(st.a,null))),this.props.datos.data.length>0?n.a.createElement(ot.a,null,this.getMapData(),n.a.createElement(pt.a,null,n.a.createElement(st.a,{rowSpan:3}),n.a.createElement(st.a,{colSpan:3},"Total"),n.a.createElement(st.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.totalPresupuesto)),n.a.createElement(st.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalGasto)),n.a.createElement(st.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalComprometido)),n.a.createElement(st.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalDisponible)))):""),this.props.datos.data.length>0?n.a.createElement(Sa.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.totalData,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(n.a.Component),Cn={avatar:{backgroundColor:xt.a[100],color:xt.a[600]}},kn=function(e){function t(){var e,a;Object(y.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(n)))).handleClose=function(){a.props.onClose()},a.handleListItemClick=function(e){a.props.handleSelect(e)},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"mapdata",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return n.a.createElement(q.a,{button:!0,onClick:function(){return e.handleListItemClick({data:t,action:e.props.action})},key:t.id},n.a.createElement(gt.a,null,n.a.createElement(bt.a,null,n.a.createElement("i",{class:"material-icons"}," find_in_page "))),n.a.createElement(St.a,{primary:t.nombre}))}):""}},{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.onClose,t.handleSelect,t.selectedValue,Object(Y.a)(t,["classes","onClose","handleSelect","selectedValue"]));return n.a.createElement(At.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},a),n.a.createElement(kt.a,{id:"simple-dialog-title"},this.props.title),n.a.createElement("div",null,n.a.createElement(V.a,null,this.mapdata(),n.a.createElement(q.a,null,n.a.createElement(te.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleClose()}},"Cancelar")))))}}]),t}(n.a.Component),On=Object(A.withStyles)(Cn)(kn);var An=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handlePageChange=function(e){console.log(a.state.actionf),""===a.state.actionf?(a.setState({activePage:e}),a.getData(1,e)):(a.setState({activePage:e}),a.getDatafilter(1,e,a.state.cluster_idF,a.state.componente_idF,a.state.operacion_idF))},a.modificar=function(e){a.getpresupuesto(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/presupuestos",data:{periodo_id:1,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,operacion_id:a.state.operacion_id,proyecto_id:a.state.proyecto_id,valor:a.state.valor,action:!1},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear(),a.getData(1,1),a.setState({canSubmit:!0})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/presupuestos/"+a.state.id,data:{periodo_id:1,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,operacion_id:a.state.operacion_id,proyecto_id:a.state.proyecto_id,valor:a.state.valor},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear(),a.setState({canSubmit:!0}),a.getData(1,1)}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.handleClickOpen=function(e){switch(e){case"cluster":a.setState({actionf:e,title:"seleccione cluster",activePage:1,datafilter:a.state.Cluster});break;case"componente":a.setState({actionf:e,title:"seleccione componente",activePage:1,datafilter:a.state.componentes});break;case"operacion":a.setState({actionf:e,title:"seleccione operacion",activePage:1,datafilter:a.state.operacions})}a.setState({open:!0})},a.handleSelect=function(e){switch(e.action){case"cluster":a.getDatafilter(1,1,e.data.id,a.state.componente_idF,a.state.operacion_idF),a.setState({cluster_idF:e.data.id});break;case"componente":a.getDatafilter(1,1,a.state.cluster_idF,e.data.id,a.state.operacion_idF),a.setState({componente_idF:e.data.id});break;case"operacion":a.getDatafilter(1,1,a.state.cluster_idF,a.state.componente_idF,e.data.id),a.setState({operacion_idF:e.data.id})}a.setState({open:!1})},a.cleardata=function(e){a.setState({operacion_idF:0,componente_idF:0,cluster_idF:0,Amsg:!1,actionf:"",activePage:1}),a.getData(1,1)},a.handleClose=function(e){a.setState({open:!1})},a.state={id:"",cluster_idF:0,cluster_id:"",componente_idF:0,componente_id:"",operacion_idF:0,operacion_id:"",valor:"",proyecto_id:"",componentes:[],operacions:[],Cluster:[],open:!1,datos:{data:[]},Proyectos:[],datafilter:[],error:{},title:"Buscando",canSubmit:!0,action:!0,Amsg:!1,clusterA:!1,componenteA:!1,operationn:!1,actionf:"",msg:""},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"componentDidMount",value:function(){this.getcluster(),this.getComponente(),this.getOperacion(),this.getProyectos(),this.getData(1,1)}},{key:"listProyecto",value:function(){return this.state.Proyectos.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"getProyectos",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/proyectos/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Proyectos:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t,a){var r;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/Presupuesto/"+t+"?page="+a,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(r=e.sent).status&&this.setState({datos:r.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getpresupuesto",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/presupuestos/"+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,cluster_id:a.data.cluster_id,componente_id:a.data.componente_id,operacion_id:a.data.operacion_id,proyecto_id:a.data.proyecto_id,valor:a.data.valor}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({id:"",cluster_id:"",componente_id:"",operacion_id:"",proyecto_id:"",error:{},valor:"",action:!0})}},{key:"getcluster",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/clusters/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Cluster:t.data,clusterA:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getComponente",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/componentes/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({componentes:t.data,componenteA:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getOperacion",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/operacions/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({operacions:t.data,operationn:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"listCluster",value:function(){return this.state.Cluster.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listComponente",value:function(){return this.state.componentes.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listOperation",value:function(){return this.state.operacions.map(function(e){return n.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"getDatafilter",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t,a,r,n,o){var i;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/Presupuesto/"+t+"/?cluster_id="+r+"&componente_id="+n+"&operacion_id="+o+"&page="+a,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(i=e.sent).status&&(this.setState({datos:i.data}),0===i.data.data.length?this.setState({Amsg:!0,msg:" Error no tenemos datos relacionados con este filtro."}):this.setState({Amsg:!1,msg:""})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a,r,n,o){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(Gt.a,{htmlFor:"Cluster"},this.state.error.cluster?this.state.error.cluster[0]:"Cluster"),n.a.createElement($t.a,{error:!!this.state.error.cluster,fullWidth:!0,value:this.state.cluster_id,onChange:function(t){return e.syncField(t,"cluster_id")},inputProps:{name:"Cluster",id:"Cluster"}},n.a.createElement(M.a,{value:""},n.a.createElement("em",null,"None")),this.listCluster()),n.a.createElement(Gt.a,{htmlFor:"Componente"},this.state.error.componente?this.state.error.componente[0]:"componente"),n.a.createElement($t.a,{error:!!this.state.error.componente,fullWidth:!0,value:this.state.componente_id,onChange:function(t){return e.syncField(t,"componente_id")},inputProps:{name:"Componente",id:"Componente"}},n.a.createElement(M.a,{value:""},n.a.createElement("em",null,"None")),this.listComponente()),n.a.createElement(Gt.a,{htmlFor:"proyecto"},this.state.error.proyecto?this.state.error.proyecto[0]:"Concepto"),n.a.createElement($t.a,{error:!!this.state.error.proyecto,fullWidth:!0,value:this.state.proyecto_id,onChange:function(t){return e.syncField(t,"proyecto_id")},inputProps:{name:"proyecto",id:"proyecto"}},n.a.createElement(M.a,{value:""},n.a.createElement("em",null,"None")),this.listProyecto())),n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(Gt.a,{htmlFor:"operacion"},this.state.error.operacion?this.state.error.operacion[0]:"Centro de operaci\xf2n"),n.a.createElement($t.a,{error:!!this.state.error.operacion,fullWidth:!0,value:this.state.operacion_id,onChange:function(t){return e.syncField(t,"operacion_id")},inputProps:{name:"operacion",id:"operacion"}},n.a.createElement(M.a,{value:""},n.a.createElement("em",null,"None")),this.listOperation()),n.a.createElement(de.a,{error:!!this.state.error.valor,label:this.state.error.valor?this.state.error.valor[0]:"Total presupuestado",placeholder:"Valor total de presupuestado",value:this.state.valor,onChange:function(t){return e.syncField(t,"valor")},id:"formatted-numberformat-input",fullWidth:!0,InputProps:{inputComponent:Ht}}))),this.state.action?n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),n.a.createElement(On,{action:this.state.actionf,title:this.state.title,selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,handleSelect:this.handleSelect,datos:this.state.datafilter}),n.a.createElement(Sn,{clusterA:this.state.clusterA,componenteA:this.state.componenteA,operationn:this.state.operationn,cleardata:this.cleardata,handleClickOpen:this.handleClickOpen,datos:this.state.datos,modificar:this.modificar,handlePageChange:this.handlePageChange,activePage:this.state.activePage,action:!0}),this.state.Amsg?n.a.createElement("p",null,this.state.msg):"")}}]),t}(n.a.Component),jn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(An),xn={tableWrapper:{overflowX:"auto"}},Dn=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return n.a.createElement(pt.a,{key:t.id},n.a.createElement(st.a,null," ",t.nombre," "),n.a.createElement(st.a,null,t.descripcion),n.a.createElement(st.a,null,t.fechaInicio),n.a.createElement(st.a,null,t.fechaFin),n.a.createElement(st.a,null,t.activo?"activo":"No activo"),e.props.action?n.a.createElement(st.a,null,n.a.createElement(dt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),n.a.createElement(Wt.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):n.a.createElement(st.a,null))}):""}},{key:"setData",value:function(){return n.a.createElement(pe.a,null,n.a.createElement("div",{style:xn.tableWrapper},n.a.createElement(rt.a,null,n.a.createElement(lt.a,null,n.a.createElement(pt.a,null,n.a.createElement(st.a,null,"Nombre "),n.a.createElement(st.a,null,"Descripci\xf2n"),n.a.createElement(st.a,null,"Fecha inicio"),n.a.createElement(st.a,null,"Fecha Fin"),n.a.createElement(st.a,null,"Estado"),this.props.action?n.a.createElement(st.a,null,"Acciones"):n.a.createElement(st.a,null))),n.a.createElement(ot.a,null,this.getMapData()))))}},{key:"render",value:function(){return this.setData()}}]),t}(n.a.Component);var Fn=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getperiodo(e)},a.updateStado=function(){a.setState({activo:!a.state.activo})},a.onSubmit=function(e){a.setState({canSubmit:!1}),fe()({method:"post",url:ve.endpoint+"/periodos",data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),fe()({method:"put",url:ve.endpoint+"/periodos/"+a.state.id,data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){fe()({method:"DELETE",url:ve.endpoint+"/periodos/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getData()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",nombre:"",descripcion:"",fechaInicio:"",fechaFin:"",activo:!1,datos:[],error:{},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,r={};r[t]=a,this.setState(r)}},{key:"getData",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(){var t;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/periodos",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({datos:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getperiodo",value:function(){var e=Object(Oe.a)(ke.a.mark(function e(t){var a;return ke.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe()({url:ve.endpoint+"/periodos/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,nombre:a.data.nombre,descripcion:a.data.descripcion,fechaInicio:a.data.fechaInicio,fechaFin:a.data.fechaFin,activo:a.data.activo}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,id:"",nombre:"",descripcion:"",fechaInicio:"",fechaFin:"",activo:!1,error:{}})}},{key:"listData",value:function(){return 0!==this.state.datos.length?n.a.createElement(Dn,{datos:this.state.datos,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement(tt.a,{container:!0,spacing:24},n.a.createElement(tt.a,{item:!0,xs:12,sm:6},n.a.createElement(de.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre",placeholder:"Nombre presupuesto",value:this.state.nombre,onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0}),n.a.createElement(de.a,{error:!!this.state.error.descripcion,label:this.state.error.descripcion?this.state.error.descripcion[0]:"Descripcion",placeholder:"Descripci\xf2n de presupuesto",value:this.state.descripcion,onChange:function(t){return e.syncField(t,"descripcion")},fullWidth:!0,margin:"normal"})),n.a.createElement(tt.a,{item:!0,xs:12,sm:3},n.a.createElement(de.a,{error:!!this.state.error.fechaInicio,label:this.state.error.fechaInicio?this.state.error.fechaInicio[0]:"Fecha de inicio",id:"date",type:"date",ref:"FechaInicio",name:"FechaInicio",value:this.state.fechaInicio,onChange:function(t){return e.syncField(t,"fechaInicio")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),n.a.createElement(tt.a,{item:!0,xs:12,sm:3},n.a.createElement(de.a,{error:!!this.state.error.fechaFin,label:this.state.error.fechaFin?this.state.error.fechaFin[0]:"Fecha de finalizaci\xf3n",id:"date",type:"date",value:this.state.fechaFin,ref:"fechaFin",name:"fechaFin",onChange:function(t){return e.syncField(t,"fechaFin")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),n.a.createElement(Gt.a,{htmlFor:"estado"},this.state.error.activo?this.state.error.activo[0]:"Estado "),n.a.createElement(Ma.a,{control:n.a.createElement(Er.a,{checked:this.state.activo,onChange:function(t){return e.updateStado(t,"rta")},value:"activo"})}))),this.state.action?n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):n.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(n.a.Component),wn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Fn);function Pn(e){var t=e.children;return n.a.createElement("div",{style:{padding:24}},t)}var _n=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.state={compra:{},value:0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.theme;return n.a.createElement("div",null,n.a.createElement(pe.a,null,n.a.createElement(ar.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},n.a.createElement(nr.a,{label:"Presupuesto"}),n.a.createElement(nr.a,{label:"Periodos"}))),n.a.createElement(er.a,{axis:"rtl"===e.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},n.a.createElement(Pn,null,n.a.createElement(jn,null)),n.a.createElement(Pn,null,n.a.createElement(wn,null))))}}]),t}(n.a.Component),Nn=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}},{withTheme:!0})(_n));function In(e){var t=e.location;return n.a.createElement("div",null,n.a.createElement("h3",null,"Error pagina no encontrada  ",n.a.createElement("code",null,t.pathname)))}var Tn=function(){return n.a.createElement("div",null,n.a.createElement(ce.a,null,n.a.createElement(le.a,{path:"/login",component:Se}),n.a.createElement(le.a,{exact:!0,path:"/",component:Se}),n.a.createElement($a,{path:"/home",component:Pa}),n.a.createElement($a,{path:"/compra",component:Ea}),n.a.createElement($a,{path:"/compras",component:Oa}),n.a.createElement($a,{path:"/propuesta/:idCompra",component:gn}),n.a.createElement(qa,{path:"/presupuesto",component:Nn}),n.a.createElement(qa,{path:"/AdminUser",component:Ga}),n.a.createElement(qa,{path:"/AdminProvedores",component:Ya}),n.a.createElement(le.a,{component:In})))};var Rn=function(){return n.a.createElement(c.a,{store:v},n.a.createElement(E.a,{loading:null,persistor:b},n.a.createElement(s.a,null,n.a.createElement("div",null,n.a.createElement(se,null),n.a.createElement("main",null,n.a.createElement(Tn,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(Rn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[260,2,1]]]);
//# sourceMappingURL=main.efb21ddf.chunk.js.map