(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{144:function(e,t){e.exports={appId:"4839c100-656e-485c-b30e-f79876d88a59",scopes:["user.read"]}},261:function(e,t,a){e.exports=a.p+"static/media/LOGODXC-01.41e858fa.jpg"},278:function(e,t,a){e.exports=a(703)},285:function(e,t,a){},703:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(50),i=a.n(o),s=(a(283),a(285),a(709)),c=a(15),l=a(73),u=a(179),p=a(62);var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":case"SET_USER_ACCESO":case"SET_SUGGESTION_LIST":case"SET_propuesta":case"SET_COMPRA_USER":case"SET_COMPRA_DATA":case"SET_COMPRA_PRESUPUESTO":case"SET_COMPRA_TERMINOS":case"SET_COMPRA_ENTRAGABLE":return Object(p.a)({},e,t.payload);default:return e}},d=a(254),h={key:"ROOT",storage:a.n(d).a},f=Object(u.a)(h,m),v=Object(l.c)(f,{userAcceso:""}),b=Object(u.b)(v),E=a(255),g=a(137),y=a(7),S=a(6),C=a(10),k=a(8),O=a(9),A=a(35),j=a(257),x=a.n(j),D=a(258),P=a.n(D),w=a(46),F=a.n(w),_=a(110),N=a.n(_),I=a(259),T=a.n(I),R=a(36),M=a.n(R),z=a(176),W=a.n(z),L=a(260),U=a.n(L),B=a(58),V=a.n(B),G=a(143),q=a.n(G),X=a(51),H=a.n(X),$=a(142),J=a.n($),K=a(705),Q=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(V.a,null,r.a.createElement(K.a,{to:"/compra"},r.a.createElement(H.a,{button:!0},r.a.createElement(J.a,null)," Compras"))),r.a.createElement(q.a,null),r.a.createElement(V.a,null,r.a.createElement(K.a,{to:"propuesta/1"},r.a.createElement(H.a,{button:!0},r.a.createElement(J.a,null)," Propuestas"))),r.a.createElement(q.a,null),r.a.createElement(V.a,null,r.a.createElement(H.a,{button:!0},r.a.createElement(J.a,null)," Propuestas")),r.a.createElement(q.a,null))}}]),t}(r.a.Component),Y=a(43),Z=a(706),ee=a(14),te=a.n(ee),ae={btn:{color:"#fff"}},ne=Object(Z.a)(function(e){var t=e.history,a=(e.location,e.match,e.staticContext,e.to),n=e.onClick,o=Object(Y.a)(e,["history","location","match","staticContext","to","onClick"]);return r.a.createElement(te.a,Object.assign({style:ae.btn},o,{onClick:function(e){n&&n(e),t.push(a)}}))}),re=a(52),oe=a.n(re),ie=a(135),se=a.n(ie);var ce={root:{flexGrow:1},grow:{flexGrow:1},color:{color:"black"},btn:{color:"#fff"},menuButton:{marginLeft:-12,marginRight:20},list:{width:250},appBar:{top:"auto"},fullList:{width:"auto"},logo:{width:"9%",padding:"5px"}},le=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).toggleDrawer=function(e,t){return function(){a.setState(Object(g.a)({},e,t))}},a.validarstado=function(){null!==a.props.userAcceso&&""!==a.props.userAcceso&&a.setState({auth:!0})},a.logout=function(e){a.handleClose(),localStorage.clear(),v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}})},a.handleChange=function(e){a.setState({auth:e.target.checked})},a.handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.handleClick=function(e){a.setState({anchorEl2:e.currentTarget})},a.handleClose2=function(){a.setState({anchorEl2:null})},a.state={anchorEl:null,anchorEl2:null,user:{},top:!1,left:!1,bottom:!1,right:!1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.validarstado()}},{key:"render",value:function(){var e=this.props.classes,t=this.state.anchorEl,a=Boolean(t),n=this.state.anchorEl2,o=Boolean(n);return r.a.createElement("div",{className:e.root},r.a.createElement(x.a,{position:"static"},r.a.createElement(P.a,null,r.a.createElement(F.a,{variant:"h6",color:"inherit",className:e.grow},"Dividendo Compras"),!this.props.userAcceso&&r.a.createElement(ne,{to:"/login"},"Login"),this.props.userAcceso&&r.a.createElement("div",null,"Super-Admin"===oe()(this.props.userAcceso).rol?r.a.createElement(ne,{to:"/Presupuesto"},"Presupuesto"):"","Super-Admin"===oe()(this.props.userAcceso).rol?r.a.createElement(te.a,{style:ce.btn,"aria-owns":a?"fade-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},"Administrador"):"",r.a.createElement(W.a,{id:"fade-menu",anchorEl:n,open:o,onClose:this.handleClose2,TransitionComponent:se.a},r.a.createElement(ne,{onClick:this.handleClose2,style:ce.color,to:"/AdminUser"},"funcionarios"),r.a.createElement(ne,{onClick:this.handleClose2,style:ce.color,to:"/AdminProvedores"},"Provedores"),r.a.createElement(ne,{onClick:this.handleClose2,style:ce.color,to:"/clusters"},"clusters"),r.a.createElement(ne,{onClick:this.handleClose2,style:ce.color,to:"/componentes"},"Componentes "),r.a.createElement(ne,{onClick:this.handleClose2,style:ce.color,to:"/conceptos"},"Conceptos")),r.a.createElement(ne,{to:"/compra"},"Compra"),r.a.createElement(ne,{to:"/compras"},"Compras")),this.props.userAcceso&&r.a.createElement("div",null,r.a.createElement(N.a,{"aria-owns":a?"menu-appbar":void 0,"aria-haspopup":"true",onClick:this.handleMenu,color:"inherit"},r.a.createElement(T.a,null)),r.a.createElement(W.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:a,onClose:this.handleClose},r.a.createElement(M.a,{onClick:this.handleClose},"My account ",oe()(this.props.userAcceso).name),r.a.createElement(M.a,{onClick:this.logout},"logout"))))),r.a.createElement(U.a,{open:this.state.left,onClose:this.toggleDrawer("left",!1)},r.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer("left",!1),onKeyDown:this.toggleDrawer("left",!1)},r.a.createElement(Q,{className:e.list}))))}}]),t}(r.a.Component),ue=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)(ce)(le)),pe=a(710),me=a(707),de=a(18),he=a.n(de),fe=a(5),ve=a.n(fe),be={endpoint:"https://apicompras.dxc-competencias.org"},Ee=a(261),ge=a.n(Ee),ye=a(74),Se=a.n(ye),Ce=a(75),ke=a.n(Ce),Oe=a(53),Ae=a.n(Oe),je=a(4),xe=a.n(je),De=a(12),Pe=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){var e=null;return this.props.debug&&(e=r.a.createElement("pre",{className:"alert-pre border bg-light p-2"},r.a.createElement("code",null,this.props.debug))),r.a.createElement("div",null,r.a.createElement("p",{className:"mb-3"},this.props.message),e)}}]),t}(r.a.Component),we=(a(453),a(144)),Fe=a.n(we),_e=a(145),Ne=a(465);function Ie(e){return Ne.Client.init({authProvider:function(t){t(null,e)}})}function Te(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(De.a)(xe.a.mark(function e(t){var a,n;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ie(t),e.next=3,a.api("/me").get();case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Me=function(e){function t(e){var a;Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).userAgentApplication=new _e.UserAgentApplication(Fe.a.appId,null,_e.tokenReceivedCallBack,{logger:_e.logger,cacheLocation:"localStorage"});var n=a.userAgentApplication.getUser();return a.state={isAuthenticated:null!==n,user:{},error:null},n&&a.getUserProfile(),a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"login",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.userAgentApplication.loginPopup(Fe.a.scopes);case 3:return e.next=5,this.getUserProfile();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t=e.t0.split("|"),this.setState({isAuthenticated:!1,user:{},error:{message:t[1],debug:t[0]}});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.userAgentApplication.logout()}},{key:"getUserProfile",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t,a,n,r;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.userAgentApplication.acquireTokenSilent(Fe.a.scopes);case 3:if(!(t=e.sent)){e.next=10;break}return e.next=7,Te(t);case 7:a=e.sent,this.comprobarIdentidad(t),this.setState({isAuthenticated:!0,user:{displayName:a.displayName,email:a.mail||a.userPrincipalName},error:null});case 10:e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),n={},"string"===typeof e.t0?(r=e.t0.split("|"),n=r.length>1?{message:r[1],debug:r[0]}:{message:e.t0}):n={message:e.t0.message,debug:JSON.stringify(e.t0)},this.setState({isAuthenticated:!1,user:{},error:n});case 17:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"comprobarIdentidad",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a,n=this;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({method:"get",url:be.endpoint+"/auth_365",headers:{Accept:"*/*",Authorization:t}});case 3:200===(a=e.sent).status?(v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:a.data.auth_token}}),this.props.inicio()):203===a.status&&(this.setState({error:{message:a.data.Message+"en 5 segundos se cerrara sesion con 365.",debug:"User no autorizado"}}),setTimeout(function(){return n.logout()},5e3)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=null;return this.state.error&&(t=r.a.createElement(Pe,{message:this.state.error.message,debug:this.state.error.debug})),r.a.createElement("div",null,r.a.createElement("p",null,"Iniciar secci\xf3n con 365 "),this.state.isAuthenticated?r.a.createElement("div",null,"Estas autenticado con   ",this.state.user.displayName+" "+this.state.user.email,r.a.createElement(te.a,{variant:"contained",type:"submit",color:"primary",onClick:function(){return e.logout()}}," cerrar sesi\xf3n")," "):r.a.createElement(te.a,{variant:"contained",type:"submit",color:"primary",onClick:function(){return e.login()}}," Iniciar secci\xf3n con 365"),t)}},{key:"setErrorMessage",value:function(e,t){this.setState({error:{message:e,debug:t}})}}]),t}(n.Component),ze={root:{width:"98%"},cont:{display:"flex",justifyContent:"center"},logo:{width:"20%",display:"block",marginLeft:"auto",marginRight:"auto"},main:{paddingLeft:"15%",paddingRight:"15%",paddingTop:"2%"}};function We(e){var t=e.children,a=e.dir;return r.a.createElement(F.a,{component:"div",dir:a},t)}var Le=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(){a.setState({error:!1}),ve()({method:"post",url:be.endpoint+"/authenticate",data:{email:a.state.email,password:a.state.password},headers:{Accept:"*/*"}}).then(function(e){v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:e.data.auth_token}}),a.home()}).catch(function(e){a.setState({canSubmit:!0}),500===e.response.status&&a.setState({error:!0})})},a.handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.state={username:"",password:"",error:!1,canSubmit:!0,action:!0,value:0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.userAcceso&&this.props.history.push("/home")}},{key:"home",value:function(){this.props.history.push("/home")}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this,t=this.props.theme;return r.a.createElement("div",null,r.a.createElement(ke.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(Ae.a,{label:"365"}),r.a.createElement(Ae.a,{label:"login"})),r.a.createElement("img",{style:ze.logo,src:ge.a,alt:"logo"}),r.a.createElement(Se.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},r.a.createElement(We,{dir:t.direction},r.a.createElement("div",{style:ze.main},r.a.createElement(Me,{inicio:function(){return e.home()}}))),r.a.createElement(We,{dir:t.direction},r.a.createElement("div",{style:ze.main},this.state.error?r.a.createElement("p",{style:{color:"red"}}," Error Usuario o contrase\xf1a err\xf3neos."):"",r.a.createElement(he.a,{id:"outlined-email-input",label:"Email",type:"email",name:"email",autoComplete:"email",onChange:function(t){return e.syncField(t,"email")},fullWidth:!0,margin:"normal",variant:"outlined"}),r.a.createElement(he.a,{id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:function(t){return e.syncField(t,"password")},fullWidth:!0,margin:"normal",variant:"outlined"}),r.a.createElement(te.a,{variant:"contained",type:"submit",color:"primary",onClick:this.onSubmit}," Login  ")))))}}]),t}(r.a.Component),Ue=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)(ze,{withTheme:!0})(Le)),Be=a(86),Ve=a(92),Ge=a.n(Ve),qe=a(93),Xe=a.n(qe),He=a(94),$e=a.n(He),Je=a(270),Ke=a.n(Je),Qe=a(17),Ye=a.n(Qe),Ze=a(262),et=a.n(Ze),tt=a(264),at=a.n(tt),nt=a(265),rt=a.n(nt),ot=a(268),it=a.n(ot),st=a(266),ct=a.n(st),lt=a(267),ut=a.n(lt),pt=a(175),mt=a.n(pt),dt=a(263),ht=a.n(dt),ft={success:et.a,warning:ht.a,error:at.a,info:rt.a};var vt=Object(A.withStyles)(function(e){return{success:{backgroundColor:ct.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:ut.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,o=e.onClose,i=e.variant,s=Object(Y.a)(e,["classes","className","message","onClose","variant"]),c=ft[i];return r.a.createElement(mt.a,Object.assign({className:Ye()(t[i],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(c,{className:Ye()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(N.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:o},r.a.createElement(it.a,{className:t.icon}))]},s))}),bt=a(11),Et=a.n(bt),gt=a(26),yt=a.n(gt),St=a(25),Ct=a.n(St),kt=a(1),Ot=a.n(kt),At=a(27),jt=a.n(At),xt=a(20),Dt=a.n(xt),Pt=a(22),wt=a.n(Pt),Ft=a(23),_t=a.n(Ft),Nt={tableWrapper:{overflowX:"auto"}},It=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getcompra",value:function(e){this.props.getcompraID(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,null," ",t.NombreCompra," "),r.a.createElement(Ot.a,null,t.objetivo),r.a.createElement(Ot.a,null,t.updated_at),r.a.createElement(Ot.a,null,r.a.createElement(_t.a,{variant:"contained",color:"primary",onClick:function(){return e.getcompra(t.id)}},"build"),"    "))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:Nt.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Nombre Compra"),r.a.createElement(Ot.a,null,"Objetivo"),r.a.createElement(Ot.a,null,"Fecha de Creaci\xf2n"),this.props.action?r.a.createElement(Ot.a,null,"Acciones"):r.a.createElement(Ot.a,null))),r.a.createElement(Ct.a,null,this.getMapData()))))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),Tt=a(84),Rt=a.n(Tt),Mt=a(83),zt=a.n(Mt),Wt=a(91),Lt=a.n(Wt),Ut=a(56),Bt=a.n(Ut),Vt=a(55),Gt=a.n(Vt),qt=a(69),Xt=a.n(qt),Ht={avatar:{backgroundColor:Xt.a[100],color:Xt.a[600]}},$t=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.onClose()},a.handleListItemClick=function(e){a.props.handleSelect(e)},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"mapdata",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleListItemClick(t)},key:t.id},r.a.createElement(zt.a,null,r.a.createElement(Rt.a,null,r.a.createElement("i",{class:"material-icons"}," account_circle "))),r.a.createElement(Lt.a,{primary:t.name+" - "+t.apellido}))}):""}},{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.onClose,t.handleSelect,t.selectedValue,Object(Y.a)(t,["classes","onClose","handleSelect","selectedValue"]));return r.a.createElement(Gt.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},a),r.a.createElement(Bt.a,{id:"simple-dialog-title"},"Seleccione Funcionario"),r.a.createElement("div",null,r.a.createElement(V.a,null,this.mapdata(),r.a.createElement(H.a,null,r.a.createElement(te.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleClose()}},"Cancelar")))))}}]),t}(r.a.Component),Jt=Object(A.withStyles)(Ht)($t);var Kt={btn:{paddingTop:"18px"},cont:{display:"flex",justifyContent:"center"},formbuscar:{alignContent:"center"}},Qt=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleSelect=function(e){a.setState({open:!1}),a.props.pasarUser(e)},a.handleClose=function(e){a.setState({open:!1})},a.onSubmit=function(e){a.FilterNombre()},a.FilterNombre=function(e){a.setState({canSubmit:!1}),ve()({method:"get",timeout:8e3,url:be.endpoint+"/user/filter/?nombre="+a.state.nombre,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){0===e.data.length?(a.setState({error:{nombre:["No encontramos resultados"]}}),a.clear()):(a.setState({canSubmit:!0,funcionarios:e.data}),a.handleClickOpen())}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={nit:"",nombre:"",funcionarios:[],msg:{estado:!1,msg:"",tipo:""},open:!1,error:{},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"clear",value:function(){this.setState({canSubmit:!0,nombre:"",nit:""})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre Funcionario ",value:this.state.nombre,placeholder:"Busca por nombre de de funcionario",ref:"nombre",name:"nombre",onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0,margin:"normal",variant:"outlined"})),r.a.createElement(Et.a,{item:!0,xs:3,sm:3},r.a.createElement("div",{style:Kt.btn},r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"Buscar ")))),r.a.createElement(Jt,{selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,handleSelect:this.handleSelect,datos:this.state.funcionarios}))}}]),t}(r.a.Component),Yt=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Qt);var Zt={cont:{display:"flex",justifyContent:"center"},formbuscar:{left:"20%"}},ea=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.getcompraID=function(e){a.props.compraData({id:e}),a.props.USER(a.state.user)},a.confirmar=function(){a.props.USER(a.state.user)},a.pasarUser=function(e){a.getUser(e.user_id)},a.state={value:0,user:{id:0},dataCompra:[]},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.btns(!1),this.getData()}},{key:"getData",value:function(){0===this.props.userData.id?this.getUser(oe()(this.props.userAcceso).user_id):this.getUser(this.props.userData.id)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getUser",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/users/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&(this.setState({user:a.data}),this.getComprasPersonTipe(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getComprasPersonTipe",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/compras/"+t+"/0",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:a=e.sent,this.setState({dataCompra:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Titular de la compra"),"Super-Admin"===oe()(this.props.userAcceso).rol||"Colaborador"===oe()(this.props.userAcceso).rol?r.a.createElement(Yt,{style:Zt.formbuscar,pasarUser:this.pasarUser}):"",r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Solicitante :")," ",this.state.user.name,"   ",this.state.user.apellido),r.a.createElement("p",null,r.a.createElement("b",null,"Cargo:")," ",this.state.user.cargo),r.a.createElement("p",null,r.a.createElement("b",null,"Direcci\xf2n :")," ",this.state.user.direccion)),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Identificaci\xf2n:")," ",this.state.user.documento),r.a.createElement("p",null,r.a.createElement("b",null,"E-mail:")," ",this.state.user.email))),r.a.createElement("div",{style:Zt.cont},r.a.createElement(te.a,{variant:"contained",color:"primary",onClick:this.confirmar}," Continuar ")),this.state.dataCompra.length>0?r.a.createElement("div",null,r.a.createElement("p",null,"Termina de gestionar tus compras"),r.a.createElement(It,{getcompraID:this.getcompraID,datos:this.state.dataCompra,action:!0})):" ")}}]),t}(r.a.Component),ta=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(ea);var aa={cont:{display:"flex",justifyContent:"center"}},na=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleBack=function(){a.props.handleBack()},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/compras",data:{NombreCompra:a.state.NombreCompra,objetivo:a.state.Objetivo,FechaInicio:a.state.FechaInicio,FechaFin:a.state.FechaFin,user_id:a.props.user.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.compraData(e.data),a.setState({canSubmit:!0}),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/compras/"+a.props.compra.id,data:{NombreCompra:a.state.NombreCompra,objetivo:a.state.Objetivo,FechaInicio:a.state.FechaInicio,FechaFin:a.state.FechaFin,user_id:a.props.user.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.compraData(e.data),a.setState({canSubmit:!0}),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={NombreCompra:"",Objetivo:"",FechaInicio:"",FechaFin:"",msg:{estado:!1,msg:"",tipo:""},error:{},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.getValidate(),this.props.btns(!1)}},{key:"getValidate",value:function(){this.setState({action:!1}),null!=this.props.compra.id?this.getData(this.props.compra.id):this.setState({action:!0})}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/compras/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,NombreCompra:a.data.NombreCompra,Objetivo:a.data.objetivo,FechaFin:new Date(a.data.FechaFin).toISOString().split("T")[0],FechaInicio:new Date(a.data.FechaInicio).toISOString().split("T")[0]}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.NombreCompra,label:this.state.error.NombreCompra?this.state.error.NombreCompra[0]:"Nombre Compras",value:this.state.NombreCompra,placeholder:"Nombre compra",ref:"NombreCompra",name:"NombreCompra",onChange:function(t){return e.syncField(t,"NombreCompra")},fullWidth:!0,multiline:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.objetivo,label:this.state.error.objetivo?this.state.error.objetivo[0]:"Objetivo compra",placeholder:"Objetivo compra",value:this.state.Objetivo,ref:"Objetivo",name:"Objetivo",multiline:!0,onChange:function(t){return e.syncField(t,"Objetivo")},fullWidth:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.FechaInicio,label:this.state.error.FechaInicio?this.state.error.FechaInicio[0]:"Fecha de inicio",id:"dateini",type:"date",ref:"FechaInicio",name:"FechaInicio",value:this.state.FechaInicio,onChange:function(t){return e.syncField(t,"FechaInicio")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(he.a,{error:!!this.state.error.FechaFin,label:this.state.error.FechaFin?this.state.error.FechaFin[0]:"Fecha de finalizaci\xf3n",id:"date",type:"date",ref:"FechaFin",name:"FechaFin",Value:this.state.FechaFin,onChange:function(t){return e.syncField(t,"FechaFin")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}))),r.a.createElement("div",{style:aa.cont},r.a.createElement(te.a,{onClick:this.handleBack}," atras  "),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  ")))}}]),t}(r.a.Component),ra=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(na),oa=a(61),ia=a.n(oa),sa={tableWrapper:{overflowX:"auto"}},ca=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,null," ",t.servicio," "),r.a.createElement(Ot.a,null,t.componenteName),r.a.createElement(Ot.a,null,t.clusterName),r.a.createElement(Ot.a,null,t.proyectoName),r.a.createElement(Ot.a,null,t.operationName),r.a.createElement(Ot.a,null,t.cantidad),r.a.createElement(Ot.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.valorConImpuesto)),e.props.action?r.a.createElement(Ot.a,null,r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),r.a.createElement(ia.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):r.a.createElement(Ot.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:sa.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Servicio"),r.a.createElement(Ot.a,null,"componente"),r.a.createElement(Ot.a,null,"cluster"),r.a.createElement(Ot.a,null,"Concepto"),r.a.createElement(Ot.a,null,"Centro de operaci\xf2n"),r.a.createElement(Ot.a,null,"Cantidad"),r.a.createElement(Ot.a,null,"$ valor con impuesto"),this.props.action?r.a.createElement(Ot.a,null,"Acciones"):r.a.createElement(Ot.a,null))),r.a.createElement(Ct.a,null,this.getMapData(),r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,{rowSpan:3}),r.a.createElement(Ot.a,{colSpan:4},"Total de compra"),r.a.createElement(Ot.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.total)))))))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),la=a(34),ua=a.n(la),pa=a(48),ma=a.n(pa),da=a(141),ha=a.n(da);var fa=function(e){var t=e.inputRef,a=e.onChange,n=Object(Y.a)(e,["inputRef","onChange"]);return r.a.createElement(ha.a,Object.assign({},n,{getInputRef:t,onValueChange:function(e){a({target:{value:e.value}})},thousandSeparator:!0,prefix:"$"}))},va=a(49),ba=a.n(va);var Ea=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getDetallepresupuesto(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/detallepresupuestos",data:{servicio:a.state.servicio,cantidad:a.state.cantidad,valorSinImpuesto:a.state.valorSinImpuesto,valorConInpuesto:a.state.valorConInpuesto,NombreCompra:a.state.NombreCompra,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,compra_id:a.props.compra.id,operacion_id:a.state.operacion_id,proyecto_id:a.state.proyecto_id,periodo_id:a.props.periodo.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{valorConInpuesto:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.getValidate(),a.clear(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/detallepresupuestos/"+a.state.id,data:{servicio:a.state.servicio,cantidad:a.state.cantidad,valorSinImpuesto:a.state.valorSinImpuesto,valorConInpuesto:a.state.valorConInpuesto,NombreCompra:a.state.NombreCompra,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,operacion_id:a.state.operacion_id,periodo_id:a.props.periodo.id,proyecto_id:a.state.proyecto_id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{valorConInpuesto:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.getValidate(),a.clear(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){ve()({method:"DELETE",url:be.endpoint+"/detallepresupuestos/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getValidate()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",servicio:"",cantidad:0,valorSinImpuesto:0,valorConInpuesto:"",cluster_id:"",componente_id:"",operacion_id:"",proyecto_id:"",datos:{data:[]},componentes:[],operacions:[],Cluster:[],Proyectos:[],Mensaje:!1,DatosPresupuesto:{},msgProye:"Buscando",msg:{estado:!1,msg:"",tipo:""},error:{},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.getValidate(),this.getcluster(),this.getComponente(),this.getOperacion(),this.props.btns(!0),this.props.CanNext(!1)}},{key:"getValidate",value:function(){null!=this.props.compra.id&&this.getData(this.props.compra.id)}},{key:"getDetallepresupuesto",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/detallepresupuestos/"+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,servicio:a.data.servicio,cantidad:a.data.cantidad,valorSinImpuesto:a.data.valorSinImpuesto,valorConInpuesto:a.data.valorConInpuesto,cluster_id:a.data.cluster_id,componente_id:a.data.componente_id,operacion_id:a.data.operacion_id}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({id:"",servicio:"",cantidad:0,valorSinImpuesto:0,valorConInpuesto:"",cluster_id:"",componente_id:"",operacion_id:"",action:!0,error:{},Mensaje:!1})}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/ListdetallePresupuesto/"+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&(this.setState({datos:a.data}),0===this.state.datos.data.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.data.length?r.a.createElement(ca,{datos:this.state.datos,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"getcluster",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/clusters/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Cluster:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getComponente",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/componentes/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({componentes:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getOperacion",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/operacions/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({operacions:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getProyectos",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.cluster_id>0&&this.state.componente_id>0&&this.state.operacion_id>0)){e.next=14;break}return this.setState({msgProye:"Buscando",Proyectos:[]}),e.prev=2,e.next=5,ve()({url:be.endpoint+"/proyecto/f/?periodo_id=1&cluster_id="+this.state.cluster_id+"&componente_id="+this.state.componente_id+"&operacion_id="+this.state.operacion_id,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 5:200===(t=e.sent).status&&(t.data.length>0?this.setState({msgProye:"seleccion\xe9 ",Proyectos:t.data}):this.setState({msgProye:"Esta llave no tiene presupuesto.",Proyectos:[]})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.getError(e.t0.response);case 12:e.next=15;break;case 14:this.setState({msgProye:"seleccion\xe9 los campos requeridos",Proyectos:[]});case 15:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"listCluster",value:function(){return this.state.Cluster.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listComponente",value:function(){return this.state.componentes.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listOperation",value:function(){return this.state.operacions.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listProyecto",value:function(){return this.state.Proyectos.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.Mensaje?r.a.createElement(ba.a,null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:6,sm:3},r.a.createElement("b",null,"Total presupuesto:")," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.state.DatosPresupuesto.TotalPresupuesto)),r.a.createElement(Et.a,{item:!0,xs:6,sm:3},r.a.createElement("b",null,"Total comprometido:")," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL"}).format(this.state.DatosPresupuesto.comprometido)),r.a.createElement(Et.a,{item:!0,xs:6,sm:3},r.a.createElement("b",null,"Total gasto:"),new Intl.NumberFormat("COL",{style:"currency",currency:"COL"}).format(this.state.DatosPresupuesto.gasto)),r.a.createElement(Et.a,{item:!0,xs:6,sm:3},r.a.createElement("b",null,"Dinero disponible:")," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL"}).format(this.state.DatosPresupuesto.disponible)))):"",r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.servicio,label:this.state.error.servicio?this.state.error.servicio[0]:"Productos o servicios Requeridos",value:this.state.servicio,placeholder:"Productos o servicios Requeridos",ref:"servicio",name:"servicio",onChange:function(t){return e.syncField(t,"servicio")},fullWidth:!0}),r.a.createElement(ua.a,{htmlFor:"Cluster"},this.state.error.cluster?this.state.error.cluster[0]:"Cluster"),r.a.createElement(ma.a,{error:!!this.state.error.cluster,fullWidth:!0,value:this.state.cluster_id,onChange:function(t){return e.syncField(t,"cluster_id")},inputProps:{name:"Cluster",id:"Cluster"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listCluster()),r.a.createElement(ua.a,{htmlFor:"Componente"},this.state.error.componente?this.state.error.componente[0]:"componente"),r.a.createElement(ma.a,{error:!!this.state.error.componente,fullWidth:!0,value:this.state.componente_id,onChange:function(t){return e.syncField(t,"componente_id")},inputProps:{name:"Componente",id:"Componente"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listComponente())),r.a.createElement(Et.a,{item:!0,xs:12,sm:3},r.a.createElement(ua.a,{htmlFor:"operacion"},this.state.error.operacion?this.state.error.operacion[0]:"Centro de operaci\xf2n"),r.a.createElement(ma.a,{error:!!this.state.error.operacion,fullWidth:!0,value:this.state.operacion_id,onChange:function(t){return e.syncField(t,"operacion_id")},inputProps:{name:"operacion",id:"operacion"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listOperation()),r.a.createElement(ua.a,{htmlFor:"proyecto"},this.state.error.proyecto?this.state.error.proyecto[0]:"Concepto"),r.a.createElement(ma.a,{error:!!this.state.error.proyecto,fullWidth:!0,value:this.state.proyecto_id,onFocus:function(t){return e.getProyectos()},onChange:function(t){return e.syncField(t,"proyecto_id")},inputProps:{name:"proyecto",id:"proyecto"}},r.a.createElement(M.a,null,r.a.createElement("em",null," ",this.state.msgProye)),this.listProyecto())),r.a.createElement(Et.a,{item:!0,xs:12,sm:3},r.a.createElement(he.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad",fullWidth:!0,placeholder:"Cantidad",value:this.state.cantidad,ref:"cantidad",name:"cantidad",onChange:function(t){return e.syncField(t,"cantidad")}}),r.a.createElement(he.a,{error:!!this.state.error.valorConInpuesto,label:this.state.error.valorConInpuesto?this.state.error.valorConInpuesto[0]:"Total con impuestos",placeholder:"Valor con con impuestos",value:this.state.valorConInpuesto,onChange:function(t){return e.syncField(t,"valorConInpuesto")},id:"formatted-numberformat-input",fullWidth:!0,InputProps:{inputComponent:fa}}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),ga=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Ea),ya=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,{component:"th",scope:"row"},t.Especificacion),r.a.createElement(Ot.a,{numeric:!0},t.cantidad),r.a.createElement(Ot.a,null,t.observaciones),e.props.action?r.a.createElement(Ot.a,null,r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),r.a.createElement(ia.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):r.a.createElement(Ot.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Especificaci\xf2n"),r.a.createElement(Ot.a,{numeric:!0},"Cantidad"),r.a.createElement(Ot.a,null,"Observaciones"),this.props.action?r.a.createElement(Ot.a,null,"Acciones"):r.a.createElement(Ot.a,null))),r.a.createElement(Ct.a,null,this.getMapData())))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var Sa=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getidreferenceterms(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/referenceterms",data:{Especificacion:a.state.Especificacion,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,Especificacion:"",observaciones:"",cantidad:0}),a.componentDidMount(),a.props.msgbn("Datos registrados correctamente.")}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"PUT",url:be.endpoint+"/referenceterms/"+a.state.id,data:{Especificacion:a.state.Especificacion,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,action:!0,id:"",Especificacion:"",observaciones:"",cantidad:0}),a.setState({canSubmit:!0,action:!0,id:"",Especificacion:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){ve()({method:"DELETE",url:be.endpoint+"/referenceterms/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.componentDidMount()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",Especificacion:"",observaciones:"",cantidad:0,datos:[],action:!0,msg:{estado:!1,msg:"",tipo:""},error:{},canSubmit:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.compra.id),this.props.btns(!0),this.props.CanNext(!1)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/listreferenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({datos:a.data}),0===this.state.datos.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.length?r.a.createElement(ya,{datos:this.state.datos,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"getidreferenceterms",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/referenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({canSubmit:!0,action:!1,id:a.data.id,Especificacion:a.data.Especificacion,observaciones:a.data.observaciones,cantidad:a.data.cantidad}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:6,sm:3},r.a.createElement(he.a,{error:!!this.state.error.Especificacion,label:this.state.error.Especificacion?this.state.error.Especificacion[0]:"Especificacion",placeholder:"Especificacion",ref:"nameCompra",name:"nameCompra",onChange:function(t){return e.syncField(t,"Especificacion")},value:this.state.Especificacion,fullWidth:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.observaciones,label:this.state.error.observaciones?this.state.error.observaciones[0]:"Observaciones",placeholder:"Expecificar Observaciones",ref:"observaciones",name:"observaciones",onChange:function(t){return e.syncField(t,"observaciones")},value:this.state.observaciones,fullWidth:!0,multiline:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:3,sm:1},r.a.createElement(he.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad",placeholder:"Cantidad",value:this.state.cantidad,ref:"cantidad",name:"cantidad",onChange:function(t){return e.syncField(t,"cantidad")},margin:"normal"}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),Ca=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Sa),ka=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,{component:"th",scope:"row"},t.producto),r.a.createElement(Ot.a,{numeric:!0},t.cantidad),r.a.createElement(Ot.a,null,t.observaciones),e.props.action?r.a.createElement(Ot.a,null,r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),r.a.createElement(ia.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):r.a.createElement(Ot.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Producto o servicio"),r.a.createElement(Ot.a,{numeric:!0},"Cantidad"),r.a.createElement(Ot.a,null,"Observaciones"),this.props.action?r.a.createElement(Ot.a,null,"Acciones"):r.a.createElement(Ot.a,null))),r.a.createElement(Ct.a,null,this.getMapData())))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var Oa=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getConsultarPorid(e)},a.onEliminar=function(e){ve()({method:"DELETE",url:be.endpoint+"/entregables/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,action:!0,producto:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/entregables",data:{producto:a.state.producto,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,action:!0,producto:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.getError(e.response),a.setState({canSubmit:!0})})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"PUT",url:be.endpoint+"/entregables/"+a.state.id,data:{producto:a.state.producto,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!0,canSubmit:!0,producto:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.getError(e.response),a.setState({canSubmit:!0})})},a.state={id:"",producto:"",observaciones:"",cantidad:0,referenceterm:[],action:!0,error:{},msg:{estado:!1,msg:"",tipo:""},canSubmit:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.compra.id),this.props.btns(!0),this.props.CanNext(!1)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/listEntregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({referenceterm:a.data}),0===this.state.referenceterm.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getConsultarPorid",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/entregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({canSubmit:!0,action:!1,id:a.data.id,producto:a.data.producto,observaciones:a.data.observaciones,cantidad:a.data.cantidad}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.referenceterm.length?r.a.createElement(ka,{datos:this.state.referenceterm,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:6,sm:3},r.a.createElement(he.a,{error:!!this.state.error.producto,label:this.state.error.producto?this.state.error.producto[0]:"producto o servicio ",placeholder:"producto o servicio ",ref:"producto",name:"producto",onChange:function(t){return e.syncField(t,"producto")},value:this.state.producto,fullWidth:!0,multiline:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.observaciones,label:this.state.error.observaciones?this.state.error.observaciones[0]:"Observaciones ",placeholder:"Expecificar Observaciones",ref:"observaciones",name:"observaciones",onChange:function(t){return e.syncField(t,"observaciones")},value:this.state.observaciones,fullWidth:!0,multiline:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:3,sm:1},r.a.createElement(he.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad ",placeholder:"Cantidad",ref:"Cantidad",name:"Cantidad",onChange:function(t){return e.syncField(t,"cantidad")},value:this.state.cantidad,fullWidth:!1,multiline:!0,margin:"normal"}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),Aa=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Oa),ja=a(269),xa=a.n(ja),Da={tableWrapper:{overflowX:"auto"}};var Pa=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentWillReceiveProps",value:function(){this.props.actualizar()}},{key:"getMapData",value:function(){return this.props.datos?this.props.datos.data.map(function(e){return r.a.createElement(Dt.a,{key:e.id},r.a.createElement(Ot.a,null,e.servicio),r.a.createElement(Ot.a,null,e.componenteName),r.a.createElement(Ot.a,null,e.clusterName),r.a.createElement(Ot.a,null,e.proyectoName),r.a.createElement(Ot.a,null,e.operacionName),r.a.createElement(Ot.a,null,e.cantidad),r.a.createElement(Ot.a,null,r.a.createElement(xa.a,{disableFocusListener:!0,disableTouchListener:!0,title:e.porcentaje},r.a.createElement("p",null," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.valorPresupuesto)))),r.a.createElement(Ot.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.totalPago)))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:Da.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Servicio"),r.a.createElement(Ot.a,null,"Componente"),r.a.createElement(Ot.a,null,"Cluster"),r.a.createElement(Ot.a,null,"Concepto"),r.a.createElement(Ot.a,null,"Centro de operaci\xf2n"),r.a.createElement(Ot.a,null,"Cantidad"),r.a.createElement(Ot.a,null,"$Valor presupuesto"),r.a.createElement(Ot.a,null,"$Gasto"))),r.a.createElement(Ct.a,null,this.getMapData(),r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,{rowSpan:3}),r.a.createElement(Ot.a,{colSpan:5},"Totales"),r.a.createElement(Ot.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalPresupuestado)),r.a.createElement(Ot.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalCompra))),r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,{rowSpan:4}),r.a.createElement(Ot.a,{colSpan:4},"Ahorro"),r.a.createElement(Ot.a,{align:"right"}),r.a.createElement(Ot.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalPresupuestado-this.props.datos.TotalCompra)))))))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),wa=Object(c.b)(function(e){return{userAcceso:e.userAcceso,compra:e.compra}})(Pa);var Fa=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={user:{},entregables:[],TerminosReferencia:[],presupuesto:{data:[]},presupuestoAfect:{data:[]},fechaSolicitud:"",FechaInicio:"",FechaFin:""},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getUser(this.props.COMPRADATA.user_id),this.getentregables(this.props.COMPRADATA.id),this.getTerminos(this.props.COMPRADATA.id),this.getPresupuesto(this.props.COMPRADATA.id);var e=new Date(this.props.COMPRADATA.created_at).toLocaleDateString();this.setState({fechaSolicitud:e,FechaInicio:new Date(this.props.COMPRADATA.FechaInicio).toLocaleDateString(),FechaFin:new Date(this.props.COMPRADATA.FechaFin).toLocaleDateString()})}},{key:"getUser",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/users/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status?0!==a.data.length?this.setState({user:a.data}):this.setState({estado:!1}):a.status,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getentregables",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/listEntregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({entregables:a.data}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getTerminos",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/listreferenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({TerminosReferencia:a.data}),0===this.state.datos.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getPresupuesto",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/ListdetallePresupuesto/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({presupuesto:a.data}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"lispresupuestoAfect",value:function(){return 0!==this.props.presupuestoAfect.data.length?r.a.createElement(wa,{datos:this.props.presupuestoAfect}):"Error no tenemos presupuesto no se puede continuar..."}},{key:"listData",value:function(){return 0!==this.state.presupuesto.data.length?r.a.createElement(ca,{datos:this.state.presupuesto}):"Error no tenemos presupuesto no se puede continuar..."}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement("p",null,"1. Datos Solicitante")),r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Fecha de solicitud:   "),this.state.fechaSolicitud),r.a.createElement("p",null,r.a.createElement("b",null,"Solicitante :")," ",this.state.user.name,"   ",this.state.user.apellido),r.a.createElement("p",null,r.a.createElement("b",null,"Cargo:")," ",this.state.user.cargo),r.a.createElement("p",null,r.a.createElement("b",null,"Direcci\xf2n :")," ",this.state.user.direccion)),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Identificaci\xf2n:")," ",this.state.user.documento),r.a.createElement("p",null,r.a.createElement("b",null,"E-mail:")," ",this.state.user.email))),r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement("p",null,"2. Datos General de compra")),r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:12},r.a.createElement("p",null,r.a.createElement("b",null,"Bien o Servicio a Contratar:")," ",this.props.COMPRADATA.NombreCompra),r.a.createElement("p",null,r.a.createElement("b",null,"Objeto:")," ",this.props.COMPRADATA.objetivo)),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Fecha de Inicio:")," ",this.state.FechaInicio),r.a.createElement("p",null,r.a.createElement("b",null,"Fecha de Fin:")," ",this.state.FechaFin)),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Plazo de ejecuci\xf2n:")," ",this.state.FechaInicio-this.state.FechaFin),r.a.createElement("p",null,r.a.createElement("b",null,"D\xecas para el Inicio:")," ",this.props.COMPRADATA.FechaInicio))),3===this.props.COMPRADATA.EstadoAction?r.a.createElement("div",null," ",r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement("p",null,"3. Presupuesto afectado.")," "),this.lispresupuestoAfect()," ",r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement("p",null,"3. Presupuesto Disponible.")," "),this.listData()," ",r.a.createElement("br",null)),r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement("p",null,"4. Terminos de referencia")),r.a.createElement(ya,{datos:this.state.TerminosReferencia,action:!1}),r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement("p",null,"5. Entragables")),r.a.createElement(ka,{datos:this.state.entregables}))}}]),t}(r.a.Component),_a=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Fa),Na=a(39),Ia=a.n(Na);function Ta(e){var t=e.children;return r.a.createElement("div",{style:{padding:24}},t)}var Ra={cont:{display:"flex",justifyContent:"center"}},Ma=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleReset=function(){a.setState({activeStep:0})},a.compra=function(e){a.setState(function(t){return{compra:e}})},a.useradd=function(e){a.setState(function(t){return{user:e}}),a.handleNext()},a.CanNext=function(e){a.setState({canNext:e})},a.btns=function(e){a.setState({stateBtn:e})},a.msgbn=function(e){a.setState({open:!0,msgMo:e})},a.Publicar=function(){a.getPublicar()},a.state={activeStep:0,compra:{},user:{id:0},open:!1,msgMo:"",peridoPresupuesto:{},Tipo:"success",error:{},canNext:!0,stateBtn:!0},a.handleNext=a.handleNext.bind(Object(Be.a)(Object(Be.a)(a))),a.handleBack=a.handleBack.bind(Object(Be.a)(Object(Be.a)(a))),a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getSteps",value:function(){return[this.state.user.id?"Solicitante: "+this.state.user.name+" "+this.state.user.apellido:"Datos Solicitante ","Datos generales de compra","Presupuesto","Terminos de referencia.","Entregables"]}},{key:"componentDidMount",value:function(){this.ValidarPresupuesto()}},{key:"getStepContent",value:function(e){switch(e){case 0:return r.a.createElement(ta,{btns:this.btns,USER:this.useradd,userData:this.state.user,compra:this.state.compra,compraData:this.compra});case 1:return this.state.user.id?r.a.createElement(ra,{handleBack:this.handleBack,handleNext:this.handleNext,compra:this.state.compra,compraData:this.compra,msgbn:this.msgbn,btns:this.btns,user:this.state.user}):"Error se requiere un persona que sea responsable de esta compra";case 2:return r.a.createElement(ga,{periodo:this.state.peridoPresupuesto,compra:this.state.compra,msgbn:this.msgbn,CanNext:this.CanNext,btns:this.btns});case 3:return r.a.createElement(Ca,{compra:this.state.compra,msgbn:this.msgbn,CanNext:this.CanNext,btns:this.btns});case 4:return r.a.createElement(Aa,{compra:this.state.compra,msgbn:this.msgbn,CanNext:this.CanNext,btns:this.btns});default:return r.a.createElement(vt,null)}}}]),Object(S.a)(t,[{key:"ValidarPresupuesto",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/Presupuesto",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:t=e.sent,this.setState({peridoPresupuesto:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),401===e.t0.response.status&&this.setState({error:{error:!0,menssage:e.t0.response.data.errors}});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getPublicar",value:function(){var e=Object(De.a)(xe.a.mark(function e(){return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/publicar/"+this.state.compra.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:this.Redirigir(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"Redirigir",value:function(){this.props.history.push("/propuesta/"+this.state.compra.id+"?R")}},{key:"render",value:function(){var e=this.props.classes,t=this.getSteps(),a=this.state.activeStep;return this.state.peridoPresupuesto.id?r.a.createElement(Ta,null,r.a.createElement(Ke.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(vt,{onClose:this.handleClose,variant:this.state.Tipo,message:this.state.msgMo})),r.a.createElement("p",null,"Presupuesto: ",this.state.peridoPresupuesto.nombre),r.a.createElement(Ge.a,{activeStep:a,alternativeLabel:!0},t.map(function(e){return r.a.createElement(Xe.a,{key:e},r.a.createElement($e.a,null,e))})),r.a.createElement("div",{className:e.toolbar},this.state.activeStep===t.length?r.a.createElement("div",null,r.a.createElement(F.a,{className:e.instructions}," Por favor revisar si todo se encuentra Bien de lo contrario corregir."),r.a.createElement(_a,{COMPRADATA:this.state.compra}),r.a.createElement("div",{className:e.cont},r.a.createElement(te.a,{onClick:this.handleReset},"Volver"),r.a.createElement(te.a,{variant:"contained",color:"primary",onClick:this.Publicar},"Confirmar"))):!0===this.state.stateBtn?r.a.createElement("div",null,r.a.createElement("div",null,this.getStepContent(a)),r.a.createElement("div",{className:e.cont},r.a.createElement(te.a,{disabled:0===a,onClick:this.handleBack,className:e.backButton},"anterior"),r.a.createElement(te.a,{disabled:!this.state.canNext,variant:"contained",color:"primary",onClick:this.handleNext},a===t.length-1?"Revisar":"Siguiente"))):r.a.createElement("div",null,this.getStepContent(a)))):this.state.error.error?r.a.createElement("div",{style:Ra.cont},this.state.error.menssage):r.a.createElement("div",{style:Ra.cont}," ",r.a.createElement(Ia.a,{className:e.progress,color:"secondary"}))}}]),t}(r.a.Component),za=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{width:"98%"},cont:{display:"flex",justifyContent:"center"},content:{flexGrow:1,padding:3*e.spacing.unit},toolbar:e.mixins.toolbar}})(Ma)),Wa=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"acccion",value:function(){switch(this.props.estado){case 0:return r.a.createElement("p",null,"Registrada");case 1:return r.a.createElement("p",null,"Anulada");case 2:return r.a.createElement("p",null,"Resive propuestas");case 3:return r.a.createElement("p",null,"Aprobada");case 4:return r.a.createElement("p",null,"Esperando Aprobaci\xf2n- cerrada ");default:return r.a.createElement("p",null,"Error")}}},{key:"render",value:function(){return this.acccion()}}]),t}(r.a.Component),La=a(40),Ua=a.n(La),Ba={tableWrapper:{overflowX:"auto"}};var Va=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handlePageChange=function(e){a.setState({activePage:e}),a.getComprasFull(e)},a.state={value:0,user:{},dataCompra:{data:[]},activePage:1,totalItemsCount:0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getComprasFull(1)}},{key:"getComprasPersonTipe",value:function(){var e=Object(De.a)(xe.a.mark(function e(t,a){var n;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/compras/"+t+"/"+a,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:n=e.sent,this.setState({dataCompra:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getComprasFull",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/compras/?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:a=e.sent,this.setState({dataCompra:a.data,totalItemsCount:a.data.total}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"compraLink",value:function(e){this.props.history.push("/propuesta/"+e)}},{key:"getMapData",value:function(){var e=this;return this.state.dataCompra.data.length>0?this.state.dataCompra.data.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,null," ",t.id," "),r.a.createElement(Ot.a,null," ",t.NombreCompra),r.a.createElement(Ot.a,null,t.objetivo),r.a.createElement(Ot.a,null,t.updated_at),r.a.createElement(Ot.a,null,r.a.createElement(Wa,{estado:t.EstadoAction})),r.a.createElement(Ot.a,null,r.a.createElement(_t.a,{variant:"contained",color:"primary",onClick:function(){return e.compraLink(t.id)}},"visibility")))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:Ba.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"N\xba Compra"),r.a.createElement(Ot.a,null,"Nombre Compra"),r.a.createElement(Ot.a,null,"Objetivo"),r.a.createElement(Ot.a,null,"Fecha de Creaci\xf2n"),r.a.createElement(Ot.a,null,"Estado"),r.a.createElement(Ot.a,null,"Acciones"))),r.a.createElement(Ct.a,null,this.getMapData())),this.state.dataCompra.data.length>0?r.a.createElement(Ua.a,{activePage:this.state.activePage,itemsCountPerPage:10,totalItemsCount:this.state.totalItemsCount,pageRangeDisplayed:5,onChange:this.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),Ga=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Va),qa=a(271),Xa=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"chart"},r.a.createElement(qa.a,{data:this.props.chartData,options:{title:{display:this.props.displayTitle,text:"Presupuesto "+this.props.location,fontSize:25},legend:{display:this.props.displayLegend,position:this.props.legendPosition}}}))}}]),t}(n.Component);Xa.defaultProps={displayTitle:!0,displayLegend:!1,legendPosition:"right",location:"Dividendo por colombia"};var Ha=Xa;var $a=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handlePageChange=function(e){a.getProyectos(e),a.setState({activePage:e})},a.state={Proyectos:{data:[]},proyecto_id:"",pageNumber:1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getProyectos(this.state.pageNumber)}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.props.setproyecto(n)}},{key:"getProyectos",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/proyectos?page="+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({Proyectos:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listProyecto",value:function(){return this.state.Proyectos.data.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"validarValue",value:function(e){return""!==e&&0===this.state.Proyectos.data.filter(function(t){return t.id===e}).length&&this.state.Proyectos.data.push(this.props.DatoSelect),e}},{key:"render",value:function(){var e=this;return r.a.createElement(ma.a,{error:!!this.props.error.proyecto,fullWidth:!0,value:this.validarValue(this.props.value),onChange:function(t){return e.syncField(t,"proyecto_id")},inputProps:{name:"proyecto",id:"proyecto"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listProyecto(),this.state.Proyectos.data.length>0?r.a.createElement(Ua.a,{activePage:this.state.activePage,itemsCountPerPage:10,totalItemsCount:this.state.Proyectos.total,pageRangeDisplayed:5,onChange:this.handlePageChange}):"")}}]),t}(r.a.Component),Ja=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})($a),Ka={cont:{display:"flex",justifyContent:"center"}};var Qa=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).setproyecto=function(e){a.setState(e)},a.state={chartData:{},cluster_id:"",componente_id:"",operacion_id:"",proyecto_id:"",componentes:[],operacions:[],Cluster:[],Proyectos:[],error:{},mostrar:!1,message:!1,msg:"",canSubmit:!0,action:!0,labels:["Presupuesto","Comprometido","gasto","Disponible"],datasets:[]},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){this.getcluster(),this.getComponente(),this.getOperacion()}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getcluster",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/clusters/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Cluster:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getComponente",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/componentes/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({componentes:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getOperacion",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/operacions/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({operacions:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"listCluster",value:function(){return this.state.Cluster.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listComponente",value:function(){return this.state.componentes.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listOperation",value:function(){return this.state.operacions.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listProyecto",value:function(){return this.state.Proyectos.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"data",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({action:!1}),e.prev=1,e.next=4,ve()({url:be.endpoint+"/presupuestoData/?cluster_id="+this.state.cluster_id+"&componente_id="+this.state.componente_id+"&operacion_id="+this.state.operacion_id+"&proyecto_id="+this.state.proyecto_id+"&periodo_id=1",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 4:200===(t=e.sent).status&&this.setState({titulo:"Dividendo por colombia",labels:["Presupuesto  "+t.data.TotalPresupuesto,"Comprometido "+t.data.comprometido,"Gasto "+t.data.gasto,"Disponible "+t.data.disponible],datasets:[{label:"Dinero",data:[t.data.TotalPresupuesto,t.data.comprometido,t.data.gasto,t.data.disponible],backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(255, 99, 132, 0.6)","rgba(255, 206, 86, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 99, 132, 0.6)"]}]}),this.setState({action:!0}),200===t.status?this.setState({mostrar:!0,message:!1,msg:""}):203===t.status&&this.setState({mostrar:!1,message:!0,msg:t.data.Error}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),this.setState({action:!0,mostrar:!1}),this.getError(e.t0.response);case 14:case"end":return e.stop()}},e,this,[[1,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},this.state.message?r.a.createElement("p",{style:{color:"red"}}," ",this.state.msg):""),r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(ua.a,{htmlFor:"Cluster"},this.state.error.cluster?this.state.error.cluster[0]:"Cluster"),r.a.createElement(ma.a,{error:!!this.state.error.cluster,fullWidth:!0,value:this.state.cluster_id,onChange:function(t){return e.syncField(t,"cluster_id")},inputProps:{name:"Cluster",id:"Cluster"}},this.listCluster()),r.a.createElement(ua.a,{htmlFor:"Componente"},this.state.error.componente?this.state.error.componente[0]:"componente"),r.a.createElement(ma.a,{error:!!this.state.error.componente,fullWidth:!0,value:this.state.componente_id,onChange:function(t){return e.syncField(t,"componente_id")},inputProps:{name:"Componente",id:"Componente"}},this.listComponente())),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(ua.a,{htmlFor:"operacion"},this.state.error.operacion?this.state.error.operacion[0]:"Centro de operaci\xf2n"),r.a.createElement(ma.a,{error:!!this.state.error.operacion,fullWidth:!0,value:this.state.operacion_id,onChange:function(t){return e.syncField(t,"operacion_id")},inputProps:{name:"operacion",id:"operacion"}},this.listOperation()),r.a.createElement(ua.a,{htmlFor:"proyecto"},this.state.error.proyecto?this.state.error.proyecto[0]:"concepto"),r.a.createElement(Ja,{error:this.state.error,setproyecto:this.setproyecto,value:this.state.proyecto_id,DatoSelect:{id:this.state.proyecto_id,nombre:this.state.nombreProyecto}}))),r.a.createElement(te.a,{variant:"contained",disabled:!this.state.canSubmit,color:"primary",onClick:function(t){return e.data()}}," Generar reporte "),this.state.mostrar?this.state.action?r.a.createElement(Ha,{chartData:{labels:this.state.labels,datasets:this.state.datasets},location:this.state.titulo,legendPosition:"bottom"}):r.a.createElement("div",{style:Ka.cont}," ",r.a.createElement(Ia.a,{color:"secondary"})):"")}}]),t}(r.a.Component),Ya=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Qa),Za=function(e){function t(){var e;return Object(y.a)(this,t),(e=Object(C.a)(this,Object(k.a)(t).call(this))).state={},e}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("h2",null,"Home ")),r.a.createElement(Ya,null))}}]),t}(r.a.Component),en=a(146),tn=a.n(en),an=a(273),nn=a.n(an),rn=a(41),on=a.n(rn),sn=a(174),cn=a.n(sn),ln={tableWrapper:{overflowX:"auto"}},un=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={value:0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.user.data.length>0?this.props.user.data.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,null," ",t.name," "),r.a.createElement(Ot.a,null,t.apellido),r.a.createElement(Ot.a,null,t.documento),r.a.createElement(Ot.a,null,"  ",t.email),r.a.createElement(Ot.a,null,"  ",t.cargo),r.a.createElement(Ot.a,null,"  ",t.direccion),r.a.createElement(Ot.a,null,"  ",t.rol),r.a.createElement(Ot.a,null," ",r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:ln.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Nombre"),r.a.createElement(Ot.a,null,"Apellido"),r.a.createElement(Ot.a,null,"Documento"),r.a.createElement(Ot.a,null,"Email"),r.a.createElement(Ot.a,null,"Cargo"),r.a.createElement(Ot.a,null,"Direccion"),r.a.createElement(Ot.a,null,"Rol"),r.a.createElement(Ot.a,null,"Acciones"))),r.a.createElement(Ct.a,null,this.getMapData())),this.props.user.data.length>0?r.a.createElement(Ua.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.user.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var pn=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/users",data:{name:a.state.name,apellido:a.state.apellido,email:a.state.email,rol:a.state.value,cargo:a.state.cargo,direccion:a.state.direccion,documento:a.state.documento},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.handleChange=function(e){a.setState({value:e.target.value})},a.handlePageChange=function(e){a.setState({activePage:e}),a.getdataUser(e)},a.modificar=function(e){a.clear(),a.getUser(e)},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/users/"+a.state.id,data:{name:a.state.name,apellido:a.state.apellido,email:a.state.email,rol:a.state.value,cargo:a.state.cargo,direccion:a.state.direccion,documento:a.state.documento},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={value:"User",name:"",apellido:"",email:"",rol:"",cargo:"",direccion:"",documento:"",error:{},activePage:1,user:{data:{}},msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getdataUser(1)}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getdataUser",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/userData?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({user:a.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/users/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({error:{},action:!1,id:a.data.id,name:a.data.name,apellido:a.data.apellido,email:a.data.email,value:a.data.rol,cargo:a.data.cargo,direccion:a.data.direccion,documento:a.data.documento}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,canSubmit:!0,value:"User",name:"",apellido:"",email:"",rol:"",cargo:"",direccion:"",documento:"",error:{}}),this.getdataUser(1)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.name,label:this.state.error.name?this.state.error.name[0]:"Nombre",value:this.state.name,placeholder:"Nombre Empresa",ref:"NombreEmpresa",name:"NombreEmpresa",onChange:function(t){return e.syncField(t,"name")},fullWidth:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.apellido,label:this.state.error.apellido?this.state.error.apellido[0]:"Apellido",placeholder:"Apellido",value:this.state.apellido,ref:"apellido",name:"apellido",onChange:function(t){return e.syncField(t,"apellido")},fullWidth:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.email,label:this.state.error.email?this.state.error.email[0]:"Email",placeholder:"Email example@dividendoporcolombia.org",value:this.state.email,ref:"email",name:"email",onChange:function(t){return e.syncField(t,"email")},fullWidth:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:12,sm:4},r.a.createElement(he.a,{error:!!this.state.error.documento,label:this.state.error.documento?this.state.error.documento[0]:"Documento",value:this.state.documento,placeholder:"Documento",ref:"documento",name:"documento",onChange:function(t){return e.syncField(t,"documento")},fullWidth:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.cargo,label:this.state.error.cargo?this.state.error.cargo[0]:"Cargo",placeholder:"cargo",value:this.state.cargo,ref:"direccion",name:"direccion",onChange:function(t){return e.syncField(t,"cargo")},fullWidth:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.direccion,label:this.state.error.direccion?this.state.error.direccion[0]:"Direcci\xf2n",placeholder:"Direccion",value:this.state.direccion,ref:"ciudad",name:"ciudad",onChange:function(t){return e.syncField(t,"direccion")},fullWidth:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:12,sm:2},r.a.createElement(cn.a,{component:"legend"},"Rol"),r.a.createElement(nn.a,{value:this.state.value,onChange:this.handleChange},r.a.createElement(on.a,{value:"User",control:r.a.createElement(tn.a,{color:"primary"}),label:"User",labelPlacement:"start"}),r.a.createElement(on.a,{value:"Colaborador",control:r.a.createElement(tn.a,{color:"primary"}),label:"Colaborador",labelPlacement:"start"}),r.a.createElement(on.a,{value:"Super-Admin",control:r.a.createElement(tn.a,{color:"primary"}),label:"Super-Admin",labelPlacement:"start"})))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),r.a.createElement(un,{user:this.state.user,handlePageChange:this.handlePageChange,activePage:this.state.activePage,modificar:this.modificar}))}}]),t}(r.a.Component),mn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(pn),dn=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement(mn,null)}}]),t}(r.a.Component),hn=a(708);var fn=Object(c.b)(function(e){return null!==e.userAcceso&&""!==e.userAcceso?{isAuthenticated:!0}:{isAuthenticated:!1}})(function(e){var t=e.component,a=e.isAuthenticated,n=Object(Y.a)(e,["component","isAuthenticated"]);return r.a.createElement(me.a,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(hn.a,{to:{pathname:"/login",state:{from:e.location}}})}}))});var vn=Object(c.b)(function(e){return null!==e.userAcceso&&""!==e.userAcceso&&"Super-Admin"===oe()(e.userAcceso).rol?{isAuthenticated:!0}:{isAuthenticated:!1}})(function(e){var t=e.component,a=e.isAuthenticated,n=Object(Y.a)(e,["component","isAuthenticated"]);return r.a.createElement(me.a,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(hn.a,{to:{pathname:"/home",state:{from:e.location}}})}}))}),bn={tableWrapper:{overflowX:"auto"}},En=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={value:0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos.data.length>0?this.props.datos.data.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,null," ",t.nombre," "),r.a.createElement(Ot.a,null," ",t.representate),r.a.createElement(Ot.a,null," ",t.nit),r.a.createElement(Ot.a,null," ",t.telefono),r.a.createElement(Ot.a,null," ",t.email),r.a.createElement(Ot.a,null," ",t.direccion),r.a.createElement(Ot.a,null," ",t.ciudad),r.a.createElement(Ot.a,null," ",r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),"  "))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:bn.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Nombre"),r.a.createElement(Ot.a,null,"representate"),r.a.createElement(Ot.a,null,"NIT"),r.a.createElement(Ot.a,null,"telefono"),r.a.createElement(Ot.a,null,"Email"),r.a.createElement(Ot.a,null,"Direccion"),r.a.createElement(Ot.a,null,"Ciudad"),r.a.createElement(Ot.a,null,"Acciones"))),r.a.createElement(Ct.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement(Ua.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var gn=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/empresas",data:{nombre:a.state.nombre,nit:a.state.nit,representate:a.state.representate,email:a.state.email,direccion:a.state.direccion,telefono:a.state.telefono,ciudad:a.state.ciudad},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){switch(a.clear(),a.props.father){case"propuesta":a.props.provedor(e.data),a.props.handleNext();break;default:a.props.handleNext()}}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.handlePageChange=function(e){a.setState({activePage:e}),a.getdataProvedor(e)},a.modificar=function(e){a.getprovedor(e)},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/empresas/"+a.state.id,data:{nombre:a.state.nombre,nit:a.state.nit,representate:a.state.representate,email:a.state.email,direccion:a.state.direccion,telefono:a.state.telefono,ciudad:a.state.ciudad},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={nombre:"",representate:"",email:"",telefono:"",nit:"",direccion:"",ciudad:"",error:{},provedores:{data:{}},activePage:1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.father||this.getdataProvedor(1)}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"clear",value:function(){this.setState({canSubmit:!0,action:!0,nombre:"",nit:"",representate:"",email:"",direccion:"",telefono:"",ciudad:""}),this.getdataProvedor(1)}},{key:"getdataProvedor",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/empresas?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({provedores:a.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getprovedor",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/empresas/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({error:{},action:!1,id:a.data.id,nombre:a.data.nombre,nit:a.data.nit,representate:a.data.representate,email:a.data.email,direccion:a.data.direccion,telefono:a.data.telefono,ciudad:a.data.ciudad}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre Empresa",value:this.state.nombre,placeholder:"Nombre Empresa",ref:"NombreEmpresa",name:"NombreEmpresa",onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.representate,label:this.state.error.representate?this.state.error.representate[0]:"Representante Legal",placeholder:"Representante Legal",value:this.state.representate,ref:"representate",name:"representate",onChange:function(t){return e.syncField(t,"representate")},fullWidth:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.telefono,label:this.state.error.telefono?this.state.error.telefono[0]:"Telefono",placeholder:"Telefono",value:this.state.telefono,ref:"telefono",name:"telefono",onChange:function(t){return e.syncField(t,"telefono")},fullWidth:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.email,label:this.state.error.email?this.state.error.email[0]:"Email contacto",placeholder:"Email contacto",value:this.state.email,ref:"email",name:"email",onChange:function(t){return e.syncField(t,"email")},fullWidth:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.nit,label:this.state.error.nit?this.state.error.nit[0]:"NIT",value:this.state.nit,placeholder:"NIT",ref:"nit",name:"nit",onChange:function(t){return e.syncField(t,"nit")},fullWidth:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.direccion,label:this.state.error.direccion?this.state.error.direccion[0]:"Direcci\xf3n",placeholder:"Direcci\xf3n",value:this.state.direccion,ref:"direccion",name:"direccion",onChange:function(t){return e.syncField(t,"direccion")},fullWidth:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.ciudad,label:this.state.error.ciudad?this.state.error.ciudad[0]:"Ciudad",placeholder:"Ciudad",value:this.state.ciudad,ref:"ciudad",name:"ciudad",onChange:function(t){return e.syncField(t,"ciudad")},fullWidth:!0,margin:"normal"}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.props.father?"":r.a.createElement(En,{datos:this.state.provedores,handlePageChange:this.handlePageChange,activePage:this.state.activePage,modificar:this.modificar}))}}]),t}(r.a.Component),yn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(gn),Sn=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"render",value:function(){return r.a.createElement(yn,null)}}]),t}(r.a.Component),Cn={tableWrapper:{overflowX:"auto"}},kn=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,null," ",t.nombre," "),r.a.createElement(Ot.a,null,t.activo?"activo":"No activo"),e.props.action?r.a.createElement(Ot.a,null,r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")):r.a.createElement(Ot.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:Cn.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Nombre "),r.a.createElement(Ot.a,null,"Estado"),this.props.action?r.a.createElement(Ot.a,null,"Acciones"):r.a.createElement(Ot.a,null))),r.a.createElement(Ct.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement(Ua.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),On=a(47),An=a.n(On);var jn=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getperiodo(e)},a.handlePageChange=function(e){a.setState({activePage:e}),a.getData(e)},a.updateStado=function(){a.setState({activo:!a.state.activo})},a.modificar=function(e){a.getcluster(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/clusters",data:{nombre:a.state.nombre,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/clusters/"+a.state.id,data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={datos:{data:[]},error:{},id:"",nombre:"",activo:!1,canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getData(1)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/admin/clusters?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({datos:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.data.length?r.a.createElement(kn,{handlePageChange:this.handlePageChange,datos:this.state.datos,modificar:this.modificar,activePage:this.state.activePage,action:!0}):""}},{key:"getcluster",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/clusters/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,nombre:a.data.nombre,activo:a.data.activo}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,id:"",nombre:"",activo:!1,error:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Admin Clusters"),r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre",placeholder:"Nombre ",value:this.state.nombre,onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0})),r.a.createElement(Et.a,{item:!0,xs:12,sm:3},r.a.createElement(ua.a,{htmlFor:"estado"},this.state.error.activo?this.state.error.activo[0]:"Estado "),r.a.createElement(on.a,{control:r.a.createElement(An.a,{checked:this.state.activo,onChange:function(t){return e.updateStado(t,"rta")},value:"activo"})}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),xn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(jn),Dn={tableWrapper:{overflowX:"auto"}},Pn=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,null," ",t.nombre," "),r.a.createElement(Ot.a,null,t.activo?"activo":"No activo"),e.props.action?r.a.createElement(Ot.a,null,r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")):r.a.createElement(Ot.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:Dn.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Nombre "),r.a.createElement(Ot.a,null,"Estado"),this.props.action?r.a.createElement(Ot.a,null,"Acciones"):r.a.createElement(Ot.a,null))),r.a.createElement(Ct.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement(Ua.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var wn=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getperiodo(e)},a.handlePageChange=function(e){a.setState({activePage:e}),a.getData(e)},a.updateStado=function(){a.setState({activo:!a.state.activo})},a.modificar=function(e){a.getProyectos(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/proyectos",data:{nombre:a.state.nombre,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/proyectos/"+a.state.id,data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={datos:{data:[]},error:{},id:"",nombre:"",activo:!1,canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getData(1)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/admin/proyectos?page="+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({datos:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.data.length?r.a.createElement(Pn,{datos:this.state.datos,modificar:this.modificar,handlePageChange:this.handlePageChange,activePage:this.state.activePage,action:!0}):""}},{key:"getProyectos",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/proyectos/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,nombre:a.data.nombre,activo:a.data.activo}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,id:"",nombre:"",activo:!1,error:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Admin conceptos"),r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre",placeholder:"Nombre ",value:this.state.nombre,onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0})),r.a.createElement(Et.a,{item:!0,xs:12,sm:3},r.a.createElement(ua.a,{htmlFor:"estado"},this.state.error.activo?this.state.error.activo[0]:"Estado "),r.a.createElement(on.a,{control:r.a.createElement(An.a,{checked:this.state.activo,onChange:function(t){return e.updateStado(t,"rta")},value:"activo"})}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),Fn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(wn),_n={tableWrapper:{overflowX:"auto"}},Nn=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,null," ",t.nombre," "),r.a.createElement(Ot.a,null,t.activo?"activo":"No activo"),e.props.action?r.a.createElement(Ot.a,null,r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")):r.a.createElement(Ot.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:_n.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Nombre "),r.a.createElement(Ot.a,null,"Estado"),this.props.action?r.a.createElement(Ot.a,null,"Acciones"):r.a.createElement(Ot.a,null))),r.a.createElement(Ct.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement(Ua.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var In=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getperiodo(e)},a.handlePageChange=function(e){a.setState({activePage:e}),a.getData(e)},a.updateStado=function(){a.setState({activo:!a.state.activo})},a.modificar=function(e){a.getcomponentes(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/componentes",data:{nombre:a.state.nombre,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/componentes/"+a.state.id,data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={datos:{data:[]},error:{},id:"",nombre:"",activo:!1,canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getData(1)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/admin/componentes?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({datos:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.data.length?r.a.createElement(Nn,{datos:this.state.datos,modificar:this.modificar,handlePageChange:this.handlePageChange,activePage:this.state.activePage,action:!0}):""}},{key:"getcomponentes",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/componentes/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,nombre:a.data.nombre,activo:a.data.activo}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,id:"",nombre:"",activo:!1,error:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Admin componentes"),r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre",placeholder:"Nombre ",value:this.state.nombre,onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0})),r.a.createElement(Et.a,{item:!0,xs:12,sm:3},r.a.createElement(ua.a,{htmlFor:"estado"},this.state.error.activo?this.state.error.activo[0]:"Estado "),r.a.createElement(on.a,{control:r.a.createElement(An.a,{checked:this.state.activo,onChange:function(t){return e.updateStado(t,"rta")},value:"activo"})}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),Tn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(In),Rn=a(275),Mn=a.n(Rn),zn=a(274),Wn=a.n(zn),Ln={avatar:{backgroundColor:Xt.a[100],color:Xt.a[600]}},Un=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.onClose()},a.actionRegister1=function(){a.props.actionRegister()},a.handleListItemClick=function(e){a.props.handleSelect(e)},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"mapdata",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleListItemClick(t)},key:t.id},r.a.createElement(zt.a,null,r.a.createElement(Rt.a,null,r.a.createElement("i",{class:"material-icons"}," account_balance "))),r.a.createElement(Lt.a,{primary:t.nombre+" - "+t.nit}))}):""}},{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.onClose,t.handleSelect,t.selectedValue,Object(Y.a)(t,["classes","onClose","handleSelect","selectedValue"]));return r.a.createElement(Gt.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},a),r.a.createElement(Bt.a,{id:"simple-dialog-title"},"Seleccione una empresa"),r.a.createElement("div",null,r.a.createElement(V.a,null,this.mapdata(),r.a.createElement(H.a,null,r.a.createElement(zt.a,{button:!0,onClick:function(){return e.actionRegister1()}},r.a.createElement(Rt.a,null,r.a.createElement(Wn.a,null))),r.a.createElement(te.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleClose()}},"Cancelar")))))}}]),t}(r.a.Component),Bn=Object(A.withStyles)(Ln)(Un);var Vn=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleSelect=function(e){a.setState({open:!1}),a.props.provedor(e),a.props.handleNext()},a.handleClose=function(e){a.setState({open:!1})},a.onSubmit=function(e){""!==a.state.nit?a.BuscarNit():a.FilterNombre()},a.BuscarNit=function(e){a.setState({canSubmit:!1}),ve()({method:"get",timeout:8e3,url:be.endpoint+"/empresa/search/"+a.state.nit,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?(a.setState({error:{nit:e.data.error}}),a.clear()):(a.props.provedor(e.data),a.props.handleNext())}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.FilterNombre=function(e){a.setState({canSubmit:!1}),ve()({method:"get",timeout:8e3,url:be.endpoint+"/empresa/search/?nombre="+a.state.nombre,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){0===e.data.length?(a.setState({error:{nombre:["No encontramos resultados"]}}),a.clear()):(a.setState({canSubmit:!0,empresas:e.data}),a.handleClickOpen())}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.actionRegister=function(e){a.setState({open:!1}),a.props.handleChangeasignar()},a.state={nit:"",nombre:"",empresas:[],msg:{estado:!1,msg:"",tipo:""},open:!1,error:{},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"clear",value:function(){this.setState({canSubmit:!0,nombre:"",nit:""})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre Empresa ",value:this.state.nombre,placeholder:"Busca por nombre de empresa",ref:"nombre",name:"nombre",onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.nit,label:this.state.error.nit?this.state.error.nit[0]:"NIT",value:this.state.nit,placeholder:"Busca por Nit",ref:"nit",name:"nit",onChange:function(t){return e.syncField(t,"nit")},fullWidth:!0,type:"number",margin:"normal"}))),r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"Buscar "),r.a.createElement(Bn,{actionRegister:this.actionRegister,selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,handleSelect:this.handleSelect,datos:this.state.empresas}))}}]),t}(r.a.Component),Gn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Vn);function qn(e){var t=e.children;return r.a.createElement("div",{style:{padding:24}},t)}var Xn=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={value:0},a.handleChangeasignar=function(){a.setState({value:1})},a.handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.siguienteUpdate(!1)}},{key:"render",value:function(){var e=this.props.theme;return r.a.createElement("div",null,r.a.createElement(wt.a,null,r.a.createElement(ke.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(Ae.a,{label:"Buscar"}),r.a.createElement(Ae.a,{label:"Registrar"}))),r.a.createElement(Se.a,{axis:"rtl"===e.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},r.a.createElement(qn,null,"Buscar Provedor",r.a.createElement(Gn,{handleChangeasignar:this.handleChangeasignar,father:"propuesta",handleNext:this.props.handleNext,provedor:this.props.provedor})),r.a.createElement(qn,null," Registrar Provedor",r.a.createElement(yn,{father:"propuesta",handleNext:this.props.handleNext,provedor:this.props.provedor}))))}}]),t}(r.a.Component),Hn=Object(A.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}},{withTheme:!0})(Xn);var $n=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/detallereferencetermclientes",data:{comentario:a.state.comentario,cumple:a.state.estado?1:0,empresa_id:a.props.provedor.id,referenceterm_id:a.props.datos.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/detallereferencetermclientes/"+a.state.id,data:{comentario:a.state.comentario,cumple:a.state.estado?1:0},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/detallereferencetermclientes/"+this.props.provedor.id+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({action:!1,id:t.data.id,comentario:t.data.comentario,estado:t.data.cumple}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this;return r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null," ",this.props.datos.Especificacion),r.a.createElement(Ot.a,null," ",this.props.datos.observaciones),r.a.createElement(Ot.a,null," ",this.props.datos.cantidad),r.a.createElement(Ot.a,null,"  ",r.a.createElement(he.a,{label:"Observaciones",value:this.state.comentario,placeholder:"Observaciones",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"comentario")},fullWidth:!0,margin:"normal",multiline:!0})),r.a.createElement(Ot.a,null,r.a.createElement(ua.a,{htmlFor:"estado"},this.state.estado?"SI":"NO"," "),r.a.createElement(on.a,{control:r.a.createElement(An.a,{checked:this.state.estado,onChange:function(t){return e.updateStado(t,"estado")},value:"activo"})})),this.state.canSubmit?this.state.action?r.a.createElement(_t.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"done_all"):r.a.createElement(_t.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar},"done_all"):r.a.createElement(Ia.a,{color:"secondary"}))}}]),t}(r.a.Component),Jn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})($n);var Kn=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.idEmpresa)}},{key:"componentWillReceiveProps",value:function(e){this.getData(e.idEmpresa)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/detallereferencetermclientes/"+t+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?this.setState({action:!1,id:a.data.id,comentario:a.data.comentario,estado:a.data.cumple}):this.setState({comentario:"",estado:!1}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){return r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null," ",this.props.datos.Especificacion),r.a.createElement(Ot.a,null," ",this.props.datos.observaciones),r.a.createElement(Ot.a,null," ",this.props.datos.cantidad),r.a.createElement(Ot.a,null," ",this.state.comentario," "),r.a.createElement(Ot.a,null," ",this.state.estado?"SI":"NO"," "))}}]),t}(r.a.Component),Qn=Object(c.b)(function(e){return{userAcceso:e.userAcceso,idEmpresa:e.propuesta.idEmpresa}})(Kn);var Yn={cont:{display:"flex",justifyContent:"center"},tableWrapper:{overflowX:"auto"}},Zn=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={datos:[],action:!0,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){null!=this.props.idCompra&&this.getData(this.props.idCompra)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/listreferenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({datos:a.data}),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"mapdata",value:function(){var e=this;return this.state.datos.length>0?this.props.form?this.state.datos.map(function(t,a){return r.a.createElement(Jn,{key:a,provedor:e.props.provedor,datos:t})}):this.state.datos.map(function(t,a){return r.a.createElement(Qn,{key:a,provedor:e.props.provedor,datos:t})}):r.a.createElement("div",{style:Yn.cont},"   ",r.a.createElement(Ia.a,{color:"primary"}),"  ")}},{key:"listData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:Yn.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Especificaci\xf2n "),r.a.createElement(Ot.a,null,"Observaciones "),r.a.createElement(Ot.a,{numeric:!0},"Cantidad"),r.a.createElement(Ot.a,null,"Observaciones"),r.a.createElement(Ot.a,null,"Cumple"))),r.a.createElement(Ct.a,null,this.mapdata()))))}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){return r.a.createElement("div",null,this.listData())}}]),t}(r.a.Component),er=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Zn);var tr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/detalleentregablesclientes",data:{comentario:a.state.comentario,cumple:a.state.estado?1:0,empresa_id:a.props.provedor.id,entregable_id:a.props.datos.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/detalleentregablesclientes/"+a.state.id,data:{comentario:a.state.comentario,cumple:a.state.estado?1:0},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/entregables/"+this.props.provedor.id+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({action:!1,id:t.data.id,comentario:t.data.comentario,estado:t.data.cumple}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this;return r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null," ",this.props.datos.producto),r.a.createElement(Ot.a,null," ",this.props.datos.observaciones),r.a.createElement(Ot.a,null," ",this.props.datos.cantidad),r.a.createElement(Ot.a,null,"  ",r.a.createElement(he.a,{label:"Observaciones",value:this.state.comentario,placeholder:"Observaciones",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"comentario")},fullWidth:!0,margin:"normal",multiline:!0})),r.a.createElement(Ot.a,null,r.a.createElement(ua.a,{htmlFor:"estado"},this.state.estado?"SI":"NO"," "),r.a.createElement(on.a,{control:r.a.createElement(An.a,{checked:this.state.estado,onChange:function(t){return e.updateStado(t,"estado")},value:"activo"})})),this.state.canSubmit?this.state.action?r.a.createElement(_t.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"done_all"):r.a.createElement(_t.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar},"done_all"):r.a.createElement(Ia.a,{color:"secondary"}))}}]),t}(r.a.Component),ar=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(tr);var nr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.idEmpresa)}},{key:"componentWillReceiveProps",value:function(e){this.getData(e.idEmpresa)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/entregables/"+t+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?this.setState({action:!1,id:a.data.id,comentario:a.data.comentario,estado:a.data.cumple}):this.setState({comentario:"",estado:!1}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null," ",this.props.datos.producto),r.a.createElement(Ot.a,null," ",this.props.datos.observaciones),r.a.createElement(Ot.a,null," ",this.props.datos.cantidad),r.a.createElement(Ot.a,null," ",this.state.comentario," "),r.a.createElement(Ot.a,null," ",this.state.estado?"SI":"NO"))}}]),t}(r.a.Component),rr=Object(c.b)(function(e){return{userAcceso:e.userAcceso,idEmpresa:e.propuesta.idEmpresa}})(nr);var or={cont:{display:"flex",justifyContent:"center"},tableWrapper:{overflowX:"auto"}},ir=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={datos:[],action:!0,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){null!=this.props.idCompra&&this.getData(this.props.idCompra)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/listEntregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({datos:a.data}),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"mapdata",value:function(){var e=this;return this.state.datos.length>0?this.props.form?this.state.datos.map(function(t,a){return r.a.createElement(ar,{key:a,provedor:e.props.provedor,datos:t})}):this.state.datos.map(function(t,a){return r.a.createElement(rr,{key:a,provedor:e.props.provedor,datos:t})}):r.a.createElement("div",{style:or.cont}," ",r.a.createElement(Ct.a,null," ",r.a.createElement(Ia.a,{color:"primary"}))," ")}},{key:"listData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:or.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Producto o servicio"),r.a.createElement(Ot.a,null,"Observaciones "),r.a.createElement(Ot.a,{numeric:!0},"Cantidad"),r.a.createElement(Ot.a,null,"Observaciones"),r.a.createElement(Ot.a,null,"Cumple"))),r.a.createElement(Ct.a,null,this.mapdata()))))}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){return r.a.createElement("div",null,this.listData())}}]),t}(r.a.Component),sr=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(ir);var cr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"POST",url:be.endpoint+"/proposals",data:{description:a.state.description,compra_id:a.props.compra.id,empresa_id:a.props.provedor.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.dataPropuesta(e.data),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),console.log("error")})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/proposals/"+a.state.id,data:{description:a.state.description},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.dataPropuesta(e.data),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),console.log("error")})},a.state={id:"",description:"",msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.getData(),this.props.updateSiguiente(!1)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/propuesta/"+this.props.provedor.id+"/"+this.props.compra.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status?(this.setState({action:!1,id:t.data.id,description:t.data.description}),this.props.propuesta(t.data)):t.status,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({canSubmit:!0,id:"",description:""})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement("p",null,"Por favor indique si tiene algun comentario en referencia al provedor registrado."),r.a.createElement(Et.a,{item:!0,xs:12,sm:12},r.a.createElement(he.a,{label:"Observaciones",value:this.state.description,placeholder:"Escribe las observaciones del provedor para esta compra",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"description")},fullWidth:!0,margin:"normal",multiline:!0,variant:"outlined"}))),r.a.createElement(te.a,{onClick:this.props.handleBack}," anterior "),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "))}}]),t}(r.a.Component),lr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(cr);var ur=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/detallepoliticas",data:{comentarios:a.state.comentarios,acepta:a.state.estado?1:0,politica_id:a.props.politica.id,proposal_id:a.props.propuesta.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentarios:e.data.comentarios,estado:e.data.acepta})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/detallepoliticas/"+a.state.id,data:{comentarios:a.state.comentarios,acepta:a.state.estado?1:0},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentarios:e.data.comentarios,estado:e.data.acepta})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/politica/"+this.props.politica.id+"/"+this.props.propuesta.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({action:!1,id:t.data.id,comentarios:t.data.comentarios,estado:t.data.acepta}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:12},this.props.politica.pregunta),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{label:"Observaciones",value:this.state.comentarios,placeholder:"Observaciones",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"comentarios")},fullWidth:!0,margin:"normal",multiline:!0})),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(ua.a,{htmlFor:"estado"},this.state.estado?"SI":"NO"," "),r.a.createElement(on.a,{control:r.a.createElement(An.a,{checked:this.state.estado,onChange:function(t){return e.updateStado(t,"estado")},value:"activo"})}),this.state.canSubmit?this.state.action?r.a.createElement(_t.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"done_all"):r.a.createElement(_t.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar},"done_all"):r.a.createElement(Ia.a,{color:"secondary"}))))}}]),t}(r.a.Component),pr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(ur);var mr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={id:"",comentarios:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getData(this.props.storePro)}},{key:"componentWillReceiveProps",value:function(e){this.getData(e.storePro)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/politica/"+this.props.politica.id+"/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?this.setState({id:a.data.id,comentarios:a.data.comentarios,estado:a.data.acepta}):this.setState({comentarios:"",estado:!1}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:12},this.props.politica.pregunta),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement("b",null,"Observaciones:")," ",this.state.comentarios),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement("b",null,this.state.estado?"SI":"NO")))}}]),t}(r.a.Component),dr=Object(c.b)(function(e){return{userAcceso:e.userAcceso,storePro:e.propuesta.id}})(mr);var hr={cont:{display:"flex",justifyContent:"center"}},fr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={politicas:[],msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.getPoliticas()}},{key:"getPoliticas",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/politicas",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({politicas:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"acciones",value:function(){return this.props.form?this.setListP():this.setListView()}},{key:"setListView",value:function(){var e=this;return this.state.politicas.length>0?this.state.politicas.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(dr,{politica:t,propuesta:e.props.propuesta})," ",r.a.createElement("br",null))}):r.a.createElement("div",{style:hr.cont},r.a.createElement(Ia.a,{color:"secondary"})," ")}},{key:"setListP",value:function(){var e=this;return this.state.politicas.length>0?this.state.politicas?this.state.politicas.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(pr,{politica:t,propuesta:e.props.propuesta})," ",r.a.createElement("br",null))}):void 0:r.a.createElement("div",{style:hr.cont},r.a.createElement(Ia.a,{color:"secondary"})," ")}},{key:"render",value:function(){return r.a.createElement("div",null," ",this.acciones())}}]),t}(r.a.Component),vr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(fr);var br=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).dataPropuesta=function(e){a.setState({propuesta:e,siguiente:!0})},a.handleNext=function(){3===a.state.activeStep?(a.props.handleNext(),a.props.propuesta(a.state.propuesta)):a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){0===a.state.activeStep?a.props.handleBack():a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleReset=function(){a.setState({activeStep:0})},a.updateSiguiente=function(e){a.setState({siguiente:e})},a.state={activeStep:0,propuesta:{},siguiente:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.siguienteUpdate(!1)}},{key:"action",value:function(){return this.props.compra.id>0?r.a.createElement("div",null,r.a.createElement("p",null,"Por favor indique si el provedor que se presenta cumple con los terminos establecidos. ",r.a.createElement("br",null),"No olvides guardar tus respuestas dando clik a cada ",r.a.createElement(_t.a,{variant:"contained",type:"submit"},"done_all")," "),r.a.createElement(er,{form:!0,provedor:this.props.provedor,idCompra:this.props.compra.id})):"Estamos comprobando.."}},{key:"entregables",value:function(){return this.props.compra.id>0?r.a.createElement("div",null,r.a.createElement("p",null,"Por favor indique si el provedor que se presenta cumple con los productos o entregables establecidos. ",r.a.createElement("br",null),"No olvides guardar tus respuestas dando clik a cada ",r.a.createElement(_t.a,{variant:"contained",type:"submit"},"done_all")," "),r.a.createElement(sr,{form:!0,provedor:this.props.provedor,idCompra:this.props.compra.id})):"Estamos comprobando.."}},{key:"getStepContent",value:function(e){switch(e){case 0:return r.a.createElement(lr,{updateSiguiente:this.updateSiguiente,handleBack:this.props.handleBack,handleNext:this.handleNext,dataPropuesta:this.dataPropuesta,compra:this.props.compra,provedor:this.props.provedor});case 1:return r.a.createElement("div",null,r.a.createElement("p",null,"Por favor Responda las siguientes preguntas y guarde sus respuestas dando clik en el ",r.a.createElement(_t.a,{variant:"contained",type:"submit"},"done_all")," "),r.a.createElement(vr,{form:!0,propuesta:this.state.propuesta}));case 2:return this.action();case 3:return this.entregables();default:return"Uknown stepIndex"}}},{key:"render",value:function(){var e=this.props.classes,t=["Crear Propuesta."," Conflictos de Inter\xe9s","Terminos de referencia","Productos o entregables"],a=this.state.activeStep;return r.a.createElement("div",null,r.a.createElement(Ge.a,{activeStep:a,alternativeLabel:!0},t.map(function(e){return r.a.createElement(Xe.a,{key:e},r.a.createElement($e.a,null,e))})),r.a.createElement("div",null,this.state.activeStep===t.length?r.a.createElement("div",null,r.a.createElement(F.a,{className:e.instructions},"All steps completed"),r.a.createElement(te.a,{onClick:this.handleReset},"Reset")):r.a.createElement("div",null,this.getStepContent(a),this.state.siguiente?r.a.createElement("div",{className:e.cont},r.a.createElement(te.a,{onClick:this.handleBack,className:e.backButton},"anterior"),r.a.createElement(te.a,{variant:"contained",color:"primary",onClick:this.handleNext},a===t.length-1?"Confirmar":"Siguiente")):"")))}}]),t}(r.a.Component),Er=Object(A.withStyles)(function(e){return{root:{width:"90%"},backButton:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit},cont:{display:"flex",justifyContent:"center"}}})(br),gr={tableWrapper:{overflowX:"auto"}},yr=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos.data.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,{component:"th",scope:"row"},t.producto),r.a.createElement(Ot.a,null,t.description),r.a.createElement(Ot.a,null,t.cantidad),r.a.createElement(Ot.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.precioSinImpusto)),r.a.createElement(Ot.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.precioConImpuesto)),e.props.action?r.a.createElement(Ot.a,null,r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),r.a.createElement(ia.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):r.a.createElement(Ot.a,null," "))})}},{key:"setData",value:function(){return this.props.datos.data.length>0?r.a.createElement("div",{style:gr.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Servicio o producto"),r.a.createElement(Ot.a,null,"Descripci\xf3n"),r.a.createElement(Ot.a,null,"Cantidad"),r.a.createElement(Ot.a,null,"$ valor con valor sin impuesto"),r.a.createElement(Ot.a,null,"$ valor con valor con impuesto"),this.props.action?r.a.createElement(Ot.a,null,"Acciones"):r.a.createElement(Ot.a,null))),r.a.createElement(Ct.a,null,this.getMapData(),r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,{rowSpan:3}),r.a.createElement(Ot.a,{colSpan:3},"Total propuesta"),r.a.createElement(Ot.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.total)))))):""}},{key:"render",value:function(){return r.a.createElement("div",null," ",this.setData()," ")}}]),t}(r.a.Component);function Sr(e){var t=e.inputRef,a=e.onChange,n=Object(Y.a)(e,["inputRef","onChange"]);return r.a.createElement(ha.a,Object.assign({},n,{getInputRef:t,onValueChange:function(e){a({target:{value:e.value}})},thousandSeparator:!0,prefix:"$"}))}var Cr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getDetallePropuesta(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"POST",url:be.endpoint+"/propuestaeconomicas",data:{producto:a.state.producto,cantidad:a.state.cantidad,description:a.state.description,precioSinImpusto:a.state.precioSinImpuesto,precioConImpuesto:a.state.precioConImpuesto,proposal_id:a.props.propuesta.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getDatos(a.props.propuesta.id),a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/propuestaeconomicas/"+a.state.id,data:{producto:a.state.producto,cantidad:a.state.cantidad,description:a.state.description,precioSinImpusto:a.state.precioSinImpuesto,precioConImpuesto:a.state.precioConImpuesto},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getDatos(a.props.propuesta.id),a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){ve()({method:"DELETE",url:be.endpoint+"/propuestaeconomicas/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getDatos(a.props.propuesta.id)}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",producto:"",Cantidad:0,descripcion:"",precioSinImpuesto:"",PrecioComImpuesto:"",propuestaeconomica:{data:[]},error:{},msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.props.propuesta.id>0&&this.getDatos(this.props.propuesta.id)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getDatos",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/propuestaCliente/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&(a.data.data.length>0?this.props.siguienteUpdate(!0):this.props.siguienteUpdate(!1),this.setState({propuestaeconomica:a.data})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getDetallePropuesta",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/propuestaeconomicas/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,producto:a.data.producto,cantidad:a.data.cantidad,description:a.data.description,precioSinImpuesto:a.data.precioSinImpusto,precioConImpuesto:a.data.precioConImpuesto}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({canSubmit:!0,action:!0,id:"",producto:"",cantidad:"",description:"",precioSinImpuesto:"",precioConImpuesto:"",proposal_id:"",error:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.producto,label:this.state.error.producto?this.state.error.producto[0]:"Producto",value:this.state.producto,placeholder:"Ingrese producto o servicio ",ref:"producto",name:"producto",onChange:function(t){return e.syncField(t,"producto")},fullWidth:!0,margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.description,label:this.state.error.description?this.state.error.description[0]:"Descripci\xf2n",value:this.state.description,placeholder:"Descripci\xf2n del producto",ref:"description",name:"description",onChange:function(t){return e.syncField(t,"description")},fullWidth:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.precioSinImpusto,label:this.state.error.precioSinImpusto?this.state.error.precioSinImpusto[0]:"Precio sin Iva",value:this.state.precioSinImpuesto,placeholder:"Precio sin impuestos ",ref:"precioSinImpuesto",name:"precioSinImpuesto",onChange:function(t){return e.syncField(t,"precioSinImpuesto")},fullWidth:!0,InputProps:{inputComponent:Sr},margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.precioConImpuesto,label:this.state.error.precioConImpuesto?this.state.error.precioConImpuesto[0]:"Precio con Impuesto",value:this.state.precioConImpuesto,placeholder:"Precio com impuesto",ref:"precioConImpuesto",name:"precioConImpuesto",onChange:function(t){return e.syncField(t,"precioConImpuesto")},fullWidth:!0,InputProps:{inputComponent:Sr},margin:"normal"}),r.a.createElement(he.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad",value:this.state.cantidad,placeholder:"Cantidad",ref:"cantidad",name:"cantidad",onChange:function(t){return e.syncField(t,"cantidad")},fullWidth:!0,margin:"normal"}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),r.a.createElement(yr,{modificar:this.modificar,onEliminar:this.onEliminar,datos:this.state.propuestaeconomica,action:!0}))}}]),t}(r.a.Component),kr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Cr);var Or=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleReset=function(){a.setState({activeStep:0})},a.provedor=function(e){a.setState({provedor:e})},a.propuesta=function(e){a.setState({propuesta:e})},a.siguienteUpdate=function(e){a.setState({siguiente:e})},a.state={siguiente:!1,siguiente1:!1,activeStep:0,provedor:{},propuesta:{}},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getSteps",value:function(){return[0===this.state.activeStep?"Buscar Provedor":this.state.provedor.nombre+" NIT: "+this.state.provedor.nit,2!==this.state.activeStep?"Politicas y servicios.":"Radicado propuesta #"+this.state.propuesta.id,"Propuesta economica"]}},{key:"getStepContent",value:function(e){switch(e){case 0:return r.a.createElement(Hn,{siguienteUpdate:this.siguienteUpdate,handleNext:this.handleNext,provedor:this.provedor});case 1:return r.a.createElement(Er,{siguienteUpdate:this.siguienteUpdate,propuesta:this.propuesta,provedor:this.state.provedor,compra:this.props.compra,handleBack:this.handleBack,handleNext:this.handleNext});case 2:return r.a.createElement(kr,{siguienteUpdate:this.siguienteUpdate,propuesta:this.state.propuesta});default:return"Unknown step"}}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.getSteps(),n=this.state.activeStep;return r.a.createElement("div",null,r.a.createElement(Ge.a,{activeStep:n,orientation:"vertical"},a.map(function(o,i){return r.a.createElement(Xe.a,{key:o},r.a.createElement($e.a,null,o),r.a.createElement(Mn.a,null,e.getStepContent(i),e.state.siguiente?r.a.createElement("div",{className:t.actionsContainer},r.a.createElement("div",null,r.a.createElement(te.a,{disabled:0===n,onClick:e.handleBack,className:t.button},"Volver a Propuesta"),r.a.createElement(te.a,{variant:"contained",color:"primary",onClick:e.handleReset,className:t.button},"Nuevo Registro"))):"",e.state.siguiente1?r.a.createElement("div",{className:t.actionsContainer},r.a.createElement("div",null,r.a.createElement(te.a,{disabled:0===n,onClick:e.handleBack,className:t.button},"Back"),r.a.createElement(te.a,{variant:"contained",color:"primary",onClick:e.handleNext,className:t.button},n===a.length-1?"Finish":"Next"))):""))})),n===a.length&&r.a.createElement(wt.a,{square:!0,elevation:0,className:t.resetContainer},r.a.createElement(F.a,null,"All steps completed - you're finished"),r.a.createElement(te.a,{onClick:this.handleReset,className:t.button},"Reset")))}}]),t}(r.a.Component),Ar=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{width:"90%"},button:{marginTop:e.spacing.unit,marginRight:e.spacing.unit},actionsContainer:{marginBottom:2*e.spacing.unit},resetContainer:{padding:3*e.spacing.unit}}})(Or)),jr=a(277),xr=a.n(jr),Dr=a(177),Pr=a.n(Dr),wr=a(178),Fr=a.n(wr),_r=a(276),Nr=a.n(_r),Ir=a(95),Tr=a.n(Ir),Rr=a(85),Mr=a.n(Rr);var zr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"POST",url:be.endpoint+"/detallepropuesta",data:{descripcion:a.state.description,idPropuesta:a.props.propuesta.id,idCompra:a.props.compra.id,user_id:a.state.user.user_id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Error:!0,MessageError:e.data.Error,canSubmit:!0,error:{}}):a.props.inicio()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={open:!1,Error:!1,MessageError:"",canSubmit:!0,aprobada:!1,error:{},user:{}},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.setState({user:oe()(this.props.userAcceso)})}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,"Super-Admin"===oe()(this.props.userAcceso).rol?r.a.createElement(te.a,{variant:"outlined",style:{color:"white"},onClick:this.handleClickOpen},"Aprobar propuesta"):"",r.a.createElement(Gt.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Bt.a,{id:"alert-dialog-title"},"Aprobar Propuesta"),r.a.createElement(Tr.a,null,r.a.createElement(Mr.a,{id:"alert-dialog-description"},"A continuaci\xf2n puede aprobar esta propuesta pero tienes que llenar las observaciones."),this.state.Error?r.a.createElement(Mr.a,{style:{color:"red"}},this.state.MessageError):"",r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:12},r.a.createElement(he.a,{error:!!this.state.error.descripcion,label:this.state.error.descripcion?this.state.error.descripcion[0]:"Observaciones",value:this.state.description,placeholder:"Escribe las observaci\xf2n de aprobaci\xf2n de esta propuesta.",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"description")},fullWidth:!0,margin:"normal",multiline:!0,variant:"outlined"})))),r.a.createElement(Nr.a,null,r.a.createElement(te.a,{disabled:!this.state.canSubmit,onClick:this.onSubmit,color:"primary"},"Aprobar"),r.a.createElement(te.a,{disabled:!this.state.canSubmit,onClick:this.handleClose,color:"primary",autoFocus:!0},"Cancelar"))))}}]),t}(r.a.Component),Wr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(zr);var Lr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.updateStado=function(){a.setState({anchoState:!a.state.anchoState})},a.modificarInicio=function(){a.props.inicio()},a.state={anchoState:!0,open:!1},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){}},{key:"action",value:function(){return this.props.propuesta.compra_id>0?r.a.createElement(er,{idCompra:this.props.propuesta.compra_id}):r.a.createElement(Ia.a,{color:"secondary"})}},{key:"entregables",value:function(){return this.props.propuesta.compra_id>0?r.a.createElement(sr,{idCompra:this.props.propuesta.compra_id}):r.a.createElement(Ia.a,{color:"secondary"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(on.a,{control:r.a.createElement(An.a,{checked:this.state.anchoState,onChange:function(t){return e.updateStado(t,"rta")},value:"estado"})}),r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:this.state.anchoState?12:6},r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement("p",null,"1. Datos del proponente: ")),r.a.createElement("p",null,r.a.createElement("b",null,"Nombre Empresa:")," ",this.props.propuesta.nombre,"  ",r.a.createElement("b",null," NIT: ")," ",this.props.propuesta.nit),r.a.createElement("p",null,r.a.createElement("b",null,"Representante Legal:")," ",this.props.propuesta.representate,"  ",r.a.createElement("b",null," DI:")," ",this.props.propuesta.DI),r.a.createElement("p",null,r.a.createElement("b",null,"Tel\xe9fono: ")," ",this.props.propuesta.telefono,"  ",r.a.createElement("b",null," Direcci\xf3n:")," ",this.props.propuesta.direccion),r.a.createElement("p",null,r.a.createElement("b",null,"E-mail de contacto:")," ",this.props.propuesta.email,"  ",r.a.createElement("b",null," Ciudad: ")," ",this.props.propuesta.ciudad),r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement("p",null,"2. Conflictos de Inter\xe9s")),r.a.createElement(vr,{propuesta:this.props.propuesta}),r.a.createElement("br",null),r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement("p",null,"3. Evaluaci\xf3n T\xe9cnica")),r.a.createElement(ba.a,{className:"HeartTitle"},this.action()),r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement("p",null,"4. Productos"),this.entregables())),r.a.createElement(Et.a,{item:!0,xs:12,sm:this.state.anchoState?12:6},r.a.createElement(ba.a,{className:"HeartTitle"},r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:9},r.a.createElement("p",null,"5. Propuesta Econ\xf3mica Presentada ")),r.a.createElement(Et.a,{item:!0,xs:3,sm:3},2===this.props.compra.EstadoAction||4===this.props.compra.EstadoAction?r.a.createElement(Wr,{compra:this.props.compra,propuesta:this.props.propuesta,inicio:this.modificarInicio}):1===this.props.propuesta.estado?"Propuesta aceptada":"Esta propuesta no fue aceptada "))),r.a.createElement(yr,{data:this.props.propuesta.id,datos:this.props.propuestaeconomica,action:!1}))))}}]),t}(n.Component),Ur=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Lr);var Br=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}}),a.getListPropuestaEconomica(a.state.data[a.state.activeStep+1])},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}}),a.getListPropuestaEconomica(a.state.data[a.state.activeStep-1])},a.modificarInicio=function(){a.componentDidMount(),a.props.inicio()},a.state={activeStep:0,data:[{}],estado:!1,propuestaeconomica:{data:[]},propuesta:{},politicas:[]},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.compra.id>0&&this.getPropuesta(this.props.compra.id)}},{key:"getPropuesta",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/showpropuestas/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?0!==a.data.length?(this.setState({estado:!0,data:a.data}),this.getListPropuestaEconomica(this.state.data[this.state.activeStep])):this.setState({estado:!1}):202===a.status&&this.setState({estado:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getListPropuestaEconomica",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.dispatch({type:"SET_propuesta",payload:{propuesta:t}}),e.prev=1,e.next=4,ve()({url:be.endpoint+"/propuestaCliente/"+t.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 4:return 200===(a=e.sent).status?this.setState({propuestaeconomica:a.data}):a.status,e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}},e,this,[[1,9]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.data,t=this.props,a=t.classes,n=t.theme,o=this.state.activeStep,i=e.length;return this.state.estado?r.a.createElement("div",{className:a.root},r.a.createElement(wt.a,{square:!0,elevation:0,className:a.header}," ",e[o].nombre," - ",e[o].nit,"  # ",e[o].id),r.a.createElement(Ur,{politicas:this.state.politicas,inicio:this.modificarInicio,compra:this.props.compra,propuesta:e[o],propuestaeconomica:this.state.propuestaeconomica}),r.a.createElement(xr.a,{steps:i,position:"static",activeStep:o,className:a.mobileStepper,nextButton:r.a.createElement(te.a,{size:"small",onClick:this.handleNext,disabled:o===i-1},"Siguiente","rtl"===n.direction?r.a.createElement(Pr.a,null):r.a.createElement(Fr.a,null)),backButton:r.a.createElement(te.a,{size:"small",onClick:this.handleBack,disabled:0===o},"rtl"===n.direction?r.a.createElement(Fr.a,null):r.a.createElement(Pr.a,null),"Anterior")})):r.a.createElement("div",null,r.a.createElement("p",null,"No tenemos ninguna propuesta ninguna propuesta registrada. "))}}]),t}(r.a.Component),Vr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{header:{display:"flex",alignItems:"center",height:50,paddingLeft:4*e.spacing.unit,backgroundColor:e.palette.background.default}}},{withTheme:!0})(Br)),Gr={cont:{display:"flex",justifyContent:"center"}};function qr(e){var t=e.children;return r.a.createElement("div",{style:{padding:24}},t)}var Xr=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificarInicio=function(){a.getData(a.props.match.params.idCompra)},a.handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.state={compra:{},value:0,presupuestoAfect:{data:[]}},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.props.match.isExact?(this.getData(this.props.match.params.idCompra),"?R"===this.props.location.search&&this.setState({value:2})):this.props.history.push("/home")}},{key:"getPresupuestoAfectado",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/listdetallePresupuesto/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({presupuestoAfect:a.data}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/compras/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:a=e.sent,this.setState({compra:a.data}),3===a.data.EstadoAction&&this.getPresupuestoAfectado(a.data.id),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),this.props.history.push("/home");case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getEstado",value:function(e){switch(e){case 0:return"Compra registrada";case 1:return"Compra anulada";case 2:return"compra habilitada para resivir propuesta";case 3:return"compra aprobada";case 4:return"compra habilitada";default:return""}}},{key:"render",value:function(){var e=this.props.theme;return r.a.createElement("div",null,r.a.createElement(wt.a,null,r.a.createElement(ke.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(Ae.a,{label:"Compra"}),r.a.createElement(Ae.a,{label:"Propuestas"}),2===this.state.compra.EstadoAction?r.a.createElement(Ae.a,{label:"Registrar"}):"")),this.getEstado(this.state.compra.EstadoAction),r.a.createElement(Se.a,{axis:"rtl"===e.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},r.a.createElement(qr,null,this.state.compra.id>0?r.a.createElement(_a,{presupuestoAfect:this.state.presupuestoAfect,COMPRADATA:this.state.compra}):r.a.createElement("div",{style:Gr.cont},"   ",r.a.createElement(Ia.a,{color:"secondary"})," ")),r.a.createElement(qr,null,this.state.compra.id>0?r.a.createElement(Vr,{inicio:this.modificarInicio,compra:this.state.compra}):r.a.createElement("div",{style:Gr.cont},"   ",r.a.createElement(Ia.a,{color:"secondary"})," ")),2===this.state.compra.EstadoAction?r.a.createElement(qr,null,r.a.createElement(Ar,{compra:this.state.compra})):""))}}]),t}(r.a.Component),Hr=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}},{withTheme:!0})(Xr)),$r=a(90),Jr=a.n($r);function Kr(e){return r.a.createElement(Jr.a,Object.assign({direction:"up"},e))}var Qr=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={fullWidth:!0,maxWidth:"md"},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getMapData",value:function(){return this.props.datos.data.length>0?this.props.datos.data.map(function(e,t){return r.a.createElement(Dt.a,{key:t},r.a.createElement(Ot.a,null," ",e.id," "),r.a.createElement(Ot.a,null," ",e.NombreCompra),r.a.createElement(Ot.a,null," ",e.objetivo),r.a.createElement(Ot.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.valorConInpuesto)),r.a.createElement(Ot.a,null," ",e.nombreUser," ",e.apellido),r.a.createElement(Ot.a,null," ",e.cargo),r.a.createElement(Ot.a,null," ",e.created_at))}):""}},{key:"setData",value:function(){return r.a.createElement("div",null,r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"ID Compra"),r.a.createElement(Ot.a,null,"Nombre Compra"),r.a.createElement(Ot.a,null,"objetivo"),r.a.createElement(Ot.a,null,"Valor "),r.a.createElement(Ot.a,null,"Nombres Responsable"),r.a.createElement(Ot.a,null,"cargo"),r.a.createElement(Ot.a,null,"Fecha Creaci\xf2n"))),r.a.createElement(Ct.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement(Ua.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):"")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Gt.a,{open:this.props.open,onClose:this.props.handleClose,TransitionComponent:Kr,keepMounted:!0,fullWidth:this.state.fullWidth,maxWidth:this.state.maxWidth,"aria-labelledby":"form-dialog-title"},r.a.createElement(Bt.a,{id:"form-dialog-title"}," Compras comprometidas. "),r.a.createElement(Tr.a,null,r.a.createElement(Et.a,{item:!0,xs:12,sm:12},r.a.createElement("p",null,r.a.createElement("b",null,"Cluster :   "),this.props.row.clusterName),r.a.createElement("p",null,r.a.createElement("b",null,"Componente :")," ",this.props.row.componenteName),r.a.createElement("p",null,r.a.createElement("b",null,"Concepto:"),"  ",this.props.row.proyectoName),r.a.createElement("p",null,r.a.createElement("b",null,"Centro de operaci\xf2n :")," ",this.props.row.operationName)),r.a.createElement(Mr.a,null,"A continuacion se listaran las compras que comprometen la llave."),this.setData())))}}]),t}(r.a.Component);function Yr(e){return r.a.createElement(Jr.a,Object.assign({direction:"up"},e))}var Zr=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={fullWidth:!0,maxWidth:"md"},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getMapData",value:function(){return this.props.datos.data.length>0?this.props.datos.data.map(function(e,t){return r.a.createElement(Dt.a,{key:t},r.a.createElement(Ot.a,null," ",e.id," "),r.a.createElement(Ot.a,null," ",e.NombreCompra),r.a.createElement(Ot.a,null," ",e.objetivo),r.a.createElement(Ot.a,null," ",e.servicio),r.a.createElement(Ot.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.totalPago),"-",e.porcentaje,"%"),r.a.createElement(Ot.a,null," ",e.clusterName," ",e.apellido))}):""}},{key:"setData",value:function(){return r.a.createElement("div",null,r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"ID Compra"),r.a.createElement(Ot.a,null,"Nombre Compra"),r.a.createElement(Ot.a,null,"objetivo"),r.a.createElement(Ot.a,null,"Servicio "),r.a.createElement(Ot.a,null,"Valor total"),r.a.createElement(Ot.a,null,"Nombres Responsable"))),r.a.createElement(Ct.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement(Ua.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):"")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Gt.a,{open:this.props.open,onClose:this.props.handleClose,TransitionComponent:Yr,keepMounted:!0,fullWidth:this.state.fullWidth,maxWidth:this.state.maxWidth,"aria-labelledby":"form-dialog-title"},r.a.createElement(Bt.a,{id:"form-dialog-title"}," Gastos. "),r.a.createElement(Tr.a,null,r.a.createElement(Et.a,{item:!0,xs:12,sm:12},r.a.createElement("p",null,r.a.createElement("b",null,"Cluster :   "),this.props.row.clusterName),r.a.createElement("p",null,r.a.createElement("b",null,"Componente :")," ",this.props.row.componenteName),r.a.createElement("p",null,r.a.createElement("b",null,"Concepto:"),"  ",this.props.row.proyectoName),r.a.createElement("p",null,r.a.createElement("b",null,"Centro de operaci\xf2n :")," ",this.props.row.operationName)),r.a.createElement(Mr.a,null,"A continuacion se listaran las compras que se an gastado la llave."),this.setData())))}}]),t}(r.a.Component);var eo={tableWrapper:{overflowX:"auto"}},to=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,openG:!1,row:{},datos:{data:{}},gatosRow:{},gatosDatos:{data:{}}},a.handlePageChangeCompro=function(e){a.setState({activePagecompro:e}),a.getData(a.state.row,e)},a.handlePageChangeGasto=function(e){a.setState({activePagegasto:e}),a.getGatosData(a.state.row,e)},a.handleClickOpen=function(e){a.setState({open:!0,row:e}),a.getData(e,1)},a.handleClickOpenGasto=function(e){a.setState({openG:!0,gatosRow:e}),a.getGatosData(e,1)},a.handleClose=function(){a.setState({open:!1})},a.handleCloseG=function(){a.setState({openG:!1})},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t,a){var n;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/PresupuestoDetalle/llave/?cluster_id="+t.cluster_id+"&componente_id="+t.componente_id+"&operacion_id="+t.operacion_id+"&proyecto_id="+t.proyecto_id+"&periodo_id=1&page="+a,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(n=e.sent).status&&this.setState({datos:n.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getGatosData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t,a){var n;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/presupuestoComprometido/llave/?cluster_id="+t.cluster_id+"&componente_id="+t.componente_id+"&operacion_id="+t.operacion_id+"&proyecto_id="+t.proyecto_id+"&periodo_id=1&page="+a,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(n=e.sent).status&&this.setState({gatosDatos:n.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,null,t.clusterName),r.a.createElement(Ot.a,null,t.componenteName),r.a.createElement(Ot.a,null,t.proyectoName),r.a.createElement(Ot.a,null,t.operationName),r.a.createElement(Ot.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.totalPresupuesto)),r.a.createElement(Ot.a,null,r.a.createElement("p",{onClick:function(){return e.handleClickOpenGasto(t)}},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.TotalGasto))),r.a.createElement(Ot.a,null,r.a.createElement("p",{onClick:function(){return e.handleClickOpen(t)}}," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.comprometido))),r.a.createElement(Ot.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.disponible)),e.props.action?r.a.createElement(Ot.a,null," ",r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")):r.a.createElement(Ot.a,null))}):""}},{key:"setData",value:function(){var e=this;return r.a.createElement("div",{style:eo.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null," ",r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.props.cleardata()}},"brush"),this.props.clusterA?r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.props.handleClickOpen("cluster")}},"visibility"):""," Cluster"),r.a.createElement(Ot.a,null,this.props.componenteA?r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.props.handleClickOpen("componente")}},"visibility"):""," Componente"),r.a.createElement(Ot.a,null,"Concepto"),r.a.createElement(Ot.a,null,this.props.operationn?r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.props.handleClickOpen("operacion")}},"visibility"):"","Centro de operaci\xf2n"),r.a.createElement(Ot.a,null,"$ Presupuesto"),r.a.createElement(Ot.a,null,"$ Gasto"),r.a.createElement(Ot.a,null,"$ Comprometido"),r.a.createElement(Ot.a,null,"$ Disponible "),this.props.action?r.a.createElement(Ot.a,null,"Acciones"):r.a.createElement(Ot.a,null))),this.props.datos.data.length>0?r.a.createElement(Ct.a,null,this.getMapData(),r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,{rowSpan:3}),r.a.createElement(Ot.a,{colSpan:3},"Total"),r.a.createElement(Ot.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.totalPresupuesto)),r.a.createElement(Ot.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalGasto)),r.a.createElement(Ot.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalComprometido)),r.a.createElement(Ot.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalDisponible)))):""),this.props.datos.data.length>0?r.a.createElement(Ua.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.totalData,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):"",r.a.createElement(Qr,{open:this.state.open,handleClose:this.handleClose,row:this.state.row,datos:this.state.datos,activePage:this.state.activePagecompro,handlePageChange:this.handlePageChangeCompro}),r.a.createElement(Zr,{open:this.state.openG,handleClose:this.handleCloseG,row:this.state.gatosRow,datos:this.state.gatosDatos,activePage:this.state.activePagegasto,handlePageChangeGastos:this.handlePageChangeGasto}))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),ao=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(to),no={avatar:{backgroundColor:Xt.a[100],color:Xt.a[600]}},ro=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(k.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.onClose()},a.handleListItemClick=function(e){a.props.handleSelect(e)},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"mapdata",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleListItemClick({data:t,action:e.props.action})},key:t.id},r.a.createElement(zt.a,null,r.a.createElement(Rt.a,null,r.a.createElement("i",{className:"material-icons"}," find_in_page "))),r.a.createElement(Lt.a,{primary:t.nombre}))}):""}},{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.onClose,t.handleSelect,t.selectedValue,Object(Y.a)(t,["classes","onClose","handleSelect","selectedValue"]));return r.a.createElement(Gt.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},a),r.a.createElement(Bt.a,{id:"simple-dialog-title"},this.props.title),r.a.createElement("div",null,r.a.createElement(V.a,null,this.mapdata(),r.a.createElement(H.a,null,r.a.createElement(te.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleClose()}},"Cancelar")))))}}]),t}(r.a.Component),oo=Object(A.withStyles)(no)(ro);var io=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handlePageChange=function(e){""===a.state.actionf?(a.setState({activePage:e}),a.getData(1,e)):(a.setState({activePage:e}),a.getDatafilter(1,e,a.state.cluster_idF,a.state.componente_idF,a.state.operacion_idF))},a.modificar=function(e){a.getpresupuesto(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/presupuestos",data:{periodo_id:1,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,operacion_id:a.state.operacion_id,proyecto_id:a.state.proyecto_id,valor:a.state.valor,action:!1},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear(),a.getData(1,1),a.setState({canSubmit:!0})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/presupuestos/"+a.state.id,data:{periodo_id:1,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,operacion_id:a.state.operacion_id,proyecto_id:a.state.proyecto_id,valor:a.state.valor},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear(),a.setState({canSubmit:!0}),a.getData(1,1)}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.handleClickOpen=function(e){switch(e){case"cluster":a.setState({actionf:e,title:"Seleccione cluster",activePage:1,datafilter:a.state.Cluster});break;case"componente":a.setState({actionf:e,title:"Seleccione componente",activePage:1,datafilter:a.state.componentes});break;case"operacion":a.setState({actionf:e,title:"Seleccione operacion",activePage:1,datafilter:a.state.operacions})}a.setState({open:!0})},a.handleSelect=function(e){switch(e.action){case"cluster":a.getDatafilter(1,1,e.data.id,a.state.componente_idF,a.state.operacion_idF),a.setState({cluster_idF:e.data.id});break;case"componente":a.getDatafilter(1,1,a.state.cluster_idF,e.data.id,a.state.operacion_idF),a.setState({componente_idF:e.data.id});break;case"operacion":a.getDatafilter(1,1,a.state.cluster_idF,a.state.componente_idF,e.data.id),a.setState({operacion_idF:e.data.id})}a.setState({open:!1})},a.cleardata=function(e){a.setState({operacion_idF:0,componente_idF:0,cluster_idF:0,Amsg:!1,actionf:"",activePage:1}),a.getData(1,1)},a.setproyecto=function(e){a.setState(e)},a.handleClose=function(e){a.setState({open:!1})},a.state={id:"",cluster_idF:0,cluster_id:"",componente_idF:0,componente_id:"",operacion_idF:0,operacion_id:"",valor:"",proyecto_id:"",nombreProyecto:"",componentes:[],operacions:[],Cluster:[],open:!1,datos:{data:[]},Proyectos:{data:[]},datafilter:[],error:{},title:"Buscando",canSubmit:!0,action:!0,Amsg:!1,clusterA:!1,componenteA:!1,operationn:!1,actionf:"",msg:""},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.getcluster(),this.getComponente(),this.getOperacion(),this.getData(1,1)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(t,a){var n;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/Presupuesto/"+t+"?page="+a,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(n=e.sent).status&&this.setState({datos:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getpresupuesto",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/presupuestos/"+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,cluster_id:a.data.cluster_id,componente_id:a.data.componente_id,operacion_id:a.data.operacion_id,proyecto_id:a.data.proyecto_id,valor:a.data.valor,nombreProyecto:a.data.nombreProyecto}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({id:"",cluster_id:"",componente_id:"",operacion_id:"",proyecto_id:"",error:{},valor:"",action:!0})}},{key:"getcluster",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/clusters/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Cluster:t.data,clusterA:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getComponente",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/componentes/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({componentes:t.data,componenteA:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getOperacion",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/operacions/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({operacions:t.data,operationn:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"listCluster",value:function(){return this.state.Cluster.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listComponente",value:function(){return this.state.componentes.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listOperation",value:function(){return this.state.operacions.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"getDatafilter",value:function(){var e=Object(De.a)(xe.a.mark(function e(t,a,n,r,o){var i;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/Presupuesto/"+t+"/?cluster_id="+n+"&componente_id="+r+"&operacion_id="+o+"&page="+a,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(i=e.sent).status&&(this.setState({datos:i.data}),0===i.data.data.length?this.setState({Amsg:!0,msg:" Error no tenemos datos relacionados con este filtro."}):this.setState({Amsg:!1,msg:""})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a,n,r,o){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(ua.a,{htmlFor:"Cluster"},this.state.error.cluster?this.state.error.cluster[0]:"Cluster"),r.a.createElement(ma.a,{error:!!this.state.error.cluster,fullWidth:!0,value:this.state.cluster_id,onChange:function(t){return e.syncField(t,"cluster_id")},inputProps:{name:"Cluster",id:"Cluster"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listCluster()),r.a.createElement(ua.a,{htmlFor:"Componente"},this.state.error.componente?this.state.error.componente[0]:"componente"),r.a.createElement(ma.a,{error:!!this.state.error.componente,fullWidth:!0,value:this.state.componente_id,onChange:function(t){return e.syncField(t,"componente_id")},inputProps:{name:"Componente",id:"Componente"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listComponente()),r.a.createElement(ua.a,{htmlFor:"proyecto"},this.state.error.proyecto?this.state.error.proyecto[0]:"Concepto"),r.a.createElement(Ja,{error:this.state.error,setproyecto:this.setproyecto,value:this.state.proyecto_id,DatoSelect:{id:this.state.proyecto_id,nombre:this.state.nombreProyecto}})),r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(ua.a,{htmlFor:"operacion"},this.state.error.operacion?this.state.error.operacion[0]:"Centro de operaci\xf2n"),r.a.createElement(ma.a,{error:!!this.state.error.operacion,fullWidth:!0,value:this.state.operacion_id,onChange:function(t){return e.syncField(t,"operacion_id")},inputProps:{name:"operacion",id:"operacion"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listOperation()),r.a.createElement(he.a,{error:!!this.state.error.valor,label:this.state.error.valor?this.state.error.valor[0]:"Total presupuestado",placeholder:"Valor total de presupuestado",value:this.state.valor,onChange:function(t){return e.syncField(t,"valor")},id:"formatted-numberformat-input",fullWidth:!0,InputProps:{inputComponent:fa}}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),r.a.createElement(oo,{action:this.state.actionf,title:this.state.title,selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,handleSelect:this.handleSelect,datos:this.state.datafilter}),r.a.createElement(ao,{clusterA:this.state.clusterA,componenteA:this.state.componenteA,operationn:this.state.operationn,cleardata:this.cleardata,handleClickOpen:this.handleClickOpen,datos:this.state.datos,modificar:this.modificar,handlePageChange:this.handlePageChange,activePage:this.state.activePage,action:!0}),this.state.Amsg?r.a.createElement("p",null,this.state.msg):"")}}]),t}(r.a.Component),so=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(io),co={tableWrapper:{overflowX:"auto"}},lo=function(e){function t(){return Object(y.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(S.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(Dt.a,{key:t.id},r.a.createElement(Ot.a,null," ",t.nombre," "),r.a.createElement(Ot.a,null,t.descripcion),r.a.createElement(Ot.a,null,t.fechaInicio),r.a.createElement(Ot.a,null,t.fechaFin),r.a.createElement(Ot.a,null,t.activo?"activo":"No activo"),e.props.action?r.a.createElement(Ot.a,null,r.a.createElement(_t.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),r.a.createElement(ia.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):r.a.createElement(Ot.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(wt.a,null,r.a.createElement("div",{style:co.tableWrapper},r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,r.a.createElement(Dt.a,null,r.a.createElement(Ot.a,null,"Nombre "),r.a.createElement(Ot.a,null,"Descripci\xf2n"),r.a.createElement(Ot.a,null,"Fecha inicio"),r.a.createElement(Ot.a,null,"Fecha Fin"),r.a.createElement(Ot.a,null,"Estado"),this.props.action?r.a.createElement(Ot.a,null,"Acciones"):r.a.createElement(Ot.a,null))),r.a.createElement(Ct.a,null,this.getMapData()))))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var uo=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).modificar=function(e){a.getperiodo(e)},a.updateStado=function(){a.setState({activo:!a.state.activo})},a.onSubmit=function(e){a.setState({canSubmit:!1}),ve()({method:"post",url:be.endpoint+"/periodos",data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ve()({method:"put",url:be.endpoint+"/periodos/"+a.state.id,data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){ve()({method:"DELETE",url:be.endpoint+"/periodos/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getData()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",nombre:"",descripcion:"",fechaInicio:"",fechaFin:"",activo:!1,datos:[],error:{},canSubmit:!0,action:!0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getData",value:function(){var e=Object(De.a)(xe.a.mark(function e(){var t;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/periodos",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({datos:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getperiodo",value:function(){var e=Object(De.a)(xe.a.mark(function e(t){var a;return xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ve()({url:be.endpoint+"/periodos/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,nombre:a.data.nombre,descripcion:a.data.descripcion,fechaInicio:a.data.fechaInicio,fechaFin:a.data.fechaFin,activo:a.data.activo}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,id:"",nombre:"",descripcion:"",fechaInicio:"",fechaFin:"",activo:!1,error:{}})}},{key:"listData",value:function(){return 0!==this.state.datos.length?r.a.createElement(lo,{datos:this.state.datos,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Et.a,{container:!0,spacing:24},r.a.createElement(Et.a,{item:!0,xs:12,sm:6},r.a.createElement(he.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre",placeholder:"Nombre presupuesto",value:this.state.nombre,onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0}),r.a.createElement(he.a,{error:!!this.state.error.descripcion,label:this.state.error.descripcion?this.state.error.descripcion[0]:"Descripcion",placeholder:"Descripci\xf2n de presupuesto",value:this.state.descripcion,onChange:function(t){return e.syncField(t,"descripcion")},fullWidth:!0,margin:"normal"})),r.a.createElement(Et.a,{item:!0,xs:12,sm:3},r.a.createElement(he.a,{error:!!this.state.error.fechaInicio,label:this.state.error.fechaInicio?this.state.error.fechaInicio[0]:"Fecha de inicio",id:"date",type:"date",ref:"FechaInicio",name:"FechaInicio",value:this.state.fechaInicio,onChange:function(t){return e.syncField(t,"fechaInicio")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(Et.a,{item:!0,xs:12,sm:3},r.a.createElement(he.a,{error:!!this.state.error.fechaFin,label:this.state.error.fechaFin?this.state.error.fechaFin[0]:"Fecha de finalizaci\xf3n",id:"date",type:"date",value:this.state.fechaFin,ref:"fechaFin",name:"fechaFin",onChange:function(t){return e.syncField(t,"fechaFin")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ua.a,{htmlFor:"estado"},this.state.error.activo?this.state.error.activo[0]:"Estado "),r.a.createElement(on.a,{control:r.a.createElement(An.a,{checked:this.state.activo,onChange:function(t){return e.updateStado(t,"rta")},value:"activo"})}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),po=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(uo);function mo(e){var t=e.children;return r.a.createElement("div",{style:{padding:24}},t)}var ho=function(e){function t(e){var a;return Object(y.a)(this,t),(a=Object(C.a)(this,Object(k.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.state={compra:{},value:0},a}return Object(O.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.theme;return r.a.createElement("div",null,r.a.createElement(wt.a,null,r.a.createElement(ke.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(Ae.a,{label:"Presupuesto"}),r.a.createElement(Ae.a,{label:"Periodos"}))),r.a.createElement(Se.a,{axis:"rtl"===e.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},r.a.createElement(mo,null,r.a.createElement(so,null)),r.a.createElement(mo,null,r.a.createElement(po,null))))}}]),t}(r.a.Component),fo=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}},{withTheme:!0})(ho));function vo(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h3",null,"Error pagina no encontrada  ",r.a.createElement("code",null,t.pathname)))}var bo=function(){return r.a.createElement("div",null,r.a.createElement(pe.a,null,r.a.createElement(me.a,{path:"/login",component:Ue}),r.a.createElement(me.a,{exact:!0,path:"/",component:Ue}),r.a.createElement(fn,{path:"/home",component:Za}),r.a.createElement(fn,{path:"/compra",component:za}),r.a.createElement(fn,{path:"/compras",component:Ga}),r.a.createElement(fn,{path:"/propuesta/:idCompra",component:Hr}),r.a.createElement(vn,{path:"/presupuesto",component:fo}),r.a.createElement(vn,{path:"/AdminUser",component:dn}),r.a.createElement(vn,{path:"/AdminProvedores",component:Sn}),r.a.createElement(vn,{path:"/clusters",component:xn}),r.a.createElement(vn,{path:"/componentes",component:Tn}),r.a.createElement(vn,{path:"/conceptos",component:Fn}),r.a.createElement(me.a,{component:vo})))};var Eo=function(){return r.a.createElement(c.a,{store:v},r.a.createElement(E.a,{loading:null,persistor:b},r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(ue,null),r.a.createElement("main",null,r.a.createElement(bo,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Eo,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[278,2,1]]]);
//# sourceMappingURL=main.d7e9e38b.chunk.js.map