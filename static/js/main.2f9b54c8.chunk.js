(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{150:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=150},161:function(e,t){e.exports={appId:"4839c100-656e-485c-b30e-f79876d88a59",scopes:["user.read"]}},282:function(e,t,a){e.exports=a.p+"static/media/LOGODXC-01.41e858fa.jpg"},298:function(e,t,a){e.exports=a.p+"static/media/Pol\xedticaCompras_2019.f6942d2d.pdf"},300:function(e,t,a){e.exports=a(754)},307:function(e,t,a){},722:function(e,t){},724:function(e,t){},725:function(e,t){},726:function(e,t){},727:function(e,t){},754:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(51),i=a.n(o),s=(a(305),a(307),a(759)),c=a(16),l=a(79),u=a(195),p=a(60);var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_DATA":case"SET_USER_ACCESO":case"SET_SUGGESTION_LIST":case"SET_propuesta":case"SET_COMPRA_USER":case"SET_COMPRA_DATA":case"SET_COMPRA_PRESUPUESTO":case"SET_COMPRA_TERMINOS":case"SET_COMPRA_ENTRAGABLE":return Object(p.a)({},e,t.payload);default:return e}},d=a(274),h={key:"ROOT",storage:a.n(d).a},f=Object(u.a)(h,m),v=Object(l.c)(f,{userAcceso:""}),b=Object(u.b)(v),E=a(275),g=a(7),y=a(6),S=a(10),C=a(8),k=a(9),O=a(104),A=a(35),j=a(278),x=a.n(j),D=a(279),P=a.n(D),w=a(47),F=a.n(w),_=a(122),N=a.n(_),I=a(280),T=a.n(I),R=a(36),M=a.n(R),z=a(192),L=a.n(z),W=a(281),U=a.n(W),B=a(61),V=a.n(B),G=a(160),q=a.n(G),X=a(53),H=a.n(X),$=a(159),J=a.n($),K=a(755),Q=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).state={},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(V.a,null,r.a.createElement(K.a,{to:"/compra"},r.a.createElement(H.a,{button:!0},r.a.createElement(J.a,null)," Compras"))),r.a.createElement(q.a,null),r.a.createElement(V.a,null,r.a.createElement(K.a,{to:"propuesta/1"},r.a.createElement(H.a,{button:!0},r.a.createElement(J.a,null)," Propuestas"))),r.a.createElement(q.a,null),r.a.createElement(V.a,null,r.a.createElement(H.a,{button:!0},r.a.createElement(J.a,null)," Propuestas")),r.a.createElement(q.a,null))}}]),t}(r.a.Component),Y=a(41),Z=a(756),ee=a(14),te=a.n(ee),ae={btn:{color:"#fff"}},ne=Object(Z.a)(function(e){var t=e.history,a=(e.location,e.match,e.staticContext,e.to),n=e.onClick,o=Object(Y.a)(e,["history","location","match","staticContext","to","onClick"]);return r.a.createElement(te.a,Object.assign({style:ae.btn},o,{onClick:function(e){n&&n(e),t.push(a)}}))}),re=a(45),oe=a.n(re),ie=a(121),se=a.n(ie),ce=a(66),le=a(152),ue=a.n(le),pe=a(277),me=a.n(pe),de={btn:{color:"#fff"}},he=Object(Z.a)(function(e){var t=e.history,a=(e.location,e.match,e.staticContext,e.Search),n=(e.onClick,Object(Y.a)(e,["history","location","match","staticContext","Search","onClick"]));return r.a.createElement(me.a,Object.assign({style:de.btn},n,{onClick:function(e){t.replace("/propuesta/"+a)}}))});var fe=function(e){return{root:{flexGrow:1},grow:{flexGrow:1},color:{color:"black"},btn:{color:"#fff"},menuButton:{marginLeft:-12,marginRight:20},list:{width:250},appBar:{top:"auto"},fullList:{width:"auto"},logo:{width:"9%",padding:"5px"},search:Object(O.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(ce.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(ce.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing.unit,width:"auto"}),inputRoot:{color:"inherit",width:"100%"},inputInput:Object(O.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:"10px",transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}},ve=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).toggleDrawer=function(e,t){return function(){a.setState(Object(O.a)({},e,t))}},a.validarstado=function(){null!==a.props.userAcceso&&""!==a.props.userAcceso&&a.setState({auth:!0})},a.logout=function(e){a.handleClose(),localStorage.clear(),v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}})},a.handleChange=function(e){a.setState({auth:e.target.checked})},a.handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.handleClick=function(e){a.setState({anchorEl2:e.currentTarget})},a.handleClose2=function(){a.setState({anchorEl2:null})},a.state={anchorEl:null,anchorEl2:null,user:{},top:!1,left:!1,bottom:!1,right:!1,idcompra:1},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.validarstado()}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.anchorEl,n=Boolean(a),o=this.state.anchorEl2,i=Boolean(o);return r.a.createElement("div",{className:t.root},r.a.createElement(x.a,{position:"static"},r.a.createElement(P.a,null,r.a.createElement(F.a,{variant:"h6",color:"inherit",className:t.grow},"Dividendo Compras"),!this.props.userAcceso&&r.a.createElement(ne,{to:"/login"},"Login"),this.props.userAcceso&&r.a.createElement("div",null,r.a.createElement(ne,{to:"/Politicas"},"Politicas"),r.a.createElement(ne,{to:"/Presupuesto"},"Presupuesto"),"Super-Admin"===oe()(this.props.userAcceso).rol?r.a.createElement(te.a,{className:t.btn,"aria-owns":n?"fade-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},"Administrador"):"",r.a.createElement(L.a,{id:"fade-menu",anchorEl:o,open:i,onClose:this.handleClose2,TransitionComponent:ue.a},r.a.createElement(ne,{onClick:this.handleClose2,style:fe.color,to:"/AdminUser"},"funcionarios"),r.a.createElement(ne,{onClick:this.handleClose2,style:fe.color,to:"/AdminProvedores"},"Provedores"),r.a.createElement(ne,{onClick:this.handleClose2,style:fe.color,to:"/clusters"},"clusters"),r.a.createElement(ne,{onClick:this.handleClose2,style:fe.color,to:"/componentes"},"Componentes "),r.a.createElement(ne,{onClick:this.handleClose2,style:fe.color,to:"/conceptos"},"Conceptos")),r.a.createElement(ne,{to:"/compra"},"Compra"),r.a.createElement(ne,{to:"/compras"},"Compras")),this.props.userAcceso&&r.a.createElement("div",{className:t.search},r.a.createElement(se.a,{placeholder:"Buscar factura",onChange:function(t){return e.syncField(t,"idcompra")},classes:{root:t.inputRoot,input:t.inputInput}})),r.a.createElement(he,{Search:this.state.idcompra}),this.props.userAcceso&&r.a.createElement("div",null,r.a.createElement(N.a,{"aria-owns":n?"menu-appbar":void 0,"aria-haspopup":"true",onClick:this.handleMenu,color:"inherit"},r.a.createElement(T.a,null)),r.a.createElement(L.a,{id:"menu-appbar",anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:n,onClose:this.handleClose},r.a.createElement(M.a,{onClick:this.handleClose},"My account ",oe()(this.props.userAcceso).name),r.a.createElement(M.a,{onClick:this.logout},"logout"))))),r.a.createElement(U.a,{open:this.state.left,onClose:this.toggleDrawer("left",!1)},r.a.createElement("div",{tabIndex:0,role:"button",onClick:this.toggleDrawer("left",!1),onKeyDown:this.toggleDrawer("left",!1)},r.a.createElement(Q,{className:t.list}))))}}]),t}(r.a.Component),be=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)(fe)(ve)),Ee=a(760),ge=a(757),ye=a(18),Se=a.n(ye),Ce=a(5),ke=a.n(Ce),Oe={endpoint:"https://apicompras.dxc-competencias.org"},Ae=a(282),je=a.n(Ae),xe=a(80),De=a.n(xe),Pe=a(81),we=a.n(Pe),Fe=a(54),_e=a.n(Fe),Ne=a(4),Ie=a.n(Ne),Te=a(13),Re=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=null;return this.props.debug&&(e=r.a.createElement("pre",{className:"alert-pre border bg-light p-2"},r.a.createElement("code",null,this.props.debug))),r.a.createElement("div",null,r.a.createElement("p",{className:"mb-3"},this.props.message),e)}}]),t}(r.a.Component),Me=(a(474),a(161)),ze=a.n(Me),Le=a(162),We=a(486);function Ue(e){return We.Client.init({authProvider:function(t){t(null,e)}})}function Be(e){return Ve.apply(this,arguments)}function Ve(){return(Ve=Object(Te.a)(Ie.a.mark(function e(t){var a,n;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Ue(t),e.next=3,a.api("/me").get();case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Ge=function(e){function t(e){var a;Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).userAgentApplication=new Le.UserAgentApplication(ze.a.appId,null,Le.tokenReceivedCallBack,{logger:Le.logger,cacheLocation:"localStorage"});var n=a.userAgentApplication.getUser();return a.state={isAuthenticated:null!==n,user:{},error:null},n&&a.getUserProfile(),a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"login",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.userAgentApplication.loginPopup(ze.a.scopes);case 3:return e.next=5,this.getUserProfile();case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),t=e.t0.split("|"),this.setState({isAuthenticated:!1,user:{},error:{message:t[1],debug:t[0]}});case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){this.userAgentApplication.logout()}},{key:"getUserProfile",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t,a,n,r;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.userAgentApplication.acquireTokenSilent(ze.a.scopes);case 3:if(!(t=e.sent)){e.next=10;break}return e.next=7,Be(t);case 7:a=e.sent,this.comprobarIdentidad(t),this.setState({isAuthenticated:!0,user:{displayName:a.displayName,email:a.mail||a.userPrincipalName},error:null});case 10:e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),n={},"string"===typeof e.t0?(r=e.t0.split("|"),n=r.length>1?{message:r[1],debug:r[0]}:{message:e.t0}):n={message:e.t0.message,debug:JSON.stringify(e.t0)},this.setState({isAuthenticated:!1,user:{},error:n});case 17:case"end":return e.stop()}},e,this,[[0,12]])}));return function(){return e.apply(this,arguments)}}()},{key:"comprobarIdentidad",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a,n=this;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({method:"get",url:Oe.endpoint+"/auth_365",headers:{Accept:"*/*",Authorization:t}});case 3:200===(a=e.sent).status?(v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:a.data.auth_token}}),this.props.inicio()):203===a.status&&(this.setState({error:{message:a.data.Message+"en 5 segundos se cerrara sesion con 365.",debug:"User no autorizado"}}),setTimeout(function(){return n.logout()},5e3)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=null;return this.state.error&&(t=r.a.createElement(Re,{message:this.state.error.message,debug:this.state.error.debug})),r.a.createElement("div",null,r.a.createElement("p",null,"Iniciar secci\xf3n con 365 "),this.state.isAuthenticated?r.a.createElement("div",null,"Estas autenticado con   ",this.state.user.displayName+" "+this.state.user.email,r.a.createElement(te.a,{variant:"contained",type:"submit",color:"primary",onClick:function(){return e.logout()}}," cerrar sesi\xf3n")," "):r.a.createElement(te.a,{variant:"contained",type:"submit",color:"primary",onClick:function(){return e.login()}}," Iniciar secci\xf3n con 365"),t)}},{key:"setErrorMessage",value:function(e,t){this.setState({error:{message:e,debug:t}})}}]),t}(n.Component),qe={root:{width:"98%"},cont:{display:"flex",justifyContent:"center"},logo:{width:"20%",display:"block",marginLeft:"auto",marginRight:"auto"},main:{paddingLeft:"15%",paddingRight:"15%",paddingTop:"2%"}};function Xe(e){var t=e.children,a=e.dir;return r.a.createElement(F.a,{component:"div",dir:a},t)}var He=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(){a.setState({error:!1}),ke()({method:"post",url:Oe.endpoint+"/authenticate",data:{email:a.state.email,password:a.state.password},headers:{Accept:"*/*"}}).then(function(e){v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:e.data.auth_token}}),a.home()}).catch(function(e){a.setState({canSubmit:!0}),500===e.response.status&&a.setState({error:!0})})},a.handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.state={username:"",password:"",error:!1,canSubmit:!0,action:!0,value:0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.userAcceso&&this.props.history.push("/home")}},{key:"home",value:function(){this.props.history.push("/home")}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this,t=this.props.theme;return r.a.createElement("div",null,r.a.createElement(we.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(_e.a,{label:"365"}),r.a.createElement(_e.a,{label:"login"})),r.a.createElement("img",{style:qe.logo,src:je.a,alt:"logo"}),r.a.createElement(De.a,{axis:"rtl"===t.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},r.a.createElement(Xe,{dir:t.direction},r.a.createElement("div",{style:qe.main},r.a.createElement(Ge,{inicio:function(){return e.home()}}))),r.a.createElement(Xe,{dir:t.direction},r.a.createElement("div",{style:qe.main},this.state.error?r.a.createElement("p",{style:{color:"red"}}," Error Usuario o contrase\xf1a err\xf3neos."):"",r.a.createElement(Se.a,{id:"outlined-email-input",label:"Email",type:"email",name:"email",autoComplete:"email",onChange:function(t){return e.syncField(t,"email")},fullWidth:!0,margin:"normal",variant:"outlined"}),r.a.createElement(Se.a,{id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password",onChange:function(t){return e.syncField(t,"password")},fullWidth:!0,margin:"normal",variant:"outlined"}),r.a.createElement(te.a,{variant:"contained",type:"submit",color:"primary",onClick:this.onSubmit}," Login  ")))))}}]),t}(r.a.Component),$e=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)(qe,{withTheme:!0})(He)),Je=a(92),Ke=a(100),Qe=a.n(Ke),Ye=a(101),Ze=a.n(Ye),et=a(102),tt=a.n(et),at=a(158),nt=a.n(at),rt=a(17),ot=a.n(rt),it=a(283),st=a.n(it),ct=a(285),lt=a.n(ct),ut=a(286),pt=a.n(ut),mt=a(289),dt=a.n(mt),ht=a(287),ft=a.n(ht),vt=a(288),bt=a.n(vt),Et=a(191),gt=a.n(Et),yt=a(284),St=a.n(yt),Ct={success:st.a,warning:St.a,error:lt.a,info:pt.a};var kt=Object(A.withStyles)(function(e){return{success:{backgroundColor:ft.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.dark},warning:{backgroundColor:bt.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing.unit},message:{display:"flex",alignItems:"center"}}})(function(e){var t=e.classes,a=e.className,n=e.message,o=e.onClose,i=e.variant,s=Object(Y.a)(e,["classes","className","message","onClose","variant"]),c=Ct[i];return r.a.createElement(gt.a,Object.assign({className:ot()(t[i],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(c,{className:ot()(t.icon,t.iconVariant)}),n),action:[r.a.createElement(N.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:o},r.a.createElement(dt.a,{className:t.icon}))]},s))}),Ot=a(11),At=a.n(Ot),jt=a(31),xt=a.n(jt),Dt=a(30),Pt=a.n(Dt),wt=a(1),Ft=a.n(wt),_t=a(32),Nt=a.n(_t),It=a(21),Tt=a.n(It),Rt=a(23),Mt=a.n(Rt),zt=a(28),Lt=a.n(zt),Wt={tableWrapper:{overflowX:"auto"}},Ut=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getcompra",value:function(e){this.props.getcompraID(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,null," ",t.NombreCompra," "),r.a.createElement(Ft.a,null,t.objetivo),r.a.createElement(Ft.a,null,t.updated_at),r.a.createElement(Ft.a,null,r.a.createElement(Lt.a,{variant:"contained",color:"primary",onClick:function(){return e.getcompra(t.id)}},"build"),"    "))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:Wt.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Nombre Compra"),r.a.createElement(Ft.a,null,"Objetivo"),r.a.createElement(Ft.a,null,"Fecha de Creaci\xf2n"),this.props.action?r.a.createElement(Ft.a,null,"Acciones"):r.a.createElement(Ft.a,null))),r.a.createElement(Pt.a,null,this.getMapData()))))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),Bt=a(90),Vt=a.n(Bt),Gt=a(89),qt=a.n(Gt),Xt=a(99),Ht=a.n(Xt),$t=a(59),Jt=a.n($t),Kt=a(58),Qt=a.n(Kt),Yt=a(74),Zt=a.n(Yt),ea={avatar:{backgroundColor:Zt.a[100],color:Zt.a[600]}},ta=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.onClose()},a.handleListItemClick=function(e){a.props.handleSelect(e)},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"mapdata",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleListItemClick(t)},key:t.id},r.a.createElement(qt.a,null,r.a.createElement(Vt.a,null,r.a.createElement("i",{class:"material-icons"}," account_circle "))),r.a.createElement(Ht.a,{primary:t.name+" - "+t.apellido}))}):""}},{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.onClose,t.handleSelect,t.selectedValue,Object(Y.a)(t,["classes","onClose","handleSelect","selectedValue"]));return r.a.createElement(Qt.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},a),r.a.createElement(Jt.a,{id:"simple-dialog-title"},"Seleccione Funcionario"),r.a.createElement("div",null,r.a.createElement(V.a,null,this.mapdata(),r.a.createElement(H.a,null,r.a.createElement(te.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleClose()}},"Cancelar")))))}}]),t}(r.a.Component),aa=Object(A.withStyles)(ea)(ta);var na={btn:{paddingTop:"18px"},cont:{display:"flex",justifyContent:"center"},formbuscar:{alignContent:"center"}},ra=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleSelect=function(e){a.setState({open:!1}),a.props.pasarUser(e)},a.handleClose=function(e){a.setState({open:!1})},a.onSubmit=function(e){a.FilterNombre()},a.FilterNombre=function(e){a.setState({canSubmit:!1}),ke()({method:"get",timeout:8e3,url:Oe.endpoint+"/user/filter/?nombre="+a.state.nombre,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){0===e.data.length?(a.setState({error:{nombre:["No encontramos resultados"]}}),a.clear()):(a.setState({canSubmit:!0,funcionarios:e.data}),a.handleClickOpen())}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={nit:"",nombre:"",funcionarios:[],msg:{estado:!1,msg:"",tipo:""},open:!1,error:{},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"clear",value:function(){this.setState({canSubmit:!0,nombre:"",nit:""})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre Funcionario ",value:this.state.nombre,placeholder:"Busca por nombre de de funcionario",ref:"nombre",name:"nombre",onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0,margin:"normal",variant:"outlined"})),r.a.createElement(At.a,{item:!0,xs:3,sm:3},r.a.createElement("div",{style:na.btn},r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"Buscar ")))),r.a.createElement(aa,{selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,handleSelect:this.handleSelect,datos:this.state.funcionarios}))}}]),t}(r.a.Component),oa=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(ra);var ia={cont:{display:"flex",justifyContent:"center"},formbuscar:{left:"20%"}},sa=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.getcompraID=function(e){a.props.compraData({id:e}),a.props.USER(a.state.user)},a.confirmar=function(){a.props.USER(a.state.user)},a.pasarUser=function(e){a.getUser(e.user_id)},a.state={value:0,user:{id:0},dataCompra:[]},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.btns(!1),this.getData()}},{key:"getData",value:function(){0===this.props.userData.id?this.getUser(oe()(this.props.userAcceso).user_id):this.getUser(this.props.userData.id)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getUser",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/users/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&(this.setState({user:a.data}),this.getComprasPersonTipe(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getComprasPersonTipe",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/compras/"+t+"/0",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:a=e.sent,this.setState({dataCompra:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Titular de la compra"),"Super-Admin"===oe()(this.props.userAcceso).rol||"Colaborador"===oe()(this.props.userAcceso).rol?r.a.createElement(oa,{style:ia.formbuscar,pasarUser:this.pasarUser}):"",r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Solicitante :")," ",this.state.user.name,"   ",this.state.user.apellido),r.a.createElement("p",null,r.a.createElement("b",null,"Cargo:")," ",this.state.user.cargo),r.a.createElement("p",null,r.a.createElement("b",null,"Direcci\xf2n :")," ",this.state.user.direccion)),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Identificaci\xf2n:")," ",this.state.user.documento),r.a.createElement("p",null,r.a.createElement("b",null,"E-mail:")," ",this.state.user.email))),r.a.createElement("div",{style:ia.cont},r.a.createElement(te.a,{variant:"contained",color:"primary",onClick:this.confirmar}," Continuar ")),this.state.dataCompra.length>0?r.a.createElement("div",null,r.a.createElement("p",null,"Termina de gestionar tus compras"),r.a.createElement(Ut,{getcompraID:this.getcompraID,datos:this.state.dataCompra,action:!0})):" ")}}]),t}(r.a.Component),ca=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(sa);var la={cont:{display:"flex",justifyContent:"center"}},ua=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handleBack=function(){a.props.handleBack()},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/compras",data:{NombreCompra:a.state.NombreCompra,objetivo:a.state.Objetivo,FechaInicio:a.state.FechaInicio,FechaFin:a.state.FechaFin,user_id:a.props.user.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.compraData(e.data),a.setState({canSubmit:!0}),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/compras/"+a.props.compra.id,data:{NombreCompra:a.state.NombreCompra,objetivo:a.state.Objetivo,FechaInicio:a.state.FechaInicio,FechaFin:a.state.FechaFin,user_id:a.props.user.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.compraData(e.data),a.setState({canSubmit:!0}),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={NombreCompra:"",Objetivo:"",FechaInicio:"",FechaFin:"",msg:{estado:!1,msg:"",tipo:""},error:{},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.getValidate(),this.props.btns(!1)}},{key:"getValidate",value:function(){this.setState({action:!1}),null!=this.props.compra.id?this.getData(this.props.compra.id):this.setState({action:!0})}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/compras/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,NombreCompra:a.data.NombreCompra,Objetivo:a.data.objetivo,FechaFin:new Date(a.data.FechaFin).toISOString().split("T")[0],FechaInicio:new Date(a.data.FechaInicio).toISOString().split("T")[0]}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.NombreCompra,label:this.state.error.NombreCompra?this.state.error.NombreCompra[0]:"Nombre Compras",value:this.state.NombreCompra,placeholder:"Nombre compra",ref:"NombreCompra",name:"NombreCompra",onChange:function(t){return e.syncField(t,"NombreCompra")},fullWidth:!0,multiline:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.objetivo,label:this.state.error.objetivo?this.state.error.objetivo[0]:"Objetivo compra",placeholder:"Objetivo compra",value:this.state.Objetivo,ref:"Objetivo",name:"Objetivo",multiline:!0,onChange:function(t){return e.syncField(t,"Objetivo")},fullWidth:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.FechaInicio,label:this.state.error.FechaInicio?this.state.error.FechaInicio[0]:"Fecha de inicio",id:"dateini",type:"date",ref:"FechaInicio",name:"FechaInicio",value:this.state.FechaInicio,onChange:function(t){return e.syncField(t,"FechaInicio")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(Se.a,{error:!!this.state.error.FechaFin,label:this.state.error.FechaFin?this.state.error.FechaFin[0]:"Fecha de finalizaci\xf3n",id:"date",type:"date",ref:"FechaFin",name:"FechaFin",Value:this.state.FechaFin,onChange:function(t){return e.syncField(t,"FechaFin")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}))),r.a.createElement("div",{style:la.cont},r.a.createElement(te.a,{onClick:this.handleBack}," atras  "),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  ")))}}]),t}(r.a.Component),pa=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(ua),ma=a(67),da=a.n(ma),ha={tableWrapper:{overflowX:"auto"}},fa=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,null," ",t.servicio," "),r.a.createElement(Ft.a,null,t.componenteName),r.a.createElement(Ft.a,null,t.clusterName),r.a.createElement(Ft.a,null,t.proyectoName),r.a.createElement(Ft.a,null,t.operationName),r.a.createElement(Ft.a,null,t.cantidad),r.a.createElement(Ft.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.valorConImpuesto)),e.props.action?r.a.createElement(Ft.a,null,r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),r.a.createElement(da.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):r.a.createElement(Ft.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:ha.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Servicio"),r.a.createElement(Ft.a,null,"componente"),r.a.createElement(Ft.a,null,"cluster"),r.a.createElement(Ft.a,null,"Concepto"),r.a.createElement(Ft.a,null,"Centro de operaci\xf2n"),r.a.createElement(Ft.a,null,"Cantidad"),r.a.createElement(Ft.a,null,"$ valor con impuesto"),this.props.action?r.a.createElement(Ft.a,null,"Acciones"):r.a.createElement(Ft.a,null))),r.a.createElement(Pt.a,null,this.getMapData(),r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,{rowSpan:3}),r.a.createElement(Ft.a,{colSpan:4},"Total de compra"),r.a.createElement(Ft.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.total)))))))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),va=a(34),ba=a.n(va),Ea=a(49),ga=a.n(Ea),ya=a(157),Sa=a.n(ya);var Ca=function(e){var t=e.inputRef,a=e.onChange,n=Object(Y.a)(e,["inputRef","onChange"]);return r.a.createElement(Sa.a,Object.assign({},n,{getInputRef:t,onValueChange:function(e){a({target:{value:e.value}})},thousandSeparator:!0,prefix:"$"}))},ka=a(50),Oa=a.n(ka);var Aa=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).modificar=function(e){a.getDetallepresupuesto(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/detallepresupuestos",data:{servicio:a.state.servicio,cantidad:a.state.cantidad,valorSinImpuesto:a.state.valorSinImpuesto,valorConInpuesto:a.state.valorConInpuesto,NombreCompra:a.state.NombreCompra,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,compra_id:a.props.compra.id,operacion_id:a.state.operacion_id,proyecto_id:a.state.proyecto_id,periodo_id:a.props.periodo.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{valorConInpuesto:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.getValidate(),a.clear(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/detallepresupuestos/"+a.state.id,data:{servicio:a.state.servicio,cantidad:a.state.cantidad,valorSinImpuesto:a.state.valorSinImpuesto,valorConInpuesto:a.state.valorConInpuesto,NombreCompra:a.state.NombreCompra,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,operacion_id:a.state.operacion_id,periodo_id:a.props.periodo.id,proyecto_id:a.state.proyecto_id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{valorConInpuesto:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.getValidate(),a.clear(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){ke()({method:"DELETE",url:Oe.endpoint+"/detallepresupuestos/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getValidate()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",servicio:"",cantidad:0,valorSinImpuesto:0,valorConInpuesto:"",cluster_id:"",componente_id:"",operacion_id:"",proyecto_id:"",datos:{data:[]},componentes:[],operacions:[],Cluster:[],Proyectos:[],Mensaje:!1,DatosPresupuesto:{},msgProye:"Buscando",msg:{estado:!1,msg:"",tipo:""},error:{},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.getValidate(),this.getcluster(),this.getComponente(),this.getOperacion(),this.props.btns(!0),this.props.CanNext(!1)}},{key:"getValidate",value:function(){null!=this.props.compra.id&&this.getData(this.props.compra.id)}},{key:"getDetallepresupuesto",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/detallepresupuestos/"+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,servicio:a.data.servicio,cantidad:a.data.cantidad,valorSinImpuesto:a.data.valorSinImpuesto,valorConInpuesto:a.data.valorConInpuesto,cluster_id:a.data.cluster_id,componente_id:a.data.componente_id,operacion_id:a.data.operacion_id}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({id:"",servicio:"",cantidad:0,valorSinImpuesto:0,valorConInpuesto:"",cluster_id:"",componente_id:"",operacion_id:"",action:!0,error:{},Mensaje:!1})}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/ListdetallePresupuesto/"+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&(this.setState({datos:a.data}),0===this.state.datos.data.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.data.length?r.a.createElement(fa,{datos:this.state.datos,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"getcluster",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/clusters/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Cluster:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getComponente",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/componentes/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({componentes:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getOperacion",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/operacions/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({operacions:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getProyectos",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.state.cluster_id>0&&this.state.componente_id>0&&this.state.operacion_id>0)){e.next=14;break}return this.setState({msgProye:"Buscando",Proyectos:[]}),e.prev=2,e.next=5,ke()({url:Oe.endpoint+"/proyecto/f/?periodo_id=1&cluster_id="+this.state.cluster_id+"&componente_id="+this.state.componente_id+"&operacion_id="+this.state.operacion_id,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 5:200===(t=e.sent).status&&(t.data.length>0?this.setState({msgProye:"seleccion\xe9 ",Proyectos:t.data}):this.setState({msgProye:"Esta llave no tiene presupuesto.",Proyectos:[]})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.getError(e.t0.response);case 12:e.next=15;break;case 14:this.setState({msgProye:"seleccion\xe9 los campos requeridos",Proyectos:[]});case 15:case"end":return e.stop()}},e,this,[[2,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"listCluster",value:function(){return this.state.Cluster.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listComponente",value:function(){return this.state.componentes.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listOperation",value:function(){return this.state.operacions.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listProyecto",value:function(){return this.state.Proyectos.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.state.Mensaje?r.a.createElement(Oa.a,null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:6,sm:3},r.a.createElement("b",null,"Total presupuesto:")," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.state.DatosPresupuesto.TotalPresupuesto)),r.a.createElement(At.a,{item:!0,xs:6,sm:3},r.a.createElement("b",null,"Total comprometido:")," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL"}).format(this.state.DatosPresupuesto.comprometido)),r.a.createElement(At.a,{item:!0,xs:6,sm:3},r.a.createElement("b",null,"Total gasto:"),new Intl.NumberFormat("COL",{style:"currency",currency:"COL"}).format(this.state.DatosPresupuesto.gasto)),r.a.createElement(At.a,{item:!0,xs:6,sm:3},r.a.createElement("b",null,"Dinero disponible:")," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL"}).format(this.state.DatosPresupuesto.disponible)))):"",r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.servicio,label:this.state.error.servicio?this.state.error.servicio[0]:"Productos o servicios Requeridos",value:this.state.servicio,placeholder:"Productos o servicios Requeridos",ref:"servicio",name:"servicio",onChange:function(t){return e.syncField(t,"servicio")},fullWidth:!0}),r.a.createElement(ba.a,{htmlFor:"Cluster"},this.state.error.cluster?this.state.error.cluster[0]:"Cluster"),r.a.createElement(ga.a,{error:!!this.state.error.cluster,fullWidth:!0,value:this.state.cluster_id,onChange:function(t){return e.syncField(t,"cluster_id")},inputProps:{name:"Cluster",id:"Cluster"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listCluster()),r.a.createElement(ba.a,{htmlFor:"Componente"},this.state.error.componente?this.state.error.componente[0]:"componente"),r.a.createElement(ga.a,{error:!!this.state.error.componente,fullWidth:!0,value:this.state.componente_id,onChange:function(t){return e.syncField(t,"componente_id")},inputProps:{name:"Componente",id:"Componente"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listComponente())),r.a.createElement(At.a,{item:!0,xs:12,sm:3},r.a.createElement(ba.a,{htmlFor:"operacion"},this.state.error.operacion?this.state.error.operacion[0]:"Centro de operaci\xf2n"),r.a.createElement(ga.a,{error:!!this.state.error.operacion,fullWidth:!0,value:this.state.operacion_id,onChange:function(t){return e.syncField(t,"operacion_id")},inputProps:{name:"operacion",id:"operacion"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listOperation()),r.a.createElement(ba.a,{htmlFor:"proyecto"},this.state.error.proyecto?this.state.error.proyecto[0]:"Concepto"),r.a.createElement(ga.a,{error:!!this.state.error.proyecto,fullWidth:!0,value:this.state.proyecto_id,onFocus:function(t){return e.getProyectos()},onChange:function(t){return e.syncField(t,"proyecto_id")},inputProps:{name:"proyecto",id:"proyecto"}},r.a.createElement(M.a,null,r.a.createElement("em",null," ",this.state.msgProye)),this.listProyecto())),r.a.createElement(At.a,{item:!0,xs:12,sm:3},r.a.createElement(Se.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad",fullWidth:!0,placeholder:"Cantidad",value:this.state.cantidad,ref:"cantidad",name:"cantidad",onChange:function(t){return e.syncField(t,"cantidad")}}),r.a.createElement(Se.a,{error:!!this.state.error.valorConInpuesto,label:this.state.error.valorConInpuesto?this.state.error.valorConInpuesto[0]:"Total con impuestos",placeholder:"Valor con con impuestos",value:this.state.valorConInpuesto,onChange:function(t){return e.syncField(t,"valorConInpuesto")},id:"formatted-numberformat-input",fullWidth:!0,InputProps:{inputComponent:Ca}}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),ja=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Aa),xa=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,{component:"th",scope:"row"},t.Especificacion),r.a.createElement(Ft.a,{numeric:!0},t.cantidad),r.a.createElement(Ft.a,null,t.observaciones),e.props.action?r.a.createElement(Ft.a,null,r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),r.a.createElement(da.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):r.a.createElement(Ft.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Especificaci\xf2n"),r.a.createElement(Ft.a,{numeric:!0},"Cantidad"),r.a.createElement(Ft.a,null,"Observaciones"),this.props.action?r.a.createElement(Ft.a,null,"Acciones"):r.a.createElement(Ft.a,null))),r.a.createElement(Pt.a,null,this.getMapData())))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var Da=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).modificar=function(e){a.getidreferenceterms(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/referenceterms",data:{Especificacion:a.state.Especificacion,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,Especificacion:"",observaciones:"",cantidad:0}),a.componentDidMount(),a.props.msgbn("Datos registrados correctamente.")}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"PUT",url:Oe.endpoint+"/referenceterms/"+a.state.id,data:{Especificacion:a.state.Especificacion,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,action:!0,id:"",Especificacion:"",observaciones:"",cantidad:0}),a.setState({canSubmit:!0,action:!0,id:"",Especificacion:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){ke()({method:"DELETE",url:Oe.endpoint+"/referenceterms/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.componentDidMount()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",Especificacion:"",observaciones:"",cantidad:0,datos:[],action:!0,msg:{estado:!1,msg:"",tipo:""},error:{},canSubmit:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.compra.id),this.props.btns(!0),this.props.CanNext(!1)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/listreferenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({datos:a.data}),0===this.state.datos.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.length?r.a.createElement(xa,{datos:this.state.datos,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"getidreferenceterms",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/referenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({canSubmit:!0,action:!1,id:a.data.id,Especificacion:a.data.Especificacion,observaciones:a.data.observaciones,cantidad:a.data.cantidad}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:6,sm:3},r.a.createElement(Se.a,{error:!!this.state.error.Especificacion,label:this.state.error.Especificacion?this.state.error.Especificacion[0]:"Especificacion",placeholder:"Especificacion",ref:"nameCompra",name:"nameCompra",onChange:function(t){return e.syncField(t,"Especificacion")},value:this.state.Especificacion,fullWidth:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.observaciones,label:this.state.error.observaciones?this.state.error.observaciones[0]:"Observaciones",placeholder:"Expecificar Observaciones",ref:"observaciones",name:"observaciones",onChange:function(t){return e.syncField(t,"observaciones")},value:this.state.observaciones,fullWidth:!0,multiline:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:3,sm:1},r.a.createElement(Se.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad",placeholder:"Cantidad",value:this.state.cantidad,ref:"cantidad",name:"cantidad",onChange:function(t){return e.syncField(t,"cantidad")},margin:"normal"}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),Pa=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Da),wa=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,{component:"th",scope:"row"},t.producto),r.a.createElement(Ft.a,{numeric:!0},t.cantidad),r.a.createElement(Ft.a,null,t.observaciones),e.props.action?r.a.createElement(Ft.a,null,r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),r.a.createElement(da.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):r.a.createElement(Ft.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Producto o servicio"),r.a.createElement(Ft.a,{numeric:!0},"Cantidad"),r.a.createElement(Ft.a,null,"Observaciones"),this.props.action?r.a.createElement(Ft.a,null,"Acciones"):r.a.createElement(Ft.a,null))),r.a.createElement(Pt.a,null,this.getMapData())))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var Fa=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).modificar=function(e){a.getConsultarPorid(e)},a.onEliminar=function(e){ke()({method:"DELETE",url:Oe.endpoint+"/entregables/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,action:!0,producto:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/entregables",data:{producto:a.state.producto,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({canSubmit:!0,action:!0,producto:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.getError(e.response),a.setState({canSubmit:!0})})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"PUT",url:Oe.endpoint+"/entregables/"+a.state.id,data:{producto:a.state.producto,observaciones:a.state.observaciones,cantidad:a.state.cantidad,compra_id:a.props.compra.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!0,canSubmit:!0,producto:"",observaciones:"",cantidad:0,error:{}}),a.componentDidMount()}).catch(function(e){a.getError(e.response),a.setState({canSubmit:!0})})},a.state={id:"",producto:"",observaciones:"",cantidad:0,referenceterm:[],action:!0,error:{},msg:{estado:!1,msg:"",tipo:""},canSubmit:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.compra.id),this.props.btns(!0),this.props.CanNext(!1)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/listEntregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({referenceterm:a.data}),0===this.state.referenceterm.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getConsultarPorid",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/entregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({canSubmit:!0,action:!1,id:a.data.id,producto:a.data.producto,observaciones:a.data.observaciones,cantidad:a.data.cantidad}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.referenceterm.length?r.a.createElement(wa,{datos:this.state.referenceterm,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:6,sm:3},r.a.createElement(Se.a,{error:!!this.state.error.producto,label:this.state.error.producto?this.state.error.producto[0]:"producto o servicio ",placeholder:"producto o servicio ",ref:"producto",name:"producto",onChange:function(t){return e.syncField(t,"producto")},value:this.state.producto,fullWidth:!0,multiline:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.observaciones,label:this.state.error.observaciones?this.state.error.observaciones[0]:"Observaciones ",placeholder:"Expecificar Observaciones",ref:"observaciones",name:"observaciones",onChange:function(t){return e.syncField(t,"observaciones")},value:this.state.observaciones,fullWidth:!0,multiline:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:3,sm:1},r.a.createElement(Se.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad ",placeholder:"Cantidad",ref:"Cantidad",name:"Cantidad",onChange:function(t){return e.syncField(t,"cantidad")},value:this.state.cantidad,fullWidth:!1,multiline:!0,margin:"normal"}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),_a=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Fa),Na=a(290),Ia=a.n(Na),Ta={tableWrapper:{overflowX:"auto"}};var Ra=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getMapData",value:function(){return this.props.datos?this.props.datos.data.map(function(e){return r.a.createElement(Tt.a,{key:e.id},r.a.createElement(Ft.a,null,e.servicio),r.a.createElement(Ft.a,null,e.componenteName),r.a.createElement(Ft.a,null,e.clusterName),r.a.createElement(Ft.a,null,e.proyectoName),r.a.createElement(Ft.a,null,e.operacionName),r.a.createElement(Ft.a,null,e.cantidad),r.a.createElement(Ft.a,null,r.a.createElement(Ia.a,{disableFocusListener:!0,disableTouchListener:!0,title:e.porcentaje},r.a.createElement("p",null," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.valorPresupuesto)))),r.a.createElement(Ft.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.totalPago)))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:Ta.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Servicio"),r.a.createElement(Ft.a,null,"Componente"),r.a.createElement(Ft.a,null,"Cluster"),r.a.createElement(Ft.a,null,"Concepto"),r.a.createElement(Ft.a,null,"Centro de operaci\xf2n"),r.a.createElement(Ft.a,null,"Cantidad"),r.a.createElement(Ft.a,null,"$Valor presupuesto"),r.a.createElement(Ft.a,null,"$Gasto"))),r.a.createElement(Pt.a,null,this.getMapData(),r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,{rowSpan:3}),r.a.createElement(Ft.a,{colSpan:5},"Totales"),r.a.createElement(Ft.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalPresupuestado)),r.a.createElement(Ft.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalCompra))),r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,{rowSpan:4}),r.a.createElement(Ft.a,{colSpan:4},"Ahorro"),r.a.createElement(Ft.a,{align:"right"}),r.a.createElement(Ft.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalPresupuestado-this.props.datos.TotalCompra)))))))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),Ma=Object(c.b)(function(e){return{userAcceso:e.userAcceso,compra:e.compra}})(Ra);var za=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"lispresupuestoAfect",value:function(){return 0!==this.props.presupuestoAfect.data.length?r.a.createElement(Ma,{datos:this.props.presupuestoAfect}):"Error no tenemos presupuesto no se puede continuar..."}},{key:"listData",value:function(){return 0!==this.props.presupuesto.data.length?r.a.createElement(fa,{datos:this.props.presupuesto}):"Error no tenemos presupuesto no se puede continuar..."}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement("p",null,"1. Datos Solicitante")),r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Fecha de solicitud:   "),this.props.fechaSolicitud),r.a.createElement("p",null,r.a.createElement("b",null,"Solicitante :")," ",this.props.user.name,"   ",this.props.user.apellido),r.a.createElement("p",null,r.a.createElement("b",null,"Cargo:")," ",this.props.user.cargo),r.a.createElement("p",null,r.a.createElement("b",null,"Direcci\xf2n :")," ",this.props.user.direccion)),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Identificaci\xf2n:")," ",this.props.user.documento),r.a.createElement("p",null,r.a.createElement("b",null,"E-mail:")," ",this.props.user.email))),r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement("p",null,"2. Datos General de compra")),r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:12},r.a.createElement("p",null,r.a.createElement("b",null,"Bien o Servicio a Contratar:")," ",this.props.COMPRADATA.NombreCompra),r.a.createElement("p",null,r.a.createElement("b",null,"Objeto:")," ",this.props.COMPRADATA.objetivo)),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Fecha de Inicio:")," ",this.props.FechaInicio),r.a.createElement("p",null,r.a.createElement("b",null,"Fecha de Fin:")," ",this.props.FechaFin)),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement("p",null,r.a.createElement("b",null,"Plazo de ejecuci\xf2n:")," ",this.props.FechaInicio-this.props.FechaFin),r.a.createElement("p",null,r.a.createElement("b",null,"D\xecas para el Inicio:")," ",this.props.COMPRADATA.FechaInicio))),3===this.props.COMPRADATA.EstadoAction?r.a.createElement("div",null," ",r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement("p",null,"3. Presupuesto afectado.")," "),this.lispresupuestoAfect()," ",r.a.createElement("br",null)):r.a.createElement("div",null,r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement("p",null,"3. Presupuesto Disponible.")," "),this.listData()," ",r.a.createElement("br",null)),r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement("p",null,"4. Terminos de referencia")),r.a.createElement(xa,{datos:this.props.TerminosReferencia,action:!1}),r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement("p",null,"5. Entragables")),r.a.createElement(wa,{datos:this.props.entregables}))}}]),t}(r.a.Component),La=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(za),Wa=a(39),Ua=a.n(Wa);function Ba(e){var t=e.children;return r.a.createElement("div",{style:{padding:24}},t)}var Va={cont:{display:"flex",justifyContent:"center"}},Ga=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleReset=function(){a.setState({activeStep:0})},a.compra=function(e){a.setState(function(t){return{compra:e}})},a.useradd=function(e){a.setState(function(t){return{user:e}}),a.handleNext()},a.CanNext=function(e){a.setState({canNext:e})},a.btns=function(e){a.setState({stateBtn:e})},a.msgbn=function(e){a.setState({open:!0,msgMo:e})},a.Publicar=function(){a.getPublicar()},a.state={activeStep:0,compra:{},user:{id:0},open:!1,msgMo:"",peridoPresupuesto:{},Tipo:"success",error:{},canNext:!0,stateBtn:!0},a.handleNext=a.handleNext.bind(Object(Je.a)(Object(Je.a)(a))),a.handleBack=a.handleBack.bind(Object(Je.a)(Object(Je.a)(a))),a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getSteps",value:function(){return[this.state.user.id?"Solicitante: "+this.state.user.name+" "+this.state.user.apellido:"Datos Solicitante ","Datos generales de compra","Presupuesto","Terminos de referencia.","Entregables"]}},{key:"componentDidMount",value:function(){this.ValidarPresupuesto()}},{key:"getStepContent",value:function(e){switch(e){case 0:return r.a.createElement(ca,{btns:this.btns,USER:this.useradd,userData:this.state.user,compra:this.state.compra,compraData:this.compra});case 1:return this.state.user.id?r.a.createElement(pa,{handleBack:this.handleBack,handleNext:this.handleNext,compra:this.state.compra,compraData:this.compra,msgbn:this.msgbn,btns:this.btns,user:this.state.user}):"Error se requiere un persona que sea responsable de esta compra";case 2:return r.a.createElement(ja,{periodo:this.state.peridoPresupuesto,compra:this.state.compra,msgbn:this.msgbn,CanNext:this.CanNext,btns:this.btns});case 3:return r.a.createElement(Pa,{compra:this.state.compra,msgbn:this.msgbn,CanNext:this.CanNext,btns:this.btns});case 4:return r.a.createElement(_a,{compra:this.state.compra,msgbn:this.msgbn,CanNext:this.CanNext,btns:this.btns});default:return r.a.createElement(kt,null)}}}]),Object(y.a)(t,[{key:"ValidarPresupuesto",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/Presupuesto",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:t=e.sent,this.setState({peridoPresupuesto:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),401===e.t0.response.status&&this.setState({error:{error:!0,menssage:e.t0.response.data.errors}});case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getPublicar",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/publicar/"+this.state.compra.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:this.Redirigir(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}},e,this,[[0,6]])}));return function(){return e.apply(this,arguments)}}()},{key:"Redirigir",value:function(){this.props.history.push("/propuesta/"+this.state.compra.id+"?R")}},{key:"render",value:function(){var e=this.props.classes,t=this.getSteps(),a=this.state.activeStep;return this.state.peridoPresupuesto.id?r.a.createElement(Ba,null,r.a.createElement(nt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:this.state.open,autoHideDuration:6e3,onClose:this.handleClose},r.a.createElement(kt,{onClose:this.handleClose,variant:this.state.Tipo,message:this.state.msgMo})),r.a.createElement("p",null,"Presupuesto: ",this.state.peridoPresupuesto.nombre),r.a.createElement(Qe.a,{activeStep:a,alternativeLabel:!0},t.map(function(e){return r.a.createElement(Ze.a,{key:e},r.a.createElement(tt.a,null,e))})),r.a.createElement("div",{className:e.toolbar},this.state.activeStep===t.length?r.a.createElement("div",null,r.a.createElement(F.a,{className:e.instructions}," Por favor revisar si todo se encuentra Bien de lo contrario corregir."),r.a.createElement(La,{COMPRADATA:this.state.compra}),r.a.createElement("div",{className:e.cont},r.a.createElement(te.a,{onClick:this.handleReset},"Volver"),r.a.createElement(te.a,{variant:"contained",color:"primary",onClick:this.Publicar},"Confirmar"))):!0===this.state.stateBtn?r.a.createElement("div",null,r.a.createElement("div",null,this.getStepContent(a)),r.a.createElement("div",{className:e.cont},r.a.createElement(te.a,{disabled:0===a,onClick:this.handleBack,className:e.backButton},"anterior"),r.a.createElement(te.a,{disabled:!this.state.canNext,variant:"contained",color:"primary",onClick:this.handleNext},a===t.length-1?"Revisar":"Siguiente"))):r.a.createElement("div",null,this.getStepContent(a)))):this.state.error.error?r.a.createElement("div",{style:Va.cont},this.state.error.menssage):r.a.createElement("div",{style:Va.cont}," ",r.a.createElement(Ua.a,{className:e.progress,color:"secondary"}))}}]),t}(r.a.Component),qa=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{width:"98%"},cont:{display:"flex",justifyContent:"center"},content:{flexGrow:1,padding:3*e.spacing.unit},toolbar:e.mixins.toolbar}})(Ga)),Xa=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).state={},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"acccion",value:function(){switch(this.props.estado){case 0:return r.a.createElement("p",null,"Registrada");case 1:return r.a.createElement("p",null,"Anulada");case 2:return r.a.createElement("p",null,"Resive propuestas");case 3:return r.a.createElement("p",null,"Aprobada");case 4:return r.a.createElement("p",null,"Esperando Aprobaci\xf2n- cerrada ");default:return r.a.createElement("p",null,"Error")}}},{key:"render",value:function(){return this.acccion()}}]),t}(r.a.Component),Ha=a(40),$a=a.n(Ha),Ja={tableWrapper:{overflowX:"auto"}};var Ka=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handlePageChange=function(e){a.setState({activePage:e}),a.getComprasFull(e)},a.handleClick=function(e){return function(){a.setState(Object(p.a)({open:!0},e))}},a.handleClose=function(){a.setState({open:!1})},a.state={value:0,user:{},dataCompra:{data:[]},activePage:1,totalItemsCount:0,open:!1,vertical:"top",horizontal:"center"},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getComprasFull(1),"?Error404"===this.props.location.search&&this.setState({open:!0,vertical:"bottom",horizontal:"left"})}},{key:"getComprasPersonTipe",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t,a){var n;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/compras/"+t+"/"+a,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:n=e.sent,this.setState({dataCompra:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getComprasFull",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/compras/?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:a=e.sent,this.setState({dataCompra:a.data,totalItemsCount:a.data.total}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"compraLink",value:function(e){this.props.history.push("/propuesta/"+e)}},{key:"getMapData",value:function(){var e=this;return this.state.dataCompra.data.length>0?this.state.dataCompra.data.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,null," ",t.id," "),r.a.createElement(Ft.a,null," ",t.NombreCompra),r.a.createElement(Ft.a,null,t.objetivo),r.a.createElement(Ft.a,null,t.updated_at),r.a.createElement(Ft.a,null,r.a.createElement(Xa,{estado:t.EstadoAction})),r.a.createElement(Ft.a,null,r.a.createElement(Lt.a,{variant:"contained",color:"primary",onClick:function(){return e.compraLink(t.id)}},"visibility")))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:Ja.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"N\xba Compra"),r.a.createElement(Ft.a,null,"Nombre Compra"),r.a.createElement(Ft.a,null,"Objetivo"),r.a.createElement(Ft.a,null,"Fecha de Creaci\xf2n"),r.a.createElement(Ft.a,null,"Estado"),r.a.createElement(Ft.a,null,"Acciones"))),r.a.createElement(Pt.a,null,this.getMapData())),this.state.dataCompra.data.length>0?r.a.createElement($a.a,{activePage:this.state.activePage,itemsCountPerPage:10,totalItemsCount:this.state.totalItemsCount,pageRangeDisplayed:5,onChange:this.handlePageChange}):""))}},{key:"render",value:function(){var e=this.state,t=e.vertical,a=e.horizontal,n=e.open;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(nt.a,{anchorOrigin:{vertical:t,horizontal:a},open:n,onClose:this.handleClose,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Error Compra no existe...")})),this.setData())}}]),t}(r.a.Component),Qa=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Ka),Ya=a(291),Za=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"chart"},r.a.createElement(Ya.a,{data:this.props.chartData,options:{title:{display:this.props.displayTitle,text:"Presupuesto "+this.props.location,fontSize:25},legend:{display:this.props.displayLegend,position:this.props.legendPosition}}}))}}]),t}(n.Component);Za.defaultProps={displayTitle:!0,displayLegend:!1,legendPosition:"right",location:"Dividendo por colombia"};var en=Za;var tn=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handlePageChange=function(e){a.getProyectos(e),a.setState({activePage:e})},a.state={Proyectos:{data:[]},proyecto_id:"",pageNumber:1},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.getProyectos(this.state.pageNumber)}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.props.setproyecto(n)}},{key:"getProyectos",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/proyectos?page="+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({Proyectos:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listProyecto",value:function(){return this.state.Proyectos.data.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"validarValue",value:function(e){return""!==e&&0===this.state.Proyectos.data.filter(function(t){return t.id===e}).length&&this.state.Proyectos.data.push(this.props.DatoSelect),e}},{key:"render",value:function(){var e=this;return r.a.createElement(ga.a,{error:!!this.props.error.proyecto,fullWidth:!0,value:this.validarValue(this.props.value),onChange:function(t){return e.syncField(t,"proyecto_id")},inputProps:{name:"proyecto",id:"proyecto"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listProyecto(),this.state.Proyectos.data.length>0?r.a.createElement($a.a,{activePage:this.state.activePage,itemsCountPerPage:10,totalItemsCount:this.state.Proyectos.total,pageRangeDisplayed:5,onChange:this.handlePageChange}):"")}}]),t}(r.a.Component),an=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(tn),nn={cont:{display:"flex",justifyContent:"center"}};var rn=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).setproyecto=function(e){a.setState(e)},a.state={chartData:{},cluster_id:"",componente_id:"",operacion_id:"",proyecto_id:"",componentes:[],operacions:[],Cluster:[],Proyectos:[],error:{},mostrar:!1,message:!1,msg:"",canSubmit:!0,action:!0,labels:["Presupuesto","Comprometido","gasto","Disponible"],datasets:[]},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentWillMount",value:function(){this.getcluster(),this.getComponente(),this.getOperacion()}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getcluster",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/clusters/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Cluster:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getComponente",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/componentes/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({componentes:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getOperacion",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/operacions/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({operacions:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"listCluster",value:function(){return this.state.Cluster.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listComponente",value:function(){return this.state.componentes.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listOperation",value:function(){return this.state.operacions.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listProyecto",value:function(){return this.state.Proyectos.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"data",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({action:!1}),e.prev=1,e.next=4,ke()({url:Oe.endpoint+"/presupuestoData/?cluster_id="+this.state.cluster_id+"&componente_id="+this.state.componente_id+"&operacion_id="+this.state.operacion_id+"&proyecto_id="+this.state.proyecto_id+"&periodo_id=1",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 4:200===(t=e.sent).status&&this.setState({titulo:"Dividendo por colombia",labels:["Presupuesto  "+t.data.TotalPresupuesto,"Comprometido "+t.data.comprometido,"Gasto "+t.data.gasto,"Disponible "+t.data.disponible],datasets:[{label:"Dinero",data:[t.data.TotalPresupuesto,t.data.comprometido,t.data.gasto,t.data.disponible],backgroundColor:["rgba(54, 162, 235, 0.6)","rgba(75, 192, 192, 0.6)","rgba(255, 99, 132, 0.6)","rgba(255, 206, 86, 0.6)","rgba(153, 102, 255, 0.6)","rgba(255, 159, 64, 0.6)","rgba(255, 99, 132, 0.6)"]}]}),this.setState({action:!0}),200===t.status?this.setState({mostrar:!0,message:!1,msg:""}):203===t.status&&this.setState({mostrar:!1,message:!0,msg:t.data.Error}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),this.setState({action:!0,mostrar:!1}),this.getError(e.t0.response);case 14:case"end":return e.stop()}},e,this,[[1,10]])}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},this.state.message?r.a.createElement("p",{style:{color:"red"}}," ",this.state.msg):""),r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(ba.a,{htmlFor:"Cluster"},this.state.error.cluster?this.state.error.cluster[0]:"Cluster"),r.a.createElement(ga.a,{error:!!this.state.error.cluster,fullWidth:!0,value:this.state.cluster_id,onChange:function(t){return e.syncField(t,"cluster_id")},inputProps:{name:"Cluster",id:"Cluster"}},this.listCluster()),r.a.createElement(ba.a,{htmlFor:"Componente"},this.state.error.componente?this.state.error.componente[0]:"componente"),r.a.createElement(ga.a,{error:!!this.state.error.componente,fullWidth:!0,value:this.state.componente_id,onChange:function(t){return e.syncField(t,"componente_id")},inputProps:{name:"Componente",id:"Componente"}},this.listComponente())),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(ba.a,{htmlFor:"operacion"},this.state.error.operacion?this.state.error.operacion[0]:"Centro de operaci\xf2n"),r.a.createElement(ga.a,{error:!!this.state.error.operacion,fullWidth:!0,value:this.state.operacion_id,onChange:function(t){return e.syncField(t,"operacion_id")},inputProps:{name:"operacion",id:"operacion"}},this.listOperation()),r.a.createElement(ba.a,{htmlFor:"proyecto"},this.state.error.proyecto?this.state.error.proyecto[0]:"concepto"),r.a.createElement(an,{error:this.state.error,setproyecto:this.setproyecto,value:this.state.proyecto_id,DatoSelect:{id:this.state.proyecto_id,nombre:this.state.nombreProyecto}}))),r.a.createElement(te.a,{variant:"contained",disabled:!this.state.canSubmit,color:"primary",onClick:function(t){return e.data()}}," Generar reporte "),this.state.mostrar?this.state.action?r.a.createElement(en,{chartData:{labels:this.state.labels,datasets:this.state.datasets},location:this.state.titulo,legendPosition:"bottom"}):r.a.createElement("div",{style:nn.cont}," ",r.a.createElement(Ua.a,{color:"secondary"})):"")}}]),t}(r.a.Component),on=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(rn),sn=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(S.a)(this,Object(C.a)(t).call(this))).state={},e}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"App-header"},r.a.createElement("h2",null,"Home "),r.a.createElement(on,null)))}}]),t}(r.a.Component),cn=a(163),ln=a.n(cn),un=a(293),pn=a.n(un),mn=a(42),dn=a.n(mn),hn=a(190),fn=a.n(hn),vn={tableWrapper:{overflowX:"auto"}},bn=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).state={value:0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.user.data.length>0?this.props.user.data.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,null," ",t.name," "),r.a.createElement(Ft.a,null,t.apellido),r.a.createElement(Ft.a,null,t.documento),r.a.createElement(Ft.a,null,"  ",t.email),r.a.createElement(Ft.a,null,"  ",t.cargo),r.a.createElement(Ft.a,null,"  ",t.direccion),r.a.createElement(Ft.a,null,"  ",t.rol),r.a.createElement(Ft.a,null," ",r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:vn.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Nombre"),r.a.createElement(Ft.a,null,"Apellido"),r.a.createElement(Ft.a,null,"Documento"),r.a.createElement(Ft.a,null,"Email"),r.a.createElement(Ft.a,null,"Cargo"),r.a.createElement(Ft.a,null,"Direccion"),r.a.createElement(Ft.a,null,"Rol"),r.a.createElement(Ft.a,null,"Acciones"))),r.a.createElement(Pt.a,null,this.getMapData())),this.props.user.data.length>0?r.a.createElement($a.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.user.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var En=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/users",data:{name:a.state.name,apellido:a.state.apellido,email:a.state.email,rol:a.state.value,cargo:a.state.cargo,direccion:a.state.direccion,documento:a.state.documento},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.handleChange=function(e){a.setState({value:e.target.value})},a.handlePageChange=function(e){a.setState({activePage:e}),a.getdataUser(e)},a.modificar=function(e){a.clear(),a.getUser(e)},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/users/"+a.state.id,data:{name:a.state.name,apellido:a.state.apellido,email:a.state.email,rol:a.state.value,cargo:a.state.cargo,direccion:a.state.direccion,documento:a.state.documento},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={value:"User",name:"",apellido:"",email:"",rol:"",cargo:"",direccion:"",documento:"",error:{},activePage:1,user:{data:{}},msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.getdataUser(1)}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getdataUser",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/userData?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({user:a.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/users/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({error:{},action:!1,id:a.data.id,name:a.data.name,apellido:a.data.apellido,email:a.data.email,value:a.data.rol,cargo:a.data.cargo,direccion:a.data.direccion,documento:a.data.documento}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,canSubmit:!0,value:"User",name:"",apellido:"",email:"",rol:"",cargo:"",direccion:"",documento:"",error:{}}),this.getdataUser(1)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.name,label:this.state.error.name?this.state.error.name[0]:"Nombre",value:this.state.name,placeholder:"Nombre Empresa",ref:"NombreEmpresa",name:"NombreEmpresa",onChange:function(t){return e.syncField(t,"name")},fullWidth:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.apellido,label:this.state.error.apellido?this.state.error.apellido[0]:"Apellido",placeholder:"Apellido",value:this.state.apellido,ref:"apellido",name:"apellido",onChange:function(t){return e.syncField(t,"apellido")},fullWidth:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.email,label:this.state.error.email?this.state.error.email[0]:"Email",placeholder:"Email example@dividendoporcolombia.org",value:this.state.email,ref:"email",name:"email",onChange:function(t){return e.syncField(t,"email")},fullWidth:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:12,sm:4},r.a.createElement(Se.a,{error:!!this.state.error.documento,label:this.state.error.documento?this.state.error.documento[0]:"Documento",value:this.state.documento,placeholder:"Documento",ref:"documento",name:"documento",onChange:function(t){return e.syncField(t,"documento")},fullWidth:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.cargo,label:this.state.error.cargo?this.state.error.cargo[0]:"Cargo",placeholder:"cargo",value:this.state.cargo,ref:"direccion",name:"direccion",onChange:function(t){return e.syncField(t,"cargo")},fullWidth:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.direccion,label:this.state.error.direccion?this.state.error.direccion[0]:"Direcci\xf2n",placeholder:"Direccion",value:this.state.direccion,ref:"ciudad",name:"ciudad",onChange:function(t){return e.syncField(t,"direccion")},fullWidth:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:12,sm:2},r.a.createElement(fn.a,{component:"legend"},"Rol"),r.a.createElement(pn.a,{value:this.state.value,onChange:this.handleChange},r.a.createElement(dn.a,{value:"User",control:r.a.createElement(ln.a,{color:"primary"}),label:"User",labelPlacement:"start"}),r.a.createElement(dn.a,{value:"Colaborador",control:r.a.createElement(ln.a,{color:"primary"}),label:"Colaborador",labelPlacement:"start"}),r.a.createElement(dn.a,{value:"Super-Admin",control:r.a.createElement(ln.a,{color:"primary"}),label:"Super-Admin",labelPlacement:"start"})))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),r.a.createElement(bn,{user:this.state.user,handlePageChange:this.handlePageChange,activePage:this.state.activePage,modificar:this.modificar}))}}]),t}(r.a.Component),gn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(En),yn=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement(gn,null)}}]),t}(r.a.Component),Sn=a(758);var Cn=Object(c.b)(function(e){return null!==e.userAcceso&&""!==e.userAcceso?{isAuthenticated:!0}:{isAuthenticated:!1}})(function(e){var t=e.component,a=e.isAuthenticated,n=Object(Y.a)(e,["component","isAuthenticated"]);return r.a.createElement(ge.a,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(Sn.a,{to:{pathname:"/login",state:{from:e.location}}})}}))});var kn=Object(c.b)(function(e){return null!==e.userAcceso&&""!==e.userAcceso&&"Super-Admin"===oe()(e.userAcceso).rol?{isAuthenticated:!0}:{isAuthenticated:!1}})(function(e){var t=e.component,a=e.isAuthenticated,n=Object(Y.a)(e,["component","isAuthenticated"]);return r.a.createElement(ge.a,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(Sn.a,{to:{pathname:"/home",state:{from:e.location}}})}}))}),On={tableWrapper:{overflowX:"auto"}},An=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).state={value:0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos.data.length>0?this.props.datos.data.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,null," ",t.nombre," "),r.a.createElement(Ft.a,null," ",t.representate),r.a.createElement(Ft.a,null," ",t.nit),r.a.createElement(Ft.a,null," ",t.telefono),r.a.createElement(Ft.a,null," ",t.email),r.a.createElement(Ft.a,null," ",t.direccion),r.a.createElement(Ft.a,null," ",t.ciudad),r.a.createElement(Ft.a,null," ",r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),"  "))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:On.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Nombre"),r.a.createElement(Ft.a,null,"representate"),r.a.createElement(Ft.a,null,"NIT"),r.a.createElement(Ft.a,null,"telefono"),r.a.createElement(Ft.a,null,"Email"),r.a.createElement(Ft.a,null,"Direccion"),r.a.createElement(Ft.a,null,"Ciudad"),r.a.createElement(Ft.a,null,"Acciones"))),r.a.createElement(Pt.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement($a.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var jn=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/empresas",data:{nombre:a.state.nombre,nit:a.state.nit,representate:a.state.representate,email:a.state.email,direccion:a.state.direccion,telefono:a.state.telefono,ciudad:a.state.ciudad},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){switch(a.clear(),a.props.father){case"propuesta":a.props.provedor(e.data),a.props.handleNext();break;default:a.props.handleNext()}}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.handlePageChange=function(e){a.setState({activePage:e}),a.getdataProvedor(e)},a.modificar=function(e){a.getprovedor(e)},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/empresas/"+a.state.id,data:{nombre:a.state.nombre,nit:a.state.nit,representate:a.state.representate,email:a.state.email,direccion:a.state.direccion,telefono:a.state.telefono,ciudad:a.state.ciudad},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={nombre:"",representate:"",email:"",telefono:"",nit:"",direccion:"",ciudad:"",error:{},provedores:{data:{}},activePage:1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.father||this.getdataProvedor(1)}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"clear",value:function(){this.setState({canSubmit:!0,action:!0,nombre:"",nit:"",representate:"",email:"",direccion:"",telefono:"",ciudad:""}),this.getdataProvedor(1)}},{key:"getdataProvedor",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/empresas?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({provedores:a.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getprovedor",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/empresas/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({error:{},action:!1,id:a.data.id,nombre:a.data.nombre,nit:a.data.nit,representate:a.data.representate,email:a.data.email,direccion:a.data.direccion,telefono:a.data.telefono,ciudad:a.data.ciudad}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre Empresa",value:this.state.nombre,placeholder:"Nombre Empresa",ref:"NombreEmpresa",name:"NombreEmpresa",onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.representate,label:this.state.error.representate?this.state.error.representate[0]:"Representante Legal",placeholder:"Representante Legal",value:this.state.representate,ref:"representate",name:"representate",onChange:function(t){return e.syncField(t,"representate")},fullWidth:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.telefono,label:this.state.error.telefono?this.state.error.telefono[0]:"Telefono",placeholder:"Telefono",value:this.state.telefono,ref:"telefono",name:"telefono",onChange:function(t){return e.syncField(t,"telefono")},fullWidth:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.email,label:this.state.error.email?this.state.error.email[0]:"Email contacto",placeholder:"Email contacto",value:this.state.email,ref:"email",name:"email",onChange:function(t){return e.syncField(t,"email")},fullWidth:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.nit,label:this.state.error.nit?this.state.error.nit[0]:"NIT",value:this.state.nit,placeholder:"NIT",ref:"nit",name:"nit",onChange:function(t){return e.syncField(t,"nit")},fullWidth:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.direccion,label:this.state.error.direccion?this.state.error.direccion[0]:"Direcci\xf3n",placeholder:"Direcci\xf3n",value:this.state.direccion,ref:"direccion",name:"direccion",onChange:function(t){return e.syncField(t,"direccion")},fullWidth:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.ciudad,label:this.state.error.ciudad?this.state.error.ciudad[0]:"Ciudad",placeholder:"Ciudad",value:this.state.ciudad,ref:"ciudad",name:"ciudad",onChange:function(t){return e.syncField(t,"ciudad")},fullWidth:!0,margin:"normal"}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.props.father?"":r.a.createElement(An,{datos:this.state.provedores,handlePageChange:this.handlePageChange,activePage:this.state.activePage,modificar:this.modificar}))}}]),t}(r.a.Component),xn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(jn),Dn=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return r.a.createElement(xn,null)}}]),t}(r.a.Component),Pn={tableWrapper:{overflowX:"auto"}},wn=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,null," ",t.nombre," "),r.a.createElement(Ft.a,null,t.activo?"activo":"No activo"),e.props.action?r.a.createElement(Ft.a,null,r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")):r.a.createElement(Ft.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:Pn.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Nombre "),r.a.createElement(Ft.a,null,"Estado"),this.props.action?r.a.createElement(Ft.a,null,"Acciones"):r.a.createElement(Ft.a,null))),r.a.createElement(Pt.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement($a.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),Fn=a(48),_n=a.n(Fn);var Nn=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).modificar=function(e){a.getperiodo(e)},a.handlePageChange=function(e){a.setState({activePage:e}),a.getData(e)},a.updateStado=function(){a.setState({activo:!a.state.activo})},a.modificar=function(e){a.getcluster(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/clusters",data:{nombre:a.state.nombre,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/clusters/"+a.state.id,data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={datos:{data:[]},error:{},id:"",nombre:"",activo:!1,canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.getData(1)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/admin/clusters?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({datos:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.data.length?r.a.createElement(wn,{handlePageChange:this.handlePageChange,datos:this.state.datos,modificar:this.modificar,activePage:this.state.activePage,action:!0}):""}},{key:"getcluster",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/clusters/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,nombre:a.data.nombre,activo:a.data.activo}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,id:"",nombre:"",activo:!1,error:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Admin Clusters"),r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre",placeholder:"Nombre ",value:this.state.nombre,onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0})),r.a.createElement(At.a,{item:!0,xs:12,sm:3},r.a.createElement(ba.a,{htmlFor:"estado"},this.state.error.activo?this.state.error.activo[0]:"Estado "),r.a.createElement(dn.a,{control:r.a.createElement(_n.a,{checked:this.state.activo,onChange:function(t){return e.updateStado(t,"rta")},value:"activo"})}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),In=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Nn),Tn={tableWrapper:{overflowX:"auto"}},Rn=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,null," ",t.nombre," "),r.a.createElement(Ft.a,null,t.activo?"activo":"No activo"),e.props.action?r.a.createElement(Ft.a,null,r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")):r.a.createElement(Ft.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:Tn.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Nombre "),r.a.createElement(Ft.a,null,"Estado"),this.props.action?r.a.createElement(Ft.a,null,"Acciones"):r.a.createElement(Ft.a,null))),r.a.createElement(Pt.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement($a.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var Mn=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).modificar=function(e){a.getperiodo(e)},a.handlePageChange=function(e){a.setState({activePage:e}),a.getData(e)},a.updateStado=function(){a.setState({activo:!a.state.activo})},a.modificar=function(e){a.getProyectos(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/proyectos",data:{nombre:a.state.nombre,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/proyectos/"+a.state.id,data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={datos:{data:[]},error:{},id:"",nombre:"",activo:!1,canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.getData(1)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/admin/proyectos?page="+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({datos:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.data.length?r.a.createElement(Rn,{datos:this.state.datos,modificar:this.modificar,handlePageChange:this.handlePageChange,activePage:this.state.activePage,action:!0}):""}},{key:"getProyectos",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/proyectos/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,nombre:a.data.nombre,activo:a.data.activo}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,id:"",nombre:"",activo:!1,error:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Admin conceptos"),r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre",placeholder:"Nombre ",value:this.state.nombre,onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0})),r.a.createElement(At.a,{item:!0,xs:12,sm:3},r.a.createElement(ba.a,{htmlFor:"estado"},this.state.error.activo?this.state.error.activo[0]:"Estado "),r.a.createElement(dn.a,{control:r.a.createElement(_n.a,{checked:this.state.activo,onChange:function(t){return e.updateStado(t,"rta")},value:"activo"})}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),zn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Mn),Ln={tableWrapper:{overflowX:"auto"}},Wn=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,null," ",t.nombre," "),r.a.createElement(Ft.a,null,t.activo?"activo":"No activo"),e.props.action?r.a.createElement(Ft.a,null,r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")):r.a.createElement(Ft.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:Ln.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Nombre "),r.a.createElement(Ft.a,null,"Estado"),this.props.action?r.a.createElement(Ft.a,null,"Acciones"):r.a.createElement(Ft.a,null))),r.a.createElement(Pt.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement($a.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):""))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var Un=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).modificar=function(e){a.getperiodo(e)},a.handlePageChange=function(e){a.setState({activePage:e}),a.getData(e)},a.updateStado=function(){a.setState({activo:!a.state.activo})},a.modificar=function(e){a.getcomponentes(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/componentes",data:{nombre:a.state.nombre,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/componentes/"+a.state.id,data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(1),a.setState({activePage:1}),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={datos:{data:[]},error:{},id:"",nombre:"",activo:!1,canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.getData(1)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/admin/componentes?page="+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({datos:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"listData",value:function(){return 0!==this.state.datos.data.length?r.a.createElement(Wn,{datos:this.state.datos,modificar:this.modificar,handlePageChange:this.handlePageChange,activePage:this.state.activePage,action:!0}):""}},{key:"getcomponentes",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/componentes/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,nombre:a.data.nombre,activo:a.data.activo}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,id:"",nombre:"",activo:!1,error:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Admin componentes"),r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre",placeholder:"Nombre ",value:this.state.nombre,onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0})),r.a.createElement(At.a,{item:!0,xs:12,sm:3},r.a.createElement(ba.a,{htmlFor:"estado"},this.state.error.activo?this.state.error.activo[0]:"Estado "),r.a.createElement(dn.a,{control:r.a.createElement(_n.a,{checked:this.state.activo,onChange:function(t){return e.updateStado(t,"rta")},value:"activo"})}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),Bn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Un),Vn=a(295),Gn=a.n(Vn),qn=a(294),Xn=a.n(qn),Hn={avatar:{backgroundColor:Zt.a[100],color:Zt.a[600]}},$n=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.onClose()},a.actionRegister1=function(){a.props.actionRegister()},a.handleListItemClick=function(e){a.props.handleSelect(e)},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"mapdata",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleListItemClick(t)},key:t.id},r.a.createElement(qt.a,null,r.a.createElement(Vt.a,null,r.a.createElement("i",{class:"material-icons"}," account_balance "))),r.a.createElement(Ht.a,{primary:t.nombre+" - "+t.nit}))}):""}},{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.onClose,t.handleSelect,t.selectedValue,Object(Y.a)(t,["classes","onClose","handleSelect","selectedValue"]));return r.a.createElement(Qt.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},a),r.a.createElement(Jt.a,{id:"simple-dialog-title"},"Seleccione una empresa"),r.a.createElement("div",null,r.a.createElement(V.a,null,this.mapdata(),r.a.createElement(H.a,null,r.a.createElement(qt.a,{button:!0,onClick:function(){return e.actionRegister1()}},r.a.createElement(Vt.a,null,r.a.createElement(Xn.a,null))),r.a.createElement(te.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleClose()}},"Cancelar")))))}}]),t}(r.a.Component),Jn=Object(A.withStyles)(Hn)($n);var Kn=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleSelect=function(e){a.setState({open:!1}),a.props.provedor(e),a.props.handleNext()},a.handleClose=function(e){a.setState({open:!1})},a.onSubmit=function(e){""!==a.state.nit?a.BuscarNit():a.FilterNombre()},a.BuscarNit=function(e){a.setState({canSubmit:!1}),ke()({method:"get",timeout:8e3,url:Oe.endpoint+"/empresa/search/"+a.state.nit,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?(a.setState({error:{nit:e.data.error}}),a.clear()):(a.props.provedor(e.data),a.props.handleNext())}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.FilterNombre=function(e){a.setState({canSubmit:!1}),ke()({method:"get",timeout:8e3,url:Oe.endpoint+"/empresa/search/?nombre="+a.state.nombre,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){0===e.data.length?(a.setState({error:{nombre:["No encontramos resultados"]}}),a.clear()):(a.setState({canSubmit:!0,empresas:e.data}),a.handleClickOpen())}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.actionRegister=function(e){a.setState({open:!1}),a.props.handleChangeasignar()},a.state={nit:"",nombre:"",empresas:[],msg:{estado:!1,msg:"",tipo:""},open:!1,error:{},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"clear",value:function(){this.setState({canSubmit:!0,nombre:"",nit:""})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre Empresa ",value:this.state.nombre,placeholder:"Busca por nombre de empresa",ref:"nombre",name:"nombre",onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.nit,label:this.state.error.nit?this.state.error.nit[0]:"NIT",value:this.state.nit,placeholder:"Busca por Nit",ref:"nit",name:"nit",onChange:function(t){return e.syncField(t,"nit")},fullWidth:!0,type:"number",margin:"normal"}))),r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"Buscar "),r.a.createElement(Jn,{actionRegister:this.actionRegister,selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,handleSelect:this.handleSelect,datos:this.state.empresas}))}}]),t}(r.a.Component),Qn=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Kn);function Yn(e){var t=e.children;return r.a.createElement("div",{style:{padding:24}},t)}var Zn=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={value:0},a.handleChangeasignar=function(){a.setState({value:1})},a.handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.siguienteUpdate(!1)}},{key:"render",value:function(){var e=this.props.theme;return r.a.createElement("div",null,r.a.createElement(Mt.a,null,r.a.createElement(we.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(_e.a,{label:"Buscar"}),r.a.createElement(_e.a,{label:"Registrar"}))),r.a.createElement(De.a,{axis:"rtl"===e.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},r.a.createElement(Yn,null,"Buscar Provedor",r.a.createElement(Qn,{handleChangeasignar:this.handleChangeasignar,father:"propuesta",handleNext:this.props.handleNext,provedor:this.props.provedor})),r.a.createElement(Yn,null," Registrar Provedor",r.a.createElement(xn,{father:"propuesta",handleNext:this.props.handleNext,provedor:this.props.provedor}))))}}]),t}(r.a.Component),er=Object(A.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}},{withTheme:!0})(Zn);var tr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/detallereferencetermclientes",data:{comentario:a.state.comentario,cumple:a.state.estado?1:0,empresa_id:a.props.provedor.id,referenceterm_id:a.props.datos.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/detallereferencetermclientes/"+a.state.id,data:{comentario:a.state.comentario,cumple:a.state.estado?1:0},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/detallereferencetermclientes/"+this.props.provedor.id+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({action:!1,id:t.data.id,comentario:t.data.comentario,estado:t.data.cumple}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this;return r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null," ",this.props.datos.Especificacion),r.a.createElement(Ft.a,null," ",this.props.datos.observaciones),r.a.createElement(Ft.a,null," ",this.props.datos.cantidad),r.a.createElement(Ft.a,null,"  ",r.a.createElement(Se.a,{label:"Observaciones",value:this.state.comentario,placeholder:"Observaciones",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"comentario")},fullWidth:!0,margin:"normal",multiline:!0})),r.a.createElement(Ft.a,null,r.a.createElement(ba.a,{htmlFor:"estado"},this.state.estado?"SI":"NO"," "),r.a.createElement(dn.a,{control:r.a.createElement(_n.a,{checked:this.state.estado,onChange:function(t){return e.updateStado(t,"estado")},value:"activo"})})),this.state.canSubmit?this.state.action?r.a.createElement(Lt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"done_all"):r.a.createElement(Lt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar},"done_all"):r.a.createElement(Ua.a,{color:"secondary"}))}}]),t}(r.a.Component),ar=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(tr);var nr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.idEmpresa)}},{key:"componentWillReceiveProps",value:function(e){this.getData(e.idEmpresa)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/detallereferencetermclientes/"+t+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?this.setState({action:!1,id:a.data.id,comentario:a.data.comentario,estado:a.data.cumple}):this.setState({comentario:"",estado:!1}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){return r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null," ",this.props.datos.Especificacion),r.a.createElement(Ft.a,null," ",this.props.datos.observaciones),r.a.createElement(Ft.a,null," ",this.props.datos.cantidad),r.a.createElement(Ft.a,null," ",this.state.comentario," "),r.a.createElement(Ft.a,null," ",this.state.estado?"SI":"NO"," "))}}]),t}(r.a.Component),rr=Object(c.b)(function(e){return{userAcceso:e.userAcceso,idEmpresa:e.propuesta.idEmpresa}})(nr);var or={cont:{display:"flex",justifyContent:"center"},tableWrapper:{overflowX:"auto"}},ir=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).state={datos:[],action:!0,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){null!=this.props.idCompra&&this.getData(this.props.idCompra)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/listreferenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({datos:a.data}),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"mapdata",value:function(){var e=this;return this.state.datos.length>0?this.props.form?this.state.datos.map(function(t,a){return r.a.createElement(ar,{key:a,provedor:e.props.provedor,datos:t})}):this.state.datos.map(function(t,a){return r.a.createElement(rr,{key:a,provedor:e.props.provedor,datos:t})}):r.a.createElement("div",{style:or.cont},"   ",r.a.createElement(Ua.a,{color:"primary"}),"  ")}},{key:"listData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:or.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Especificaci\xf2n "),r.a.createElement(Ft.a,null,"Observaciones "),r.a.createElement(Ft.a,{numeric:!0},"Cantidad"),r.a.createElement(Ft.a,null,"Observaciones"),r.a.createElement(Ft.a,null,"Cumple"))),r.a.createElement(Pt.a,null,this.mapdata()))))}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){return r.a.createElement("div",null,this.listData())}}]),t}(r.a.Component),sr=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(ir);var cr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/detalleentregablesclientes",data:{comentario:a.state.comentario,cumple:a.state.estado?1:0,empresa_id:a.props.provedor.id,entregable_id:a.props.datos.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/detalleentregablesclientes/"+a.state.id,data:{comentario:a.state.comentario,cumple:a.state.estado?1:0},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentario:e.data.comentario,estado:e.data.cumple})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/entregables/"+this.props.provedor.id+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({action:!1,id:t.data.id,comentario:t.data.comentario,estado:t.data.cumple}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this;return r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null," ",this.props.datos.producto),r.a.createElement(Ft.a,null," ",this.props.datos.observaciones),r.a.createElement(Ft.a,null," ",this.props.datos.cantidad),r.a.createElement(Ft.a,null,"  ",r.a.createElement(Se.a,{label:"Observaciones",value:this.state.comentario,placeholder:"Observaciones",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"comentario")},fullWidth:!0,margin:"normal",multiline:!0})),r.a.createElement(Ft.a,null,r.a.createElement(ba.a,{htmlFor:"estado"},this.state.estado?"SI":"NO"," "),r.a.createElement(dn.a,{control:r.a.createElement(_n.a,{checked:this.state.estado,onChange:function(t){return e.updateStado(t,"estado")},value:"activo"})})),this.state.canSubmit?this.state.action?r.a.createElement(Lt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"done_all"):r.a.createElement(Lt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar},"done_all"):r.a.createElement(Ua.a,{color:"secondary"}))}}]),t}(r.a.Component),lr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(cr);var ur=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData(this.props.idEmpresa)}},{key:"componentWillReceiveProps",value:function(e){this.getData(e.idEmpresa)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/entregables/"+t+"/"+this.props.datos.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?this.setState({action:!1,id:a.data.id,comentario:a.data.comentario,estado:a.data.cumple}):this.setState({comentario:"",estado:!1}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null," ",this.props.datos.producto),r.a.createElement(Ft.a,null," ",this.props.datos.observaciones),r.a.createElement(Ft.a,null," ",this.props.datos.cantidad),r.a.createElement(Ft.a,null," ",this.state.comentario," "),r.a.createElement(Ft.a,null," ",this.state.estado?"SI":"NO"))}}]),t}(r.a.Component),pr=Object(c.b)(function(e){return{userAcceso:e.userAcceso,idEmpresa:e.propuesta.idEmpresa}})(ur);var mr={cont:{display:"flex",justifyContent:"center"},tableWrapper:{overflowX:"auto"}},dr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).state={datos:[],action:!0,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){null!=this.props.idCompra&&this.getData(this.props.idCompra)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/listEntregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({datos:a.data}),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"mapdata",value:function(){var e=this;return this.state.datos.length>0?this.props.form?this.state.datos.map(function(t,a){return r.a.createElement(lr,{key:a,provedor:e.props.provedor,datos:t})}):this.state.datos.map(function(t,a){return r.a.createElement(pr,{key:a,provedor:e.props.provedor,datos:t})}):r.a.createElement("div",{style:mr.cont}," ",r.a.createElement(Pt.a,null," ",r.a.createElement(Ua.a,{color:"primary"}))," ")}},{key:"listData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:mr.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Producto o servicio"),r.a.createElement(Ft.a,null,"Observaciones "),r.a.createElement(Ft.a,{numeric:!0},"Cantidad"),r.a.createElement(Ft.a,null,"Observaciones"),r.a.createElement(Ft.a,null,"Cumple"))),r.a.createElement(Pt.a,null,this.mapdata()))))}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){return r.a.createElement("div",null,this.listData())}}]),t}(r.a.Component),hr=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(dr);var fr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"POST",url:Oe.endpoint+"/proposals",data:{description:a.state.description,compra_id:a.props.compra.id,empresa_id:a.props.provedor.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.dataPropuesta(e.data),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),console.log("error")})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/proposals/"+a.state.id,data:{description:a.state.description},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.props.dataPropuesta(e.data),a.props.handleNext()}).catch(function(e){a.setState({canSubmit:!0}),console.log("error")})},a.state={id:"",description:"",msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.getData(),this.props.updateSiguiente(!1)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/propuesta/"+this.props.provedor.id+"/"+this.props.compra.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status?(this.setState({action:!1,id:t.data.id,description:t.data.description}),this.props.propuesta(t.data)):t.status,e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({canSubmit:!0,id:"",description:""})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement("p",null,"Por favor indique si tiene algun comentario en referencia al provedor registrado."),r.a.createElement(At.a,{item:!0,xs:12,sm:12},r.a.createElement(Se.a,{label:"Observaciones",value:this.state.description,placeholder:"Escribe las observaciones del provedor para esta compra",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"description")},fullWidth:!0,margin:"normal",multiline:!0,variant:"outlined"}))),r.a.createElement(te.a,{onClick:this.props.handleBack}," anterior "),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "))}}]),t}(r.a.Component),vr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(fr);var br=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/detallepoliticas",data:{comentarios:a.state.comentarios,acepta:a.state.estado?1:0,politica_id:a.props.politica.id,proposal_id:a.props.propuesta.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentarios:e.data.comentarios,estado:e.data.acepta})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/detallepoliticas/"+a.state.id,data:{comentarios:a.state.comentarios,acepta:a.state.estado?1:0},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.setState({action:!1,canSubmit:!0,id:e.data.id,comentarios:e.data.comentarios,estado:e.data.acepta})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.updateStado=function(){a.setState({estado:!a.state.estado})},a.state={id:"",comentarios:"",acepta:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){this.getData()}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/politica/"+this.props.politica.id+"/"+this.props.propuesta.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({action:!1,id:t.data.id,comentarios:t.data.comentarios,estado:t.data.acepta}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:12},this.props.politica.pregunta),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{label:"Observaciones",value:this.state.comentarios,placeholder:"Observaciones",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"comentarios")},fullWidth:!0,margin:"normal",multiline:!0})),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(ba.a,{htmlFor:"estado"},this.state.estado?"SI":"NO"," "),r.a.createElement(dn.a,{control:r.a.createElement(_n.a,{checked:this.state.estado,onChange:function(t){return e.updateStado(t,"estado")},value:"activo"})}),this.state.canSubmit?this.state.action?r.a.createElement(Lt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit},"done_all"):r.a.createElement(Lt.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar},"done_all"):r.a.createElement(Ua.a,{color:"secondary"}))))}}]),t}(r.a.Component),Er=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(br);var gr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).state={id:"",comentarios:"",estado:!1,msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.getData(this.props.storePro)}},{key:"componentWillReceiveProps",value:function(e){this.getData(e.storePro)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/politica/"+this.props.politica.id+"/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?this.setState({id:a.data.id,comentarios:a.data.comentarios,estado:a.data.acepta}):this.setState({comentarios:"",estado:!1}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:12},this.props.politica.pregunta),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement("b",null,"Observaciones:")," ",this.state.comentarios),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement("b",null,this.state.estado?"SI":"NO")))}}]),t}(r.a.Component),yr=Object(c.b)(function(e){return{userAcceso:e.userAcceso,storePro:e.propuesta.id}})(gr);var Sr={cont:{display:"flex",justifyContent:"center"}},Cr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).state={politicas:[],msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.getPoliticas()}},{key:"getPoliticas",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/politicas",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({politicas:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"acciones",value:function(){return this.props.form?this.setListP():this.setListView()}},{key:"setListView",value:function(){var e=this;return this.state.politicas.length>0?this.state.politicas.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(yr,{politica:t,propuesta:e.props.propuesta})," ",r.a.createElement("br",null))}):r.a.createElement("div",{style:Sr.cont},r.a.createElement(Ua.a,{color:"secondary"})," ")}},{key:"setListP",value:function(){var e=this;return this.state.politicas.length>0?this.state.politicas?this.state.politicas.map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(Er,{politica:t,propuesta:e.props.propuesta})," ",r.a.createElement("br",null))}):void 0:r.a.createElement("div",{style:Sr.cont},r.a.createElement(Ua.a,{color:"secondary"})," ")}},{key:"render",value:function(){return r.a.createElement("div",null," ",this.acciones())}}]),t}(r.a.Component),kr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Cr);var Or=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).dataPropuesta=function(e){a.setState({propuesta:e,siguiente:!0})},a.handleNext=function(){3===a.state.activeStep?(a.props.handleNext(),a.props.propuesta(a.state.propuesta)):a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){0===a.state.activeStep?a.props.handleBack():a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleReset=function(){a.setState({activeStep:0})},a.updateSiguiente=function(e){a.setState({siguiente:e})},a.state={activeStep:0,propuesta:{},siguiente:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.siguienteUpdate(!1)}},{key:"action",value:function(){return this.props.compra.id>0?r.a.createElement("div",null,r.a.createElement("p",null,"Por favor indique si el provedor que se presenta cumple con los terminos establecidos. ",r.a.createElement("br",null),"No olvides guardar tus respuestas dando clik a cada ",r.a.createElement(Lt.a,{variant:"contained",type:"submit"},"done_all")," "),r.a.createElement(sr,{form:!0,provedor:this.props.provedor,idCompra:this.props.compra.id})):"Estamos comprobando.."}},{key:"entregables",value:function(){return this.props.compra.id>0?r.a.createElement("div",null,r.a.createElement("p",null,"Por favor indique si el provedor que se presenta cumple con los productos o entregables establecidos. ",r.a.createElement("br",null),"No olvides guardar tus respuestas dando clik a cada ",r.a.createElement(Lt.a,{variant:"contained",type:"submit"},"done_all")," "),r.a.createElement(hr,{form:!0,provedor:this.props.provedor,idCompra:this.props.compra.id})):"Estamos comprobando.."}},{key:"getStepContent",value:function(e){switch(e){case 0:return r.a.createElement(vr,{updateSiguiente:this.updateSiguiente,handleBack:this.props.handleBack,handleNext:this.handleNext,dataPropuesta:this.dataPropuesta,compra:this.props.compra,provedor:this.props.provedor});case 1:return r.a.createElement("div",null,r.a.createElement("p",null,"Por favor Responda las siguientes preguntas y guarde sus respuestas dando clik en el ",r.a.createElement(Lt.a,{variant:"contained",type:"submit"},"done_all")," "),r.a.createElement(kr,{form:!0,propuesta:this.state.propuesta}));case 2:return this.action();case 3:return this.entregables();default:return"Uknown stepIndex"}}},{key:"render",value:function(){var e=this.props.classes,t=["Crear Propuesta."," Conflictos de Inter\xe9s","Terminos de referencia","Productos o entregables"],a=this.state.activeStep;return r.a.createElement("div",null,r.a.createElement(Qe.a,{activeStep:a,alternativeLabel:!0},t.map(function(e){return r.a.createElement(Ze.a,{key:e},r.a.createElement(tt.a,null,e))})),r.a.createElement("div",null,this.state.activeStep===t.length?r.a.createElement("div",null,r.a.createElement(F.a,{className:e.instructions},"All steps completed"),r.a.createElement(te.a,{onClick:this.handleReset},"Reset")):r.a.createElement("div",null,this.getStepContent(a),this.state.siguiente?r.a.createElement("div",{className:e.cont},r.a.createElement(te.a,{onClick:this.handleBack,className:e.backButton},"anterior"),r.a.createElement(te.a,{variant:"contained",color:"primary",onClick:this.handleNext},a===t.length-1?"Confirmar":"Siguiente")):"")))}}]),t}(r.a.Component),Ar=Object(A.withStyles)(function(e){return{root:{width:"90%"},backButton:{marginRight:e.spacing.unit},instructions:{marginTop:e.spacing.unit,marginBottom:e.spacing.unit},cont:{display:"flex",justifyContent:"center"}}})(Or),jr={tableWrapper:{overflowX:"auto"}},xr=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos.data.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,{component:"th",scope:"row"},t.producto),r.a.createElement(Ft.a,null,t.description),r.a.createElement(Ft.a,null,t.cantidad),r.a.createElement(Ft.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.precioSinImpusto)),r.a.createElement(Ft.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.precioConImpuesto)),e.props.action?r.a.createElement(Ft.a,null,r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),r.a.createElement(da.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):r.a.createElement(Ft.a,null," "))})}},{key:"setData",value:function(){return this.props.datos.data.length>0?r.a.createElement("div",{style:jr.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Servicio o producto"),r.a.createElement(Ft.a,null,"Descripci\xf3n"),r.a.createElement(Ft.a,null,"Cantidad"),r.a.createElement(Ft.a,null,"$ valor con valor sin impuesto"),r.a.createElement(Ft.a,null,"$ valor con valor con impuesto"),this.props.action?r.a.createElement(Ft.a,null,"Acciones"):r.a.createElement(Ft.a,null))),r.a.createElement(Pt.a,null,this.getMapData(),r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,{rowSpan:3}),r.a.createElement(Ft.a,{colSpan:3},"Total propuesta"),r.a.createElement(Ft.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.total)))))):""}},{key:"render",value:function(){return r.a.createElement("div",null," ",this.setData()," ")}}]),t}(r.a.Component);function Dr(e){var t=e.inputRef,a=e.onChange,n=Object(Y.a)(e,["inputRef","onChange"]);return r.a.createElement(Sa.a,Object.assign({},n,{getInputRef:t,onValueChange:function(e){a({target:{value:e.value}})},thousandSeparator:!0,prefix:"$"}))}var Pr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).modificar=function(e){a.getDetallePropuesta(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"POST",url:Oe.endpoint+"/propuestaeconomicas",data:{producto:a.state.producto,cantidad:a.state.cantidad,description:a.state.description,precioSinImpusto:a.state.precioSinImpuesto,precioConImpuesto:a.state.precioConImpuesto,proposal_id:a.props.propuesta.id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getDatos(a.props.propuesta.id),a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/propuestaeconomicas/"+a.state.id,data:{producto:a.state.producto,cantidad:a.state.cantidad,description:a.state.description,precioSinImpusto:a.state.precioSinImpuesto,precioConImpuesto:a.state.precioConImpuesto},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getDatos(a.props.propuesta.id),a.clear()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){ke()({method:"DELETE",url:Oe.endpoint+"/propuestaeconomicas/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getDatos(a.props.propuesta.id)}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",producto:"",Cantidad:0,descripcion:"",precioSinImpuesto:"",PrecioComImpuesto:"",propuestaeconomica:{data:[]},error:{},msg:{estado:!1,msg:"",tipo:""},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.props.propuesta.id>0&&this.getDatos(this.props.propuesta.id)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"getDatos",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/propuestaCliente/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&(a.data.data.length>0?this.props.siguienteUpdate(!0):this.props.siguienteUpdate(!1),this.setState({propuestaeconomica:a.data})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getDetallePropuesta",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/propuestaeconomicas/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,producto:a.data.producto,cantidad:a.data.cantidad,description:a.data.description,precioSinImpuesto:a.data.precioSinImpusto,precioConImpuesto:a.data.precioConImpuesto}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({canSubmit:!0,action:!0,id:"",producto:"",cantidad:"",description:"",precioSinImpuesto:"",precioConImpuesto:"",proposal_id:"",error:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.producto,label:this.state.error.producto?this.state.error.producto[0]:"Producto",value:this.state.producto,placeholder:"Ingrese producto o servicio ",ref:"producto",name:"producto",onChange:function(t){return e.syncField(t,"producto")},fullWidth:!0,margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.description,label:this.state.error.description?this.state.error.description[0]:"Descripci\xf2n",value:this.state.description,placeholder:"Descripci\xf2n del producto",ref:"description",name:"description",onChange:function(t){return e.syncField(t,"description")},fullWidth:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.precioSinImpusto,label:this.state.error.precioSinImpusto?this.state.error.precioSinImpusto[0]:"Precio sin Iva",value:this.state.precioSinImpuesto,placeholder:"Precio sin impuestos ",ref:"precioSinImpuesto",name:"precioSinImpuesto",onChange:function(t){return e.syncField(t,"precioSinImpuesto")},fullWidth:!0,InputProps:{inputComponent:Dr},margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.precioConImpuesto,label:this.state.error.precioConImpuesto?this.state.error.precioConImpuesto[0]:"Precio con Impuesto",value:this.state.precioConImpuesto,placeholder:"Precio com impuesto",ref:"precioConImpuesto",name:"precioConImpuesto",onChange:function(t){return e.syncField(t,"precioConImpuesto")},fullWidth:!0,InputProps:{inputComponent:Dr},margin:"normal"}),r.a.createElement(Se.a,{error:!!this.state.error.cantidad,label:this.state.error.cantidad?this.state.error.cantidad[0]:"Cantidad",value:this.state.cantidad,placeholder:"Cantidad",ref:"cantidad",name:"cantidad",onChange:function(t){return e.syncField(t,"cantidad")},fullWidth:!0,margin:"normal"}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),r.a.createElement(xr,{modificar:this.modificar,onEliminar:this.onEliminar,datos:this.state.propuestaeconomica,action:!0}))}}]),t}(r.a.Component),wr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Pr);var Fr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleReset=function(){a.setState({activeStep:0})},a.provedor=function(e){a.setState({provedor:e})},a.propuesta=function(e){a.setState({propuesta:e})},a.siguienteUpdate=function(e){a.setState({siguiente:e})},a.state={siguiente:!1,siguiente1:!1,activeStep:0,provedor:{},propuesta:{}},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getSteps",value:function(){return[0===this.state.activeStep?"Buscar Provedor":this.state.provedor.nombre+" NIT: "+this.state.provedor.nit,2!==this.state.activeStep?"Politicas y servicios.":"Radicado propuesta #"+this.state.propuesta.id,"Propuesta economica"]}},{key:"getStepContent",value:function(e){switch(e){case 0:return r.a.createElement(er,{siguienteUpdate:this.siguienteUpdate,handleNext:this.handleNext,provedor:this.provedor});case 1:return r.a.createElement(Ar,{siguienteUpdate:this.siguienteUpdate,propuesta:this.propuesta,provedor:this.state.provedor,compra:this.props.compra,handleBack:this.handleBack,handleNext:this.handleNext});case 2:return r.a.createElement(wr,{siguienteUpdate:this.siguienteUpdate,propuesta:this.state.propuesta});default:return"Unknown step"}}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.getSteps(),n=this.state.activeStep;return r.a.createElement("div",null,r.a.createElement(Qe.a,{activeStep:n,orientation:"vertical"},a.map(function(o,i){return r.a.createElement(Ze.a,{key:o},r.a.createElement(tt.a,null,o),r.a.createElement(Gn.a,null,e.getStepContent(i),e.state.siguiente?r.a.createElement("div",{className:t.actionsContainer},r.a.createElement("div",null,r.a.createElement(te.a,{disabled:0===n,onClick:e.handleBack,className:t.button},"Volver a Propuesta"),r.a.createElement(te.a,{variant:"contained",color:"primary",onClick:e.handleReset,className:t.button},"Nuevo Registro"))):"",e.state.siguiente1?r.a.createElement("div",{className:t.actionsContainer},r.a.createElement("div",null,r.a.createElement(te.a,{disabled:0===n,onClick:e.handleBack,className:t.button},"Back"),r.a.createElement(te.a,{variant:"contained",color:"primary",onClick:e.handleNext,className:t.button},n===a.length-1?"Finish":"Next"))):""))})),n===a.length&&r.a.createElement(Mt.a,{square:!0,elevation:0,className:t.resetContainer},r.a.createElement(F.a,null,"All steps completed - you're finished"),r.a.createElement(te.a,{onClick:this.handleReset,className:t.button},"Reset")))}}]),t}(r.a.Component),_r=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{width:"90%"},button:{marginTop:e.spacing.unit,marginRight:e.spacing.unit},actionsContainer:{marginBottom:2*e.spacing.unit},resetContainer:{padding:3*e.spacing.unit}}})(Fr)),Nr=a(297),Ir=a.n(Nr),Tr=a(193),Rr=a.n(Tr),Mr=a(194),zr=a.n(Mr),Lr=a(296),Wr=a.n(Lr),Ur=a(103),Br=a.n(Ur),Vr=a(91),Gr=a.n(Vr);var qr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"POST",url:Oe.endpoint+"/detallepropuesta",data:{descripcion:a.state.description,idPropuesta:a.props.propuesta.id,idCompra:a.props.compra.id,user_id:a.state.user.user_id},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Error:!0,MessageError:e.data.Error,canSubmit:!0,error:{}}):a.props.inicio()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={open:!1,Error:!1,MessageError:"",canSubmit:!0,aprobada:!1,error:{},user:{}},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.setState({user:oe()(this.props.userAcceso)})}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,"Super-Admin"===oe()(this.props.userAcceso).rol?r.a.createElement(te.a,{variant:"outlined",style:{color:"white"},onClick:this.handleClickOpen},"Aprobar propuesta"):"",r.a.createElement(Qt.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Jt.a,{id:"alert-dialog-title"},"Aprobar Propuesta"),r.a.createElement(Br.a,null,r.a.createElement(Gr.a,{id:"alert-dialog-description"},"A continuaci\xf2n puede aprobar esta propuesta pero tienes que llenar las observaciones."),this.state.Error?r.a.createElement(Gr.a,{style:{color:"red"}},this.state.MessageError):"",r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:12},r.a.createElement(Se.a,{error:!!this.state.error.descripcion,label:this.state.error.descripcion?this.state.error.descripcion[0]:"Observaciones",value:this.state.description,placeholder:"Escribe las observaci\xf2n de aprobaci\xf2n de esta propuesta.",ref:"Observaciones",name:"Observaciones",onChange:function(t){return e.syncField(t,"description")},fullWidth:!0,margin:"normal",multiline:!0,variant:"outlined"})))),r.a.createElement(Wr.a,null,r.a.createElement(te.a,{disabled:!this.state.canSubmit,onClick:this.onSubmit,color:"primary"},"Aprobar"),r.a.createElement(te.a,{disabled:!this.state.canSubmit,onClick:this.handleClose,color:"primary",autoFocus:!0},"Cancelar"))))}}]),t}(r.a.Component),Xr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(qr);var Hr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.updateStado=function(){a.setState({anchoState:!a.state.anchoState})},a.modificarInicio=function(){a.props.inicio()},a.state={anchoState:!0,open:!1},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){}},{key:"action",value:function(){return this.props.propuesta.compra_id>0?r.a.createElement(sr,{idCompra:this.props.propuesta.compra_id}):r.a.createElement(Ua.a,{color:"secondary"})}},{key:"entregables",value:function(){return this.props.propuesta.compra_id>0?r.a.createElement(hr,{idCompra:this.props.propuesta.compra_id}):r.a.createElement(Ua.a,{color:"secondary"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(dn.a,{control:r.a.createElement(_n.a,{checked:this.state.anchoState,onChange:function(t){return e.updateStado(t,"rta")},value:"estado"})}),r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:this.state.anchoState?12:6},r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement("p",null,"1. Datos del proponente: ")),r.a.createElement("p",null,r.a.createElement("b",null,"Nombre Empresa:")," ",this.props.propuesta.nombre,"  ",r.a.createElement("b",null," NIT: ")," ",this.props.propuesta.nit),r.a.createElement("p",null,r.a.createElement("b",null,"Representante Legal:")," ",this.props.propuesta.representate,"  ",r.a.createElement("b",null," DI:")," ",this.props.propuesta.DI),r.a.createElement("p",null,r.a.createElement("b",null,"Tel\xe9fono: ")," ",this.props.propuesta.telefono,"  ",r.a.createElement("b",null," Direcci\xf3n:")," ",this.props.propuesta.direccion),r.a.createElement("p",null,r.a.createElement("b",null,"E-mail de contacto:")," ",this.props.propuesta.email,"  ",r.a.createElement("b",null," Ciudad: ")," ",this.props.propuesta.ciudad),r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement("p",null,"2. Conflictos de Inter\xe9s")),r.a.createElement(kr,{propuesta:this.props.propuesta}),r.a.createElement("br",null),r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement("p",null,"3. Evaluaci\xf3n T\xe9cnica")),r.a.createElement(Oa.a,{className:"HeartTitle"},this.action()),r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement("p",null,"4. Productos"),this.entregables())),r.a.createElement(At.a,{item:!0,xs:12,sm:this.state.anchoState?12:6},r.a.createElement(Oa.a,{className:"HeartTitle"},r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:9},r.a.createElement("p",null,"5. Propuesta Econ\xf3mica Presentada ")),r.a.createElement(At.a,{item:!0,xs:3,sm:3},2===this.props.compra.EstadoAction||4===this.props.compra.EstadoAction?r.a.createElement(Xr,{compra:this.props.compra,propuesta:this.props.propuesta,inicio:this.modificarInicio}):1===this.props.propuesta.estado?"Propuesta aceptada":"Esta propuesta no fue aceptada "))),r.a.createElement(xr,{data:this.props.propuesta.id,datos:this.props.propuestaeconomica,action:!1}))))}}]),t}(n.Component),$r=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Hr);var Jr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}}),a.getListPropuestaEconomica(a.props.data[a.state.activeStep+1])},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}}),a.getListPropuestaEconomica(a.props.data[a.state.activeStep-1])},a.modificarInicio=function(){a.componentDidMount(),a.props.inicio()},a.state={activeStep:0,viewEstate:!1,propuestaeconomica:{data:[]},propuesta:{}},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){console.log("llego"),console.log(this.props.data.length),this.props.data.length>0&&this.getListPropuestaEconomica(this.props.data[0])}},{key:"componentDidUpdate",value:function(e){e.compra.id!==this.props.compra.id&&this.getListPropuestaEconomica(this.props.data[0])}},{key:"getListPropuestaEconomica",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v.dispatch({type:"SET_propuesta",payload:{propuesta:t}}),e.prev=1,e.next=4,ke()({url:Oe.endpoint+"/propuestaCliente/"+t.id,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 4:200===(a=e.sent).status?this.setState({propuestaeconomica:a.data}):a.status,e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.data,t=this.props,a=t.classes,n=t.theme,o=this.state.activeStep,i=e.length;return this.props.viewEstate?r.a.createElement("div",{className:a.root},r.a.createElement(Mt.a,{square:!0,elevation:0,className:a.header}," ",e[o].nombre," - ",e[o].nit,"  # ",e[o].id),r.a.createElement($r,{inicio:this.modificarInicio,compra:this.props.compra,propuesta:e[o],propuestaeconomica:this.state.propuestaeconomica}),r.a.createElement(Ir.a,{steps:i,position:"static",activeStep:o,className:a.mobileStepper,nextButton:r.a.createElement(te.a,{size:"small",onClick:this.handleNext,disabled:o===i-1},"Siguiente","rtl"===n.direction?r.a.createElement(Rr.a,null):r.a.createElement(zr.a,null)),backButton:r.a.createElement(te.a,{size:"small",onClick:this.handleBack,disabled:0===o},"rtl"===n.direction?r.a.createElement(zr.a,null):r.a.createElement(Rr.a,null),"Anterior")})):r.a.createElement("div",null,r.a.createElement("p",null,"No tenemos ninguna propuesta ninguna propuesta registrada. "))}}]),t}(r.a.Component),Kr=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{header:{display:"flex",alignItems:"center",height:50,paddingLeft:4*e.spacing.unit,backgroundColor:e.palette.background.default}}},{withTheme:!0})(Jr)),Qr={cont:{display:"flex",justifyContent:"center"}};function Yr(e){var t=e.children;return r.a.createElement("div",{style:{padding:24}},t)}var Zr=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).modificarInicio=function(){a.getData(a.props.match.params.idCompra)},a.handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.state={compra:{},user:{},value:0,presupuestoAfect:{data:[]},entregables:[],TerminosReferencia:[],presupuesto:{data:[]},fechaSolicitud:"",FechaInicio:"",FechaFin:"",viewEstate:!1,data:[{}]},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"componentDidMount",value:function(){if(this.props.match.isExact){this.getData(this.props.match.params.idCompra),"?R"===this.props.location.search&&this.setState({value:2});var e=new Date(this.state.compra.created_at).toLocaleDateString();this.setState({fechaSolicitud:e,FechaInicio:new Date(this.state.compra.FechaInicio).toLocaleDateString(),FechaFin:new Date(this.state.compra.FechaFin).toLocaleDateString()})}else this.props.history.push("/compras?Error404")}},{key:"componentDidUpdate",value:function(e){e.match.params.idCompra!==this.props.match.params.idCompra&&this.getData(this.props.match.params.idCompra)}},{key:"getPresupuestoAfectado",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/listdetallePresupuesto/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({presupuestoAfect:a.data}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a,n;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/compras/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?(this.setState({compra:a.data}),3===a.data.EstadoAction&&this.getPresupuestoAfectado(a.data.id),this.getUser(a.data.user_id),this.getentregables(a.data.id),this.getTerminos(a.data.id),this.getPresupuesto(a.data.id),this.getPropuesta(a.data.id),n=new Date(this.state.compra.created_at).toLocaleDateString(),this.setState({fechaSolicitud:n,FechaInicio:new Date(this.state.compra.FechaInicio).toLocaleDateString(),FechaFin:new Date(this.state.compra.FechaFin).toLocaleDateString()})):this.props.history.push("/compras?Error404"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.props.history.push("/compras?Error404");case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getUser",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/users/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status?0!==a.data.length&&this.setState({user:a.data}):a.status,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getentregables",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/listEntregables/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({entregables:a.data}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getTerminos",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/listreferenceterms/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&(this.setState({TerminosReferencia:a.data}),0===this.state.datos.length?this.props.CanNext(!1):this.props.CanNext(!0),this.listData()),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getPresupuesto",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/ListdetallePresupuesto/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:return 200===(a=e.sent).status&&this.setState({presupuesto:a.data}),e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),this.getError(e.t0.response);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getPropuesta",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/showpropuestas/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status?0!==a.data.length?this.setState({viewEstate:!0,data:a.data}):this.setState({viewEstate:!1}):202===a.status&&this.setState({viewEstate:!1}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getEstado",value:function(e){switch(e){case 0:return"Compra registrada";case 1:return"Compra anulada";case 2:return"compra habilitada para resivir propuesta";case 3:return"compra aprobada";case 4:return"compra habilitada";default:return""}}},{key:"render",value:function(){var e=this.props.theme;return r.a.createElement("div",null,r.a.createElement(Mt.a,null,r.a.createElement(we.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(_e.a,{label:"Compra"}),r.a.createElement(_e.a,{label:"Propuestas"}),2===this.state.compra.EstadoAction?r.a.createElement(_e.a,{label:"Registrar"}):"")),this.getEstado(this.state.compra.EstadoAction),r.a.createElement(De.a,{axis:"rtl"===e.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},r.a.createElement(Yr,null,this.state.compra.id>0?r.a.createElement(La,{user:this.state.user,entregables:this.state.entregables,TerminosReferencia:this.state.TerminosReferencia,presupuesto:this.state.presupuesto,presupuestoAfect:this.state.presupuestoAfect,fechaSolicitud:this.state.fechaSolicitud,FechaInicio:this.state.FechaInicio,FechaFin:this.state.FechaFin,COMPRADATA:this.state.compra}):r.a.createElement("div",{style:Qr.cont},"   ",r.a.createElement(Ua.a,{color:"secondary"})," ")),r.a.createElement(Yr,null,this.state.compra.id>0?r.a.createElement(Kr,{inicio:this.modificarInicio,compra:this.state.compra,viewEstate:this.state.viewEstate,data:this.state.data}):r.a.createElement("div",{style:Qr.cont},"   ",r.a.createElement(Ua.a,{color:"secondary"})," ")),2===this.state.compra.EstadoAction?r.a.createElement(Yr,null,r.a.createElement(_r,{compra:this.state.compra})):""))}}]),t}(r.a.Component),eo=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}},{withTheme:!0})(Zr)),to=a(98),ao=a.n(to);function no(e){return r.a.createElement(ao.a,Object.assign({direction:"up"},e))}var ro=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={fullWidth:!0,maxWidth:"md"},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getMapData",value:function(){return this.props.datos.data.length>0?this.props.datos.data.map(function(e,t){return r.a.createElement(Tt.a,{key:t},r.a.createElement(Ft.a,null," ",e.id," "),r.a.createElement(Ft.a,null," ",e.NombreCompra),r.a.createElement(Ft.a,null," ",e.objetivo),r.a.createElement(Ft.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.valorConInpuesto)),r.a.createElement(Ft.a,null," ",e.nombreUser," ",e.apellido),r.a.createElement(Ft.a,null," ",e.cargo),r.a.createElement(Ft.a,null," ",e.created_at))}):""}},{key:"setData",value:function(){return r.a.createElement("div",null,r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"ID Compra"),r.a.createElement(Ft.a,null,"Nombre Compra"),r.a.createElement(Ft.a,null,"objetivo"),r.a.createElement(Ft.a,null,"Valor "),r.a.createElement(Ft.a,null,"Nombres Responsable"),r.a.createElement(Ft.a,null,"cargo"),r.a.createElement(Ft.a,null,"Fecha Creaci\xf2n"))),r.a.createElement(Pt.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement($a.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):"")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Qt.a,{open:this.props.open,onClose:this.props.handleClose,TransitionComponent:no,keepMounted:!0,fullWidth:this.state.fullWidth,maxWidth:this.state.maxWidth,"aria-labelledby":"form-dialog-title"},r.a.createElement(Jt.a,{id:"form-dialog-title"}," Compras comprometidas. "),r.a.createElement(Br.a,null,r.a.createElement(At.a,{item:!0,xs:12,sm:12},r.a.createElement("p",null,r.a.createElement("b",null,"Cluster :   "),this.props.row.clusterName),r.a.createElement("p",null,r.a.createElement("b",null,"Componente :")," ",this.props.row.componenteName),r.a.createElement("p",null,r.a.createElement("b",null,"Concepto:"),"  ",this.props.row.proyectoName),r.a.createElement("p",null,r.a.createElement("b",null,"Centro de operaci\xf2n :")," ",this.props.row.operationName)),r.a.createElement(Gr.a,null,"A continuacion se listaran las compras que comprometen la llave."),this.setData())))}}]),t}(r.a.Component);function oo(e){return r.a.createElement(ao.a,Object.assign({direction:"up"},e))}var io=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={fullWidth:!0,maxWidth:"md"},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getMapData",value:function(){return this.props.datos.data.length>0?this.props.datos.data.map(function(e,t){return r.a.createElement(Tt.a,{key:t},r.a.createElement(Ft.a,null," ",e.id," "),r.a.createElement(Ft.a,null," ",e.NombreCompra),r.a.createElement(Ft.a,null," ",e.objetivo),r.a.createElement(Ft.a,null," ",e.servicio),r.a.createElement(Ft.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(e.totalPago),"-",e.porcentaje,"%"),r.a.createElement(Ft.a,null," ",e.clusterName," ",e.apellido))}):""}},{key:"setData",value:function(){return r.a.createElement("div",null,r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"ID Compra"),r.a.createElement(Ft.a,null,"Nombre Compra"),r.a.createElement(Ft.a,null,"objetivo"),r.a.createElement(Ft.a,null,"Servicio "),r.a.createElement(Ft.a,null,"Valor total"),r.a.createElement(Ft.a,null,"Nombres Responsable"))),r.a.createElement(Pt.a,null,this.getMapData())),this.props.datos.data.length>0?r.a.createElement($a.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.total,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):"")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Qt.a,{open:this.props.open,onClose:this.props.handleClose,TransitionComponent:oo,keepMounted:!0,fullWidth:this.state.fullWidth,maxWidth:this.state.maxWidth,"aria-labelledby":"form-dialog-title"},r.a.createElement(Jt.a,{id:"form-dialog-title"}," Gastos. "),r.a.createElement(Br.a,null,r.a.createElement(At.a,{item:!0,xs:12,sm:12},r.a.createElement("p",null,r.a.createElement("b",null,"Cluster :   "),this.props.row.clusterName),r.a.createElement("p",null,r.a.createElement("b",null,"Componente :")," ",this.props.row.componenteName),r.a.createElement("p",null,r.a.createElement("b",null,"Concepto:"),"  ",this.props.row.proyectoName),r.a.createElement("p",null,r.a.createElement("b",null,"Centro de operaci\xf2n :")," ",this.props.row.operationName)),r.a.createElement(Gr.a,null,"A continuacion se listaran las compras que se an gastado la llave."),this.setData())))}}]),t}(r.a.Component);var so={tableWrapper:{overflowX:"auto"}},co=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,openG:!1,row:{},datos:{data:{}},gatosRow:{},gatosDatos:{data:{}}},a.handlePageChangeCompro=function(e){a.setState({activePagecompro:e}),a.getData(a.state.row,e)},a.handlePageChangeGasto=function(e){a.setState({activePagegasto:e}),a.getGatosData(a.state.row,e)},a.handleClickOpen=function(e){a.setState({open:!0,row:e}),a.getData(e,1)},a.handleClickOpenGasto=function(e){a.setState({openG:!0,gatosRow:e}),a.getGatosData(e,1)},a.handleClose=function(){a.setState({open:!1})},a.handleCloseG=function(){a.setState({openG:!1})},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t,a){var n;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/PresupuestoDetalle/llave/?cluster_id="+t.cluster_id+"&componente_id="+t.componente_id+"&operacion_id="+t.operacion_id+"&proyecto_id="+t.proyecto_id+"&periodo_id=1&page="+a,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(n=e.sent).status&&this.setState({datos:n.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getGatosData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t,a){var n;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/presupuestoComprometido/llave/?cluster_id="+t.cluster_id+"&componente_id="+t.componente_id+"&operacion_id="+t.operacion_id+"&proyecto_id="+t.proyecto_id+"&periodo_id=1&page="+a,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(n=e.sent).status&&this.setState({gatosDatos:n.data}),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.data.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,null,t.clusterName),r.a.createElement(Ft.a,null,t.componenteName),r.a.createElement(Ft.a,null,t.proyectoName),r.a.createElement(Ft.a,null,t.operationName),r.a.createElement(Ft.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.totalPresupuesto)),r.a.createElement(Ft.a,null,r.a.createElement("p",{onClick:function(){return e.handleClickOpenGasto(t)}},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.TotalGasto))),r.a.createElement(Ft.a,null,r.a.createElement("p",{onClick:function(){return e.handleClickOpen(t)}}," ",new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.comprometido))),r.a.createElement(Ft.a,null,new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(t.disponible)),e.props.action?r.a.createElement(Ft.a,null," ",r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon")):r.a.createElement(Ft.a,null))}):""}},{key:"setData",value:function(){var e=this;return r.a.createElement("div",{style:so.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null," ",r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.props.cleardata()}},"brush"),this.props.clusterA?r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.props.handleClickOpen("cluster")}},"visibility"):""," Cluster"),r.a.createElement(Ft.a,null,this.props.componenteA?r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.props.handleClickOpen("componente")}},"visibility"):""," Componente"),r.a.createElement(Ft.a,null,"Concepto"),r.a.createElement(Ft.a,null,this.props.operationn?r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.props.handleClickOpen("operacion")}},"visibility"):"","Centro de operaci\xf2n"),r.a.createElement(Ft.a,null,"$ Presupuesto"),r.a.createElement(Ft.a,null,"$ Gasto"),r.a.createElement(Ft.a,null,"$ Comprometido"),r.a.createElement(Ft.a,null,"$ Disponible "),this.props.action?r.a.createElement(Ft.a,null,"Acciones"):r.a.createElement(Ft.a,null))),this.props.datos.data.length>0?r.a.createElement(Pt.a,null,this.getMapData(),r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,{rowSpan:3}),r.a.createElement(Ft.a,{colSpan:3},"Total"),r.a.createElement(Ft.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.totalPresupuesto)),r.a.createElement(Ft.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalGasto)),r.a.createElement(Ft.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalComprometido)),r.a.createElement(Ft.a,{align:"right"},new Intl.NumberFormat("COL",{style:"currency",currency:"COL",minimumFractionDigits:0,maximumFractionDigits:0}).format(this.props.datos.TotalDisponible)))):r.a.createElement(Pt.a,null)),this.props.datos.data.length>0?r.a.createElement($a.a,{activePage:this.props.activePage,itemsCountPerPage:10,totalItemsCount:this.props.datos.totalData,pageRangeDisplayed:5,onChange:this.props.handlePageChange}):"",r.a.createElement(ro,{open:this.state.open,handleClose:this.handleClose,row:this.state.row,datos:this.state.datos,activePage:this.state.activePagecompro,handlePageChange:this.handlePageChangeCompro}),r.a.createElement(io,{open:this.state.openG,handleClose:this.handleCloseG,row:this.state.gatosRow,datos:this.state.gatosDatos,activePage:this.state.activePagegasto,handlePageChangeGastos:this.handlePageChangeGasto}))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component),lo=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(co),uo={avatar:{backgroundColor:Zt.a[100],color:Zt.a[600]}},po=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).handleClose=function(){a.props.onClose()},a.handleListItemClick=function(e){a.props.handleSelect(e)},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"mapdata",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(H.a,{button:!0,onClick:function(){return e.handleListItemClick({data:t,action:e.props.action})},key:t.id},r.a.createElement(qt.a,null,r.a.createElement(Vt.a,null,r.a.createElement("i",{className:"material-icons"}," find_in_page "))),r.a.createElement(Ht.a,{primary:t.nombre}))}):""}},{key:"render",value:function(){var e=this,t=this.props,a=(t.classes,t.onClose,t.handleSelect,t.selectedValue,Object(Y.a)(t,["classes","onClose","handleSelect","selectedValue"]));return r.a.createElement(Qt.a,Object.assign({onClose:this.handleClose,"aria-labelledby":"simple-dialog-title"},a),r.a.createElement(Jt.a,{id:"simple-dialog-title"},this.props.title),r.a.createElement("div",null,r.a.createElement(V.a,null,this.mapdata(),r.a.createElement(H.a,null,r.a.createElement(te.a,{variant:"outlined",color:"primary",onClick:function(){return e.handleClose()}},"Cancelar")))))}}]),t}(r.a.Component),mo=Object(A.withStyles)(uo)(po);var ho=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handlePageChange=function(e){""===a.state.actionf?(a.setState({activePage:e}),a.getData(1,e)):(a.setState({activePage:e}),a.getDatafilter(1,e,a.state.cluster_idF,a.state.componente_idF,a.state.operacion_idF))},a.modificar=function(e){a.getpresupuesto(e)},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/presupuestos",data:{periodo_id:1,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,operacion_id:a.state.operacion_id,proyecto_id:a.state.proyecto_id,valor:a.state.valor,action:!1},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear(),a.getData(1,1),a.setState({canSubmit:!0})}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/presupuestos/"+a.state.id,data:{periodo_id:1,cluster_id:a.state.cluster_id,componente_id:a.state.componente_id,operacion_id:a.state.operacion_id,proyecto_id:a.state.proyecto_id,valor:a.state.valor},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.clear(),a.setState({canSubmit:!0}),a.getData(1,1)}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.handleClickOpen=function(e){switch(e){case"cluster":a.setState({actionf:e,title:"Seleccione cluster",activePage:1,datafilter:a.state.Cluster});break;case"componente":a.setState({actionf:e,title:"Seleccione componente",activePage:1,datafilter:a.state.componentes});break;case"operacion":a.setState({actionf:e,title:"Seleccione operacion",activePage:1,datafilter:a.state.operacions})}a.setState({open:!0})},a.handleSelect=function(e){switch(e.action){case"cluster":a.getDatafilter(1,1,e.data.id,a.state.componente_idF,a.state.operacion_idF),a.setState({cluster_idF:e.data.id});break;case"componente":a.getDatafilter(1,1,a.state.cluster_idF,e.data.id,a.state.operacion_idF),a.setState({componente_idF:e.data.id});break;case"operacion":a.getDatafilter(1,1,a.state.cluster_idF,a.state.componente_idF,e.data.id),a.setState({operacion_idF:e.data.id})}a.setState({open:!1})},a.cleardata=function(e){a.setState({operacion_idF:0,componente_idF:0,cluster_idF:0,Amsg:!1,actionf:"",activePage:1}),a.getData(1,1)},a.setproyecto=function(e){a.setState(e)},a.handleClose=function(e){a.setState({open:!1})},a.state={id:"",cluster_idF:0,cluster_id:"",componente_idF:0,componente_id:"",operacion_idF:0,operacion_id:"",valor:"",proyecto_id:"",nombreProyecto:"",componentes:[],operacions:[],Cluster:[],open:!1,datos:{data:[]},Proyectos:{data:[]},datafilter:[],error:{},title:"Buscando",canSubmit:!0,action:!0,Amsg:!1,clusterA:!1,componenteA:!1,operationn:!1,actionf:"",msg:""},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"componentDidMount",value:function(){this.getcluster(),this.getComponente(),this.getOperacion(),this.getData(1,1)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t,a){var n;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/Presupuesto/"+t+"?page="+a,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(n=e.sent).status&&this.setState({datos:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getpresupuesto",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/presupuestos/"+t,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,cluster_id:a.data.cluster_id,componente_id:a.data.componente_id,operacion_id:a.data.operacion_id,proyecto_id:a.data.proyecto_id,valor:a.data.valor,nombreProyecto:a.data.nombreProyecto}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({id:"",cluster_id:"",componente_id:"",operacion_id:"",proyecto_id:"",error:{},valor:"",action:!0})}},{key:"getcluster",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/clusters/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({Cluster:t.data,clusterA:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getComponente",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/componentes/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({componentes:t.data,componenteA:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getOperacion",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/operacions/",method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({operacions:t.data,operationn:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"listCluster",value:function(){return this.state.Cluster.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listComponente",value:function(){return this.state.componentes.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"listOperation",value:function(){return this.state.operacions.map(function(e){return r.a.createElement(M.a,{key:e.id,value:e.id},e.nombre)})}},{key:"getDatafilter",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t,a,n,r,o){var i;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/Presupuesto/"+t+"/?cluster_id="+n+"&componente_id="+r+"&operacion_id="+o+"&page="+a,method:"get",headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(i=e.sent).status&&(this.setState({datos:i.data}),0===i.data.data.length?this.setState({Amsg:!0,msg:" Error no tenemos datos relacionados con este filtro."}):this.setState({Amsg:!1,msg:""})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t,a,n,r,o){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,"Super-Admin"===oe()(this.props.userAcceso).rol?r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(ba.a,{htmlFor:"Cluster"},this.state.error.cluster?this.state.error.cluster[0]:"Cluster"),r.a.createElement(ga.a,{error:!!this.state.error.cluster,fullWidth:!0,value:this.state.cluster_id,onChange:function(t){return e.syncField(t,"cluster_id")},inputProps:{name:"Cluster",id:"Cluster"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listCluster()),r.a.createElement(ba.a,{htmlFor:"Componente"},this.state.error.componente?this.state.error.componente[0]:"componente"),r.a.createElement(ga.a,{error:!!this.state.error.componente,fullWidth:!0,value:this.state.componente_id,onChange:function(t){return e.syncField(t,"componente_id")},inputProps:{name:"Componente",id:"Componente"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listComponente()),r.a.createElement(ba.a,{htmlFor:"proyecto"},this.state.error.proyecto?this.state.error.proyecto[0]:"Concepto"),r.a.createElement(an,{error:this.state.error,setproyecto:this.setproyecto,value:this.state.proyecto_id,DatoSelect:{id:this.state.proyecto_id,nombre:this.state.nombreProyecto}})),r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(ba.a,{htmlFor:"operacion"},this.state.error.operacion?this.state.error.operacion[0]:"Centro de operaci\xf2n"),r.a.createElement(ga.a,{error:!!this.state.error.operacion,fullWidth:!0,value:this.state.operacion_id,onChange:function(t){return e.syncField(t,"operacion_id")},inputProps:{name:"operacion",id:"operacion"}},r.a.createElement(M.a,{value:""},r.a.createElement("em",null,"None")),this.listOperation()),r.a.createElement(Se.a,{error:!!this.state.error.valor,label:this.state.error.valor?this.state.error.valor[0]:"Total presupuestado",placeholder:"Valor total de presupuestado",value:this.state.valor,onChange:function(t){return e.syncField(t,"valor")},id:"formatted-numberformat-input",fullWidth:!0,InputProps:{inputComponent:Ca}}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  ")):"",r.a.createElement(mo,{action:this.state.actionf,title:this.state.title,selectedValue:this.state.selectedValue,open:this.state.open,onClose:this.handleClose,handleSelect:this.handleSelect,datos:this.state.datafilter}),r.a.createElement(lo,{clusterA:this.state.clusterA,componenteA:this.state.componenteA,operationn:this.state.operationn,cleardata:this.cleardata,handleClickOpen:this.handleClickOpen,datos:this.state.datos,modificar:this.modificar,handlePageChange:this.handlePageChange,activePage:this.state.activePage,action:"Super-Admin"===oe()(this.props.userAcceso).rol}),this.state.Amsg?r.a.createElement("p",null,this.state.msg):"")}}]),t}(r.a.Component),fo=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(ho),vo={tableWrapper:{overflowX:"auto"}},bo=function(e){function t(){return Object(g.a)(this,t),Object(S.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(y.a)(t,[{key:"modificar",value:function(e){this.props.modificar(e)}},{key:"eliminar",value:function(e){this.props.onEliminar(e)}},{key:"getMapData",value:function(){var e=this;return this.props.datos?this.props.datos.map(function(t){return r.a.createElement(Tt.a,{key:t.id},r.a.createElement(Ft.a,null," ",t.nombre," "),r.a.createElement(Ft.a,null,t.descripcion),r.a.createElement(Ft.a,null,t.fechaInicio),r.a.createElement(Ft.a,null,t.fechaFin),r.a.createElement(Ft.a,null,t.activo?"activo":"No activo"),e.props.action?r.a.createElement(Ft.a,null,r.a.createElement(Lt.a,{color:"primary",onClick:function(){return e.modificar(t.id)}},"edit_icon"),r.a.createElement(da.a,{color:"error",onClick:function(){return e.eliminar(t.id)}})):r.a.createElement(Ft.a,null))}):""}},{key:"setData",value:function(){return r.a.createElement(Mt.a,null,r.a.createElement("div",{style:vo.tableWrapper},r.a.createElement(xt.a,null,r.a.createElement(Nt.a,null,r.a.createElement(Tt.a,null,r.a.createElement(Ft.a,null,"Nombre "),r.a.createElement(Ft.a,null,"Descripci\xf2n"),r.a.createElement(Ft.a,null,"Fecha inicio"),r.a.createElement(Ft.a,null,"Fecha Fin"),r.a.createElement(Ft.a,null,"Estado"),this.props.action?r.a.createElement(Ft.a,null,"Acciones"):r.a.createElement(Ft.a,null))),r.a.createElement(Pt.a,null,this.getMapData()))))}},{key:"render",value:function(){return this.setData()}}]),t}(r.a.Component);var Eo=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).modificar=function(e){a.getperiodo(e)},a.updateStado=function(){a.setState({activo:!a.state.activo})},a.onSubmit=function(e){a.setState({canSubmit:!1}),ke()({method:"post",url:Oe.endpoint+"/periodos",data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onSubmitEditar=function(e){a.setState({canSubmit:!1}),ke()({method:"put",url:Oe.endpoint+"/periodos/"+a.state.id,data:{nombre:a.state.nombre,descripcion:a.state.descripcion,fechaInicio:a.state.fechaInicio,fechaFin:a.state.fechaFin,activo:a.state.activo},headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){203===e.status?a.setState({Mensaje:!0,error:{activo:e.data.Error},DatosPresupuesto:e.data,canSubmit:!0}):(a.clear(),a.getData(),a.setState({canSubmit:!0}))}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.onEliminar=function(e){ke()({method:"DELETE",url:Oe.endpoint+"/periodos/"+e,headers:{Accept:"*/*",Authorization:a.props.userAcceso}}).then(function(e){a.getData()}).catch(function(e){a.setState({canSubmit:!0}),a.getError(e.response)})},a.state={id:"",nombre:"",descripcion:"",fechaInicio:"",fechaFin:"",activo:!1,datos:[],error:{},canSubmit:!0,action:!0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"getError",value:function(e){switch(e.status){case 401:v.dispatch({type:"SET_USER_ACCESO",payload:{userAcceso:""}});break;case 422:this.setState({error:e.data});break;case 404:console.log("error 404, archivo no encontrado");break;default:console.log("error inesperado")}}},{key:"syncField",value:function(e,t){var a=e.target.value,n={};n[t]=a,this.setState(n)}},{key:"getData",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(){var t;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/periodos",method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(t=e.sent).status&&this.setState({datos:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}()},{key:"getperiodo",value:function(){var e=Object(Te.a)(Ie.a.mark(function e(t){var a;return Ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ke()({url:Oe.endpoint+"/periodos/"+t,method:"get",timeout:8e3,headers:{Accept:"*/*",Authorization:this.props.userAcceso}});case 3:200===(a=e.sent).status&&this.setState({action:!1,id:a.data.id,nombre:a.data.nombre,descripcion:a.data.descripcion,fechaInicio:a.data.fechaInicio,fechaFin:a.data.fechaFin,activo:a.data.activo}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.getError(e.t0.response);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},{key:"clear",value:function(){this.setState({action:!0,id:"",nombre:"",descripcion:"",fechaInicio:"",fechaFin:"",activo:!1,error:{}})}},{key:"listData",value:function(){return 0!==this.state.datos.length?r.a.createElement(bo,{datos:this.state.datos,modificar:this.modificar,onEliminar:this.onEliminar,action:!0}):""}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(At.a,{container:!0,spacing:24},r.a.createElement(At.a,{item:!0,xs:12,sm:6},r.a.createElement(Se.a,{error:!!this.state.error.nombre,label:this.state.error.nombre?this.state.error.nombre[0]:"Nombre",placeholder:"Nombre presupuesto",value:this.state.nombre,onChange:function(t){return e.syncField(t,"nombre")},fullWidth:!0}),r.a.createElement(Se.a,{error:!!this.state.error.descripcion,label:this.state.error.descripcion?this.state.error.descripcion[0]:"Descripcion",placeholder:"Descripci\xf2n de presupuesto",value:this.state.descripcion,onChange:function(t){return e.syncField(t,"descripcion")},fullWidth:!0,margin:"normal"})),r.a.createElement(At.a,{item:!0,xs:12,sm:3},r.a.createElement(Se.a,{error:!!this.state.error.fechaInicio,label:this.state.error.fechaInicio?this.state.error.fechaInicio[0]:"Fecha de inicio",id:"date",type:"date",ref:"FechaInicio",name:"FechaInicio",value:this.state.fechaInicio,onChange:function(t){return e.syncField(t,"fechaInicio")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}})),r.a.createElement(At.a,{item:!0,xs:12,sm:3},r.a.createElement(Se.a,{error:!!this.state.error.fechaFin,label:this.state.error.fechaFin?this.state.error.fechaFin[0]:"Fecha de finalizaci\xf3n",id:"date",type:"date",value:this.state.fechaFin,ref:"fechaFin",name:"fechaFin",onChange:function(t){return e.syncField(t,"fechaFin")},fullWidth:!0,margin:"normal",InputLabelProps:{shrink:!0}}),r.a.createElement(ba.a,{htmlFor:"estado"},this.state.error.activo?this.state.error.activo[0]:"Estado "),r.a.createElement(dn.a,{control:r.a.createElement(_n.a,{checked:this.state.activo,onChange:function(t){return e.updateStado(t,"rta")},value:"activo"})}))),this.state.action?r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmit}," Registrar  "):r.a.createElement(te.a,{variant:"contained",type:"submit",disabled:!this.state.canSubmit,color:"primary",onClick:this.onSubmitEditar}," Modificar  "),this.listData())}}]),t}(r.a.Component),go=Object(c.b)(function(e){return{userAcceso:e.userAcceso}})(Eo);function yo(e){var t=e.children;return r.a.createElement("div",{style:{padding:24}},t)}var So=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(S.a)(this,Object(C.a)(t).call(this,e))).handleChange=function(e,t){a.setState({value:t})},a.handleChangeIndex=function(e){a.setState({value:e})},a.state={compra:{},value:0},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.theme;return r.a.createElement("div",null,r.a.createElement(Mt.a,null,r.a.createElement(we.a,{value:this.state.value,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(_e.a,{label:"Presupuesto"}),"Super-Admin"===oe()(this.props.userAcceso).rol?r.a.createElement(_e.a,{label:"Periodos"}):"")),r.a.createElement(De.a,{axis:"rtl"===e.direction?"x-reverse":"x",index:this.state.value,onChangeIndex:this.handleChangeIndex},r.a.createElement(yo,null,r.a.createElement(fo,null)),"Super-Admin"===oe()(this.props.userAcceso).rol?r.a.createElement(yo,null,r.a.createElement(go,null)):""))}}]),t}(r.a.Component),Co=Object(c.b)(function(e){return{User:e.UserData,userAcceso:e.userAcceso}})(Object(A.withStyles)(function(e){return{root:{backgroundColor:e.palette.background.paper,width:500}}},{withTheme:!0})(So)),ko=a(106),Oo=a(298),Ao=a.n(Oo),jo=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(S.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).state={numPages:null,pageNumber:1},a.onDocumentLoadSuccess=function(e){var t=e.numPages;a.setState({numPages:t})},a.goToPrevPage=function(){return a.setState(function(e){return{pageNumber:e.pageNumber-1}})},a.goToNextPage=function(){return a.setState(function(e){return{pageNumber:e.pageNumber+1}})},a}return Object(k.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.state,t=e.pageNumber,a=e.numPages;return r.a.createElement("div",null,r.a.createElement("nav",null,r.a.createElement("button",{onClick:this.goToPrevPage},"Prev"),r.a.createElement("button",{onClick:this.goToNextPage},"Next")),r.a.createElement("div",{width:900},r.a.createElement(ko.Document,{file:Ao.a,onLoadSuccess:this.onDocumentLoadSuccess},r.a.createElement(ko.Page,{pageNumber:t}))),r.a.createElement("p",null,"Page ",t," of ",a))}}]),t}(n.Component);function xo(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement("h3",null,"Error pagina no encontrada  ",r.a.createElement("code",null,t.pathname)))}var Do=function(){return r.a.createElement("div",null,r.a.createElement(Ee.a,null,r.a.createElement(ge.a,{path:"/login",component:$e}),r.a.createElement(ge.a,{exact:!0,path:"/",component:$e}),r.a.createElement(Cn,{path:"/home",component:sn}),r.a.createElement(Cn,{path:"/compra",component:qa}),r.a.createElement(Cn,{path:"/compras",component:Qa}),r.a.createElement(Cn,{path:"/propuesta/:idCompra",component:eo}),r.a.createElement(Cn,{path:"/presupuesto",component:Co}),r.a.createElement(Cn,{path:"/Politicas",component:jo}),r.a.createElement(kn,{path:"/AdminUser",component:yn}),r.a.createElement(kn,{path:"/AdminProvedores",component:Dn}),r.a.createElement(kn,{path:"/clusters",component:In}),r.a.createElement(kn,{path:"/componentes",component:Bn}),r.a.createElement(kn,{path:"/conceptos",component:zn}),r.a.createElement(ge.a,{component:xo})))};var Po=function(){return r.a.createElement(c.a,{store:v},r.a.createElement(E.a,{loading:null,persistor:b},r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement(be,null),r.a.createElement("main",null,r.a.createElement(Do,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ko.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(ko.pdfjs.version,"/pdf.worker.js"),i.a.render(r.a.createElement(Po,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[300,2,1]]]);
//# sourceMappingURL=main.2f9b54c8.chunk.js.map